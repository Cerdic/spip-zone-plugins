[(#REM)<style>/*

  Nouveau markup identique pour le mode étroit et large dans body.html :
  - #conteneur
      - #contenu
      - #navigation
      - #extra

  On fait du mobile-first : pas de colonne à la base, puis on en met 2 ou 3 selon la largeur.
  Pour les vieux navigateurs, on met du float comme en 40e, 
  et du CSS grid pur les nouveaux.

*/]#CACHE{3600*100,cache-client}
#HTTP_HEADER{Content-Type: text/css;charset=utf-8}
#HTTP_HEADER{Vary: Accept-Encoding}

/*
  ====
  Base
  ====
  - On met tout en pleine largeur
  - Pas de colonne (mobile first)
*/

/* Containers en pleine largeur */
body,
body.large {
  min-width: auto;
}
.largeur,
#conteneur,
.table_page,
.large .largeur,
.large #conteneur,
.large .table_page {
  width: auto;
}
.largeur,
.large .largeur {
  padding: 0 1.5vw;
}

/* Pas de colonne
   Obligé de mettre des !important à moins de cibler 50 variantes différentes
   (.large #contenu, body.large .edition #contenu, etc.)
*/
#contenu,
#navigation,
#extra {
  width: 100% !important;
  float: none !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Des blocs à limiter en largeur pour obtenir ~80 caractères max par ligne */
#wysiwyg,
/* .cadre-formulaire-editer, */
.formulaire_spip textarea,
.formulaire_spip .edition {
  display: block;
  max-width: 45em;
  margin-left: auto;
  margin-right: auto;
}


/*
  ==========
  Responsive
  ==========
*/


/* 2 colonnes */ 
@media (min-width: 780px) {

  /* D'abord le fallback pour les vieux navigateurs */
  /* [TODO] */
  
  /* Ensuite le layout en CSS grid : 2 colonnes */
  @supports (display: grid) {
    #conteneur {
      display: grid;
      grid-gap: 0 1.5vw;
      grid-template-columns: auto repeat(3, 1fr);
      grid-template-rows: auto 1fr; /* la 1ère ligne doit se collapser */
      grid-template-areas:
        "navigation contenu contenu contenu"
        "extra      contenu contenu contenu";
    }
    #contenu {
      grid-area: contenu;
    }
    #navigation {
      grid-area: navigation;
    }
    #extra {
      grid-area: extra;
    }
    /* Hack : on met une largeur au contenu des colonnes latérales,
    ainsi quand elles sont vides, elles se collapsent */
    #navigation > .ajaxbloc > *,
    #navigation > :not(.ajaxbloc),
    #extra > .ajaxbloc > *,
    #extra > :not(.ajaxbloc) {
      width: calc(18em + 2vw);
    }
  }
}

/* 3 colonnes */
@media (min-width: 1200px) {

  @supports (display: grid) {
    #conteneur {
      grid-template-columns: auto repeat(3, 1fr) auto;
      grid-template-rows: auto auto;
      grid-template-areas:
        "navigation contenu contenu contenu extra"
        "navigation contenu contenu contenu extra";
    }
  }

}