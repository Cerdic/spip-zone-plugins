[(#REM)<style>/*
  Ce squelette definit les styles de l'espace prive

  Note: l'entete "Vary:" sert a repousser l'entete par
  defaut "Vary: Cookie,Accept-Encoding", qui est (un peu)
  genant en cas de "rotation du cookie de session" apres
  un changement d'IP (effet de clignotement).

  ATTENTION: il faut absolument le charset sinon Firefox croit que
  c'est du text/html !
*/]#CACHE{3600*100,cache-client}
#HTTP_HEADER{Content-Type: text/css;charset=iso-8859-15}
#HTTP_HEADER{Vary: Accept-Encoding}

/*
  ==========
  conteneurs
  ==========
  Pleine largeur pour tout le monde !
  Oui, on ignore les préférences utilisateur (de toute façon le mode « écran large » rendait le contenu central... plus étroit !).
*/

body,
body.large {
  min-width: auto;
}

.largeur, #conteneur, .table_page,
.large .largeur, .large #conteneur, .large .table_page {
  width: auto !important;
}

#bando_haut .largeur,
#haut,
#conteneur,
#pied .largeur,
.table_page {
  padding: 0 30px; /* = margin-left de #contenu */
}

.large #bando_haut .largeur,
.large #conteneur,
.large #haut,
.large #pied .largeur,
.large .table_page {
  padding: 0 24px; /* = margin-left de #contenu */
}


/*
  ======
  layout
  ======
  On passe les 3 items #contenu, #navigation et #extra en flexbox.
  De base, une colonne et on place #contenu en premier.
*/

#conteneur {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

#contenu, #navigation, #extra,
.large #contenu, .large #navigation, .large #extra {
  float: none;
  width: auto;
}

/* ordre des items */
#contenu {
  -webkit-box-ordinal-group: 2;
      -ms-flex-order: 1;
          order: 1;
  margin-left: 0;
}
.large #contenu {
  margin-left: 0;
}
#navigation {
  -webkit-box-ordinal-group: 3;
      -ms-flex-order: 2;
          order: 2;
}
#extra {
  -webkit-box-ordinal-group: 4;
      -ms-flex-order: 3;
          order: 3;
}

/* prévisualisation du contenu éditorial */
#wysiwyg {
  max-width: 50em; /* ~70 caractères par ligne */
  margin-left: auto;
  margin-right: auto;
}


/*
    ==========
    Responsive
    ==========
    On passe en colonnes au-delà de 780px
    Cette valeur est tirée de la largeur minimale de la page par défaut dans les styles vanilla de SPIP.
    Quand #navigation ou #extra sont vides, le contenu central s'adapte pour prendre tout l'espace disponible.
    Malheureusement on ne peut pas mettre de largeur en pourcentage pour les colonnes, sinon on a des colonnes fantomes en absence de contenu.
*/

@media (min-width: 780px) {

  /* Conteneur */
  #conteneur {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
  }

   #contenu, #navigation, #extra {
     width: auto !important;
   }

  /* contenu principal */
  #contenu {
    -webkit-box-flex: 1;
    -ms-flex-positive: 1;
    flex-grow: 1;
    -webkit-box-ordinal-group: 3;
        -ms-flex-order: 2;
            order: 2;
    margin-left: 30px !important;
  }

  /* colonne */
  #navigation, #extra {
    width: initial !important; /* pas de colonne fantome en abscence de contenu */
    max-width: 33%;
    -webkit-box-flex: 0;
    -ms-flex-positive: 0;
    flex-grow: 0; /* pas de colonne fantome en abscence de contenu */
    -ms-flex-negative: 1;
    flex-shrink: 1;
    -webkit-box-ordinal-group: 2;
        -ms-flex-order: 1;
            order: 1;
  }
  /* largeur de colonne : on cible le premier contenu pour éviter une colonne fantome en abscence de contenu */
  #navigation > .ajaxbloc:first-child > * {
    width: 22rem;
  }

  /* mode large : on place #extra à droite */
  .large #extra {
    -webkit-box-ordinal-group: 4;
    -ms-flex-order: 3;
    order: 3;
    margin-left: 24px !important; /* = margin-left de #contenu */
  }
  .large #contenu {
    margin-left: 24px !important;
  }

}
