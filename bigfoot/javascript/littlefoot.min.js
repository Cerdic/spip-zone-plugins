
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).littlefoot=e()}(function(){var e=function(e){return e&&e.__esModule?e:{default:e}},t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},l={getStyle:function(e,t){var n=(e.ownerDocument&&e.ownerDocument.defaultView||window).getComputedStyle(e);return n.getPropertyValue(t)||n[t]}},g={};Object.defineProperty(g,"__esModule",{value:!0}),g.getAvailableRoom=function(e){var t=parseFloat((0,l.getStyle)(e,"marginLeft")),n=e.offsetWidth-t,r=e.offsetHeight,o=e.getBoundingClientRect(),i=o.left+n/2,a=o.top+r/2;return{top:a,bottom:window.innerHeight-a,leftRelative:i/window.innerWidth}},g.getAvailableHeight=function(e,t){var n=u(e,t),r=parseInt((0,l.getStyle)(e,"marginTop"),10);return t[n?c:a]-r-15},g.repositionPopover=function(e,t){var n=u(e,t),r=e.dataset.footnotePosition,o=n?c:a;r!==o&&(e.dataset.footnotePosition=o,e.classList.remove("".concat(i).concat(r)),e.classList.add("".concat(i).concat(o)),e.style.transformOrigin="".concat(100*t.leftRelative,"% ").concat(n?"100%":"0"))},g.repositionTooltip=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,n=e.querySelector("."+r);n&&(n.style.left=100*t+"%")},g.CLASS_WRAPPER=g.CLASS_TOOLTIP=g.CLASS_CONTENT=void 0,g.CLASS_CONTENT="littlefoot-footnote__content";var r="littlefoot-footnote__tooltip";g.CLASS_TOOLTIP=r,g.CLASS_WRAPPER="littlefoot-footnote__wrapper";var i="is-positioned-",a="bottom",c="top";function u(e,t){var n=2*parseInt((0,l.getStyle)(e,"marginTop"),10)+e.offsetHeight;return t.bottom<n&&t.bottom<t.top}var o={};Object.defineProperty(o,"__esModule",{value:!0});var n={activateDelay:100,activateOnHover:!1,allowDuplicates:!(o.DEFAULT_SETTINGS=void 0),allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,footnoteSelector:"li",hoverDelay:250,contentTemplate:'<aside class="littlefoot-footnote" id="fncontent:<%= id %>" alt="Footnote <%= number %>" aria-live="polite"><div class="'.concat(g.CLASS_WRAPPER,'"><div class="').concat(g.CLASS_CONTENT,'" tabindex="0"><%= content %></div></div><div class="').concat(g.CLASS_TOOLTIP,'"></div></aside>'),buttonTemplate:'<button class="littlefoot-footnote__button littlefoot-footnote__button__ellipsis" id="<%= reference %>" title="See Footnote <%= number %>" aria-controls="fncontent:<%= id %>" aria-expanded="false" aria-label="Footnote <%= number %>" rel="footnote"><svg viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};o.DEFAULT_SETTINGS=n;var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.createCore=function(e,o){var r=e.setup(o),i=(c=o,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.activateDelay,n=c.activateCallback;e.isChanging()||(e.activate(n),e.reposition(),e.resize(),setTimeout(function(){e.ready()},t))}),a=(n=o,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.dismissDelay;e.isChanging()||(e.dismiss(),setTimeout(function(){e.remove()},t))}),n,c;function u(t){r.filter(function(e){return e.id!==t.id}).forEach(a)}var t={activate:i,dismiss:a,findById:function(t){return r.find(function(e){return e.id===t})},dismissAll:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.dismissDelay;r.forEach(function(e){return a(e,t)})},repositionAll:function(){r.forEach(function(e){return e.reposition()})},resizeAll:function(){r.forEach(function(e){return e.resize()})},toggle:function(e){var t=o.allowMultiple;e.isActive()?a(e):(t||u(e),i(e))},hover:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.hoverDelay,n=o.activateOnHover,r=o.allowMultiple;e.startHovering(),n&&!e.isActive()&&(r||u(e),i(e,t))},unhover:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.hoverDelay,n=o.dismissOnUnhover;e.stopHovering(),n&&setTimeout(function(){r.some(function(e){return e.isHovered()})||r.forEach(a)},t)}},l=e.addListeners(t);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){(0,f.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{unmount:function(){l(),r.forEach(function(e){return e.destroy()}),e.cleanup()}})};var f=e(t);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var Ie=/<%=([\s\S]+?)%>/g,Re={};(function(e){var t,a=1/0,c="[object Null]",u="[object Symbol]",l="[object Undefined]",n=/[&<>"']/g,r=RegExp(n.source),o="object"==typeof e&&e&&e.Object===Object&&e,i="object"==typeof self&&self&&self.Object===Object&&self,s=o||i||Function("return this")(),f=(t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==t?void 0:t[e]}),d=Object.prototype,p=d.hasOwnProperty,v=d.toString,y=s.Symbol,h=y?y.toStringTag:void 0,g=y?y.prototype:void 0,m=g?g.toString:void 0,b={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ie,variable:"",imports:{_:{escape:function(e){return(e=null==(t=e)?"":j(t))&&r.test(e)?e.replace(n,f):e;var t}}}};function j(e){if("string"==typeof e)return e;if(w(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,j)+"";if("symbol"==typeof(t=e)||null!=(o=t)&&"object"==typeof o&&(null==(n=t)?void 0===n?l:c:h&&h in Object(n)?function(e){var t=p.call(e,h),n=e[h];try{var r=!(e[h]=void 0)}catch(e){}var o=v.call(e);return r&&(t?e[h]=n:delete e[h]),o}(n):(r=n,v.call(r)))==u)return m?m.call(e):"";var t,n,r,o,i=e+"";return"0"==i&&1/e==-a?"-0":i}var w=Array.isArray;Re=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ke={exports:{}};(function(e){var r=1/0,o=9007199254740991,t="[object Arguments]",n="[object AsyncFunction]",i="[object DOMException]",a="[object Error]",c="[object Function]",u="[object GeneratorFunction]",l="[object Null]",s="[object Object]",f="[object Proxy]",d="[object Symbol]",p="[object Undefined]",b=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,w=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,v=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,S=/($^)/,_=/['\n\r\u2028\u2029\\]/g,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[t]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h[a]=h[c]=h["[object Map]"]=h["[object Number]"]=h[s]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var g={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},m="object"==typeof e&&e&&e.Object===Object&&e,A="object"==typeof self&&self&&self.Object===Object&&self,E=m||A||Function("return this")(),x="object"==typeof ke.exports&&ke.exports&&!ke.exports.nodeType&&ke.exports,L=x&&ke&&!ke.nodeType&&ke,P=L&&L.exports===x,T=P&&m.process,D=function(){try{return L&&L.require&&L.require("util").types||T&&T.binding&&T.binding("util")}catch(e){}}(),M=D&&D.isTypedArray;function C(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function F(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function H(e){return"\\"+g[e]}function I(t,n){return function(e){return t(n(e))}}var R,k=Function.prototype,W=Object.prototype,N=E["__core-js_shared__"],U=k.toString,$=W.hasOwnProperty,z=(R=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",q=W.toString,B=U.call(Object),V=RegExp("^"+U.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=P?E.Buffer:void 0,Y=E.Symbol,J=I(Object.getPrototypeOf,Object),K=W.propertyIsEnumerable,Q=Y?Y.toStringTag:void 0,X=function(){try{var e=(r=Object,!Le(t=i=null==r?void 0:r.defineProperty)||z&&z in(n=t)||!(Ee(t)?V:v).test(function(e){if(null!=e){try{return U.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(t))?void 0:i);return e({},"",{}),e}catch(e){}var t,n,r,o,i}(),Z=G?G.isBuffer:void 0,ee=I(Object.keys,Object),te=Math.max,ne=Date.now,re=Y?Y.prototype:void 0,oe=re?re.toString:void 0;function ie(e,t){var n=Oe(e),r=!n&&we(e),o=!n&&!r&&_e(e),i=!n&&!r&&!o&&De(e),a=n||r||o||i,c=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=c.length;for(var l in e)!t&&!$.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||pe(l,u))||c.push(l);return c}function ae(e,t,n){var r=e[t];$.call(e,t)&&je(r,n)&&(void 0!==n||t in e)||ce(e,t,n)}function ce(e,t,n){"__proto__"==t&&X?X(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ue(e){return null==e?void 0===e?p:l:Q&&Q in Object(e)?function(e){var t=$.call(e,Q),n=e[Q];try{var r=!(e[Q]=void 0)}catch(e){}var o=q.call(e);return r&&(t?e[Q]=n:delete e[Q]),o}(e):(t=e,q.call(t));var t}function le(e){return Pe(e)&&ue(e)==t}function se(e,t){return be((i=e,c=He,a=te(void 0===(a=t)?i.length-1:a,0),function(){for(var e=arguments,t=-1,n=te(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var o=Array(a+1);++t<a;)o[t]=e[t];return o[a]=c(r),C(i,this,o)}),e+"");var i,a,c}function fe(e){if("string"==typeof e)return e;if(Oe(e))return F(e,fe)+"";if("symbol"==typeof(t=e)||Pe(t)&&ue(t)==d)return oe?oe.call(e):"";var t,n=e+"";return"0"==n&&1/e==-r?"-0":n}function de(e,t,n,r){return void 0===e||je(e,W[n])&&!$.call(r,n)?t:e}function pe(e,t){var n=typeof e;return!!(t=null==t?o:t)&&("number"==n||"symbol"!=n&&y.test(e))&&-1<e&&e%1==0&&e<t}function ve(e,t,n){if(!Le(n))return!1;var r=typeof t;return!!("number"==r?Se(n)&&pe(t,n.length):"string"==r&&t in n)&&je(n[t],e)}function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||W)}var he,ge,me,be=(he=X?function(e,t){return X(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:He,me=ge=0,function(){var e=ne(),t=16-(e-me);if(me=e,0<t){if(800<=++ge)return arguments[0]}else ge=0;return he.apply(void 0,arguments)});function je(e,t){return e===t||e!=e&&t!=t}var we=le(function(){return arguments}())?le:function(e){return Pe(e)&&$.call(e,"callee")&&!K.call(e,"callee")},Oe=Array.isArray;function Se(e){return null!=e&&xe(e.length)&&!Ee(e)}var _e=Z||function(){return!1};function Ae(e){if(!Pe(e))return!1;var t=ue(e);return t==a||t==i||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!Pe(e)||ue(e)!=s)return!1;var t=J(e);if(null===t)return!0;var n=$.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&U.call(n)==B}(e)}function Ee(e){if(!Le(e))return!1;var t=ue(e);return t==c||t==u||t==n||t==f}function xe(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=o}function Le(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Pe(e){return null!=e&&"object"==typeof e}var Te,De=M?(Ce=M,function(e){return Ce(e)}):function(e){return Pe(e)&&xe(e.length)&&!!h[ue(e)]},Me=(Te=function(e,t,n,r){var o;!function(e,t,n,r){var o=!n;n=n||{};for(var i=-1,a=t.length;++i<a;){var c=t[i],u=r?r(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),o?ce(n,c,u):ae(n,c,u)}}(t,Se(o=t)?ie(o,!0):function(e){if(!Le(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ye(e),n=[];for(var r in e)("constructor"!=r||!t&&$.call(e,r))&&n.push(r);return n}(o),e,r)},se(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0;for(o=3<Te.length&&"function"==typeof o?(r--,o):void 0,i&&ve(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&Te(e,a,0,o)}return e})),Ce,Fe=se(function(e,t){try{return C(e,void 0,t)}catch(e){return Ae(e)?e:new Error(e)}});function He(e){return e}ke.exports=function(a,e,t){var n,r=Re.imports._.templateSettings||Re;t&&ve(a,e,t)&&(e=void 0),a=null==(n=a)?"":fe(n),e=Me({},e,r,de);var o,c,u,i=Me({},e.imports,r.imports,de),l=Se(h=i)?ie(h):function(e){if(!ye(e))return ee(e);var t=[];for(var n in Object(e))$.call(e,n)&&"constructor"!=n&&t.push(n);return t}(h),s=(o=i,F(l,function(e){return o[e]})),f=0,d=e.interpolate||S,p="__p += '",v=RegExp((e.escape||S).source+"|"+d.source+"|"+(d===Ie?O:S).source+"|"+(e.evaluate||S).source+"|$","g"),y=$.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"",h;a.replace(v,function(e,t,n,r,o,i){return n=n||r,p+=a.slice(f,i).replace(_,H),t&&(c=!0,p+="' +\n__e("+t+") +\n'"),o&&(u=!0,p+="';\n"+o+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=i+e.length,e}),p+="';\n";var g=$.call(e,"variable")&&e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(u?p.replace(b,""):p).replace(j,"$1").replace(w,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Fe(function(){return Function(l,y+"return "+p).apply(void 0,s)});if(m.source=p,Ae(m))throw m;return m}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),ke=ke.exports;var p={};function v(e){return e?l.getStyle(e,"fontSize")||v(e.parentElement):l.getStyle(window.document.documentElement,"fontSize")}p.pixels=function e(t,n){var r=n&&n.ownerDocument&&n.ownerDocument.defaultView||window,o=r.document.documentElement||r.document.body,i=(u=(c=t)||"0",l=parseFloat(u),s=u.match(/[\d-.]+(\w+)$/),[l,(s&&1<s.length?s[1]:"").toLowerCase()]),a=i[0],c,u,l,s;switch(i[1]){case"rem":return a*e(v(window.document.documentElement));case"em":return a*e(v(n),n&&n.parentElement);case"in":return 96*a;case"q":return 96*a/25.4/4;case"mm":return 96*a/25.4;case"cm":return 96*a*10/25.4;case"pt":return 96*a/72;case"pc":return 96*a/6;case"vh":return(a*r.innerHeight||o.clientWidth)/100;case"vw":return(a*r.innerWidth||o.clientHeight)/100;case"vmin":return a*Math.min(r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)/100;case"vmax":return a*Math.max(r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)/100;default:return a}};var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.createFootnote=function(e){var t=e.id,o=e.button,i=e.content,n=e.host,a=e.popover,c=e.wrapper,r=!1,u=0;return{id:t,activate:function(e){o.classList.add(h),o.setAttribute("aria-expanded","true"),o.classList.add(y),o.insertAdjacentElement("afterend",a),a.style.maxWidth="".concat(document.body.clientWidth,"px");var t=(0,l.getStyle)(i,"maxHeight");u=Math.round((0,p.pixels)(t,i)),"function"==typeof e&&e(a,o)},dismiss:function(){o.classList.add(h),o.blur(),o.setAttribute("aria-expanded","false"),o.classList.remove(y)},isActive:function(){return o.classList.contains(y)},isChanging:function(){return o.classList.contains(h)},isHovered:function(){return r},ready:function(){a.classList.add(y),o.classList.remove(h)},remove:function(){j(a),o.classList.remove(h)},reposition:function(){if(a.parentElement){var e=(0,g.getAvailableRoom)(o),t=Math.min(u,(0,g.getAvailableHeight)(a,e));i.style.maxHeight=t+"px",(0,g.repositionPopover)(a,e),a.offsetHeight<=i.scrollHeight&&a.classList.add(b)}},resize:function(){if(a.parentElement){var e=(0,g.getAvailableRoom)(o),t=i.offsetWidth,n=parseInt((0,l.getStyle)(o,"marginLeft"),10),r=-e.leftRelative*t+n+o.offsetWidth/2;a.style.left=r+"px",c.style.maxWidth=t+"px",(0,g.repositionTooltip)(a,e.leftRelative)}},startHovering:function(){r=!0},stopHovering:function(){r=!1},destroy:function(){j(n)}}};var y="is-active",h="is-changing",b="is-scrollable";function j(e){e.parentNode&&e.parentNode.removeChild(e)}var _={};(function(e){var m="Expected a function",i=NaN,a="[object Symbol]",c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,f=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,r=t||n||Function("return this")(),d=Object.prototype.toString,b=Math.max,j=Math.min,w=function(){return r.Date.now()};function O(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(n=t)&&"object"==typeof n&&d.call(t)==a)return i;var t,n;if(O(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=O(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var o=l.test(e);return o||s.test(e)?f(e.slice(2),o?2:8):u.test(e)?i:+e}_=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(m);return O(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),function(r,o,e){var i,a,c,u,l,s,f=0,d=!1,p=!1,t=!0;if("function"!=typeof r)throw new TypeError(m);function v(e){var t=i,n=a;return i=a=void 0,f=e,u=r.apply(n,t)}function y(e){var t=e-s;return void 0===s||o<=t||t<0||p&&c<=e-f}function h(){var e=w(),t,n;if(y(e))return g(e);l=setTimeout(h,(n=o-((t=e)-s),p?j(n,c-(t-f)):n))}function g(e){return l=void 0,t&&i?v(e):(i=a=void 0,u)}function n(){var e=w(),t=y(e),n;if(i=arguments,a=this,s=e,t){if(void 0===l)return f=n=s,l=setTimeout(h,o),d?v(n):u;if(p)return l=setTimeout(h,o),v(s)}return void 0===l&&(l=setTimeout(h,o)),u}return o=S(o)||0,O(e)&&(d=!!e.leading,c=(p="maxWait"in e)?b(S(e.maxWait)||0,o):c,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==l&&clearTimeout(l),i=s=a=l=void(f=0)},n.flush=function(){return void 0===l?u:g(w())},n}(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var w,O={};w=function(){"use strict";function e(){if(!(this instanceof e))return new e;this.size=0,this.uid=0,this.selectors=[],this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var t=window.document.documentElement,n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector;e.prototype.matchesSelector=function(e,t){return n.call(e,t)},e.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)};var r=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;(e.prototype.indexes=[]).push({name:"ID",selector:function(e){var t;if(t=e.match(r))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var o=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(o))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var d,i=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;function a(){this.map={}}e.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(i))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),e.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},d="function"==typeof window.Map?window.Map:(a.prototype.get=function(e){return this.map[e+" "]},a.prototype.set=function(e,t){this.map[e+" "]=t},a);var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function p(e,t){var n,r,o,i,a,c,u=(e=e.slice(0).concat(e.default)).length,l=t,s=[];do{if(f.exec(""),(o=f.exec(l))&&(l=o[3],o[2]||!l))for(n=0;n<u;n++)if(a=(c=e[n]).selector(o[1])){for(r=s.length,i=!1;r--;)if(s[r].index===c&&s[r].key===a){i=!0;break}i||s.push({index:c,key:a});break}}while(o);return s}function v(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(o=e[n],t.isPrototypeOf(o))return o}function y(e,t){return e.id-t.id}return e.prototype.logDefaultIndexUsed=function(){},e.prototype.add=function(e,t){var n,r,o,i,a,c,u,l,s=this.activeIndexes,f=this.selectors;if("string"==typeof e){for(n={id:this.uid++,selector:e,data:t},u=p(this.indexes,e),r=0;r<u.length;r++)i=(l=u[r]).key,(a=v(s,o=l.index))||((a=Object.create(o)).map=new d,s.push(a)),o===this.indexes.default&&this.logDefaultIndexUsed(n),(c=a.map.get(i))||(c=[],a.map.set(i,c)),c.push(n);this.size++,f.push(e)}},e.prototype.remove=function(e,t){if("string"==typeof e){var n,r,o,i,a,c,u,l,s=this.activeIndexes,f={},d=1===arguments.length;for(n=p(this.indexes,e),o=0;o<n.length;o++)for(r=n[o],i=s.length;i--;)if(c=s[i],r.index.isPrototypeOf(c)){if(u=c.map.get(r.key))for(a=u.length;a--;)(l=u[a]).selector!==e||!d&&l.data!==t||(u.splice(a,1),f[l.id]=!0);break}this.size-=Object.keys(f).length}},e.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,n,r,o,i,a,c,u,l={},s=[],f=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,r=f.length;t<r;t++)for(i=f[t],n=0,o=(a=this.matches(i)).length;n<o;n++)l[(u=a[n]).id]?c=l[u.id]:(c={id:u.id,selector:u.selector,data:u.data,elements:[]},l[u.id]=c,s.push(c)),c.elements.push(i);return s.sort(y)},e.prototype.matches=function(e){if(!e)return[];var t,n,r,o,i,a,c,u,l,s,f,d=this.activeIndexes,p={},v=[];for(t=0,o=d.length;t<o;t++)if(u=(c=d[t]).element(e))for(n=0,i=u.length;n<i;n++)if(l=c.map.get(u[n]))for(r=0,a=l.length;r<a;r++)!p[f=(s=l[r]).id]&&this.matchesSelector(e,s.selector)&&(p[f]=!0,v.push(s));return v.sort(y)},e},"object"==typeof O?O=w():this.SelectorSet=w();var S,A,E={exports:{}};S=this,A=function(e,a){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;var u={},l={},s=new WeakMap,f=new WeakMap,d=new WeakMap,n=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function p(e,t,n){var r=e[t];return e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)},e}function v(){s.set(this,!0)}function y(){s.set(this,!0),f.set(this,!0)}function h(){return d.get(this)||null}function g(e,t){n&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||n.get})}function c(e){var t=(1===e.eventPhase?l:u)[e.type];if(t){var n=function(e,t,n){var r=[],o=t;do{if(1!==o.nodeType)break;var i=e.matches(o);if(i.length){var a={node:o,observers:i};n?r.unshift(a):r.push(a)}}while(o=o.parentElement);return r}(t,e.target,1===e.eventPhase);if(n.length){p(e,"stopPropagation",v),p(e,"stopImmediatePropagation",y),g(e,h);for(var r=0,o=n.length;r<o&&!s.get(e);r++){var i=n[r];d.set(e,i.node);for(var a=0,c=i.observers.length;a<c&&!f.get(e);a++)i.observers[a].data.call(i.node,e)}d.delete(e),g(e)}}}e.off=function(e,t,n){var r=!!(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).capture,o=r?l:u,i=o[e];i&&(i.remove(t,n),i.size||(delete o[e],document.removeEventListener(e,c,r)))},e.on=function(e,t,n){var r=!!(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).capture,o=r?l:u,i=o[e];i||(i=new a,o[e]=i,document.addEventListener(e,c,r)),i.add(t,n)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof E.exports?A(E.exports,O):A((S=S||self)["delegated-events"]={},S.SelectorSet),E=E.exports;var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.bindScrollHandler=function(e,t){var n=(0,L.default)((r=t,function(e){var t=e.currentTarget,n=-e.deltaY;0<n&&(r.classList.remove(M),t.scrollTop<n&&(t.scrollTop=0,e.preventDefault())),n<=0&&n<t.clientHeight+t.scrollTop-t.scrollHeight&&(r.classList.add(M),t.scrollTop=t.scrollHeight,e.preventDefault())})),r;e.addEventListener("mousewheel",n),e.addEventListener("wheel",n)},x.addListeners=function(e){var t,n=e.dismissAll,r=e.findById,o=e.hover,i=e.repositionAll,a=e.resizeAll,c=e.toggle,u=e.unhover,l=(y=r,h=c,g=n,function(e){var t=F(C(e.target,P)),n=t&&y(t);n?h(n):C(e.target,D)||g()}),s=(t=n,function(e){return 27===e.keyCode&&t()}),f=(0,L.default)(i),d=(0,L.default)(a),p=H(r,o),v=H(r,u),y,h,g;return document.addEventListener("touchend",l),document.addEventListener("click",l),document.addEventListener("keyup",s),document.addEventListener("gestureend",f),window.addEventListener("scroll",f),window.addEventListener("resize",d),(0,E.on)("mouseover",T,p),(0,E.on)("mouseout",T,v),function(){document.removeEventListener("touchend",l),document.removeEventListener("click",l),document.removeEventListener("keyup",s),document.removeEventListener("gestureend",f),window.removeEventListener("scroll",f),window.removeEventListener("resize",d),(0,E.off)("mouseover",T,p),(0,E.off)("mouseout",T,v)}};var L=e(_),P="[data-footnote-button]",T="[data-footnote-id]",D="[data-footnote-popover]",M="is-fully-scrolled";function C(e,t){return e&&e.closest(t)||void 0}function F(e){return e?e.dataset.footnoteId:void 0}function H(r,o){return function(e){e.preventDefault();var t=F(C(e.target,T)),n=t&&r(t);n&&o(n)}}var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.setup=function(e){var t=e.allowDuplicates,n=e.anchorParentSelector,r=e.anchorPattern,o=e.buttonTemplate,i=e.contentTemplate,a=e.footnoteSelector,c=e.numberResetSelector,u,l,y,h,s,f,d,p;return function(t,e){var n;return $(document,(1<arguments.length&&void 0!==e?e:"")+' a[href*="#"]').filter(function(e){return(e.href+e.rel).match(t)})}(r,e.scope).map((s=t,f=n,d=a,p=[],function(e){var t="#"+e.href.split("#")[1].replace(/[:.+~*[\]]/g,"\\$&"),n=$(document,t).find(function(e){return s||!p.includes(e)}),r=n&&n.closest(d);if(r)return p.push(r),[e.closest(f)||e,r]})).filter(q).map(Y).map(G).map(c?V(c):function(e){return e}).map((u=o,l=i,y=(0,k.default)(u),h=(0,k.default)(l),function(e,t){var n=(0,R.default)(e,3),r=n[0],o=n[1],i=n[2],a="".concat(t+1),c={number:i,id:a,content:B(o.innerHTML,r.id),reference:r.id};r.insertAdjacentHTML("beforebegin",'<span class="'.concat(N,'">').concat(y(c),"</span>"));var u=r.previousElementSibling,l=u.firstElementChild;l.dataset.footnoteButton="",l.dataset.footnoteId=a,l.dataset.footnoteNumber="".concat(i);var s,f,d=(s=h(c),(f=document.createElement("div")).innerHTML=s,f.firstElementChild);d.dataset.footnotePopover="",d.dataset.footnoteId=a;var p=z(d,g.CLASS_WRAPPER)||d,v=z(d,g.CLASS_CONTENT);return(0,x.bindScrollHandler)(v,d),{id:a,button:l,host:u,popover:d,content:v,wrapper:p}})).map(m.createFootnote)},I.cleanup=function(){$(document,"."+W).forEach(function(e){return e.classList.remove(W)})};var R=e(function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}),k=e(ke),W="footnote-print-only",N="littlefoot-footnote__host",U=function(e){return e.classList.add(W)};function $(e,t){return Array.from(e.querySelectorAll(t))}function z(e,t){return e.querySelector("."+t)}function q(e){return void 0!==e}function B(e,t){var n=t.trim().replace(/\s+/g,"|"),r=new RegExp("(\\s|&nbsp;)*<\\s*a[^#<]*#("+n+")[^>]*>(.*?)<\\s*/\\s*a>","g"),o=e.trim().replace(r,"").replace("[]","");return o.startsWith("<")?o:"<p>"+o+"</p>"}var V=function(u){return function(e,t,n){var r=(0,R.default)(e,3),o=r[0],i=r[1],a=r[2],c=a?n[a-1][2]:0;return[o,i,o.closest(u)?1:c+1]}},G=function(e,t){var n=(0,R.default)(e,2);return[n[0],n[1],1+t]};function Y(e){var t=(0,R.default)(e,2),n=t[0],r=t[1];return U(n),U(r),function e(t){var n,r,o=(n=t,r=":not(.".concat(W,")"),Array.from(n.children).filter(function(e){return 8!==e.nodeType&&(!r||e.matches(r))})),i=o.filter(function(e){return"HR"===e.tagName});o.length===i.length&&(i.concat(t).forEach(U),e(t.parentNode))}(r.parentElement),[n,r]}var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.littlefoot=X,J.default=void 0;var K=e(t);function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function X(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(n,!0).forEach(function(e){(0,K.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},o.DEFAULT_SETTINGS,{},e),r=(0,s.createCore)({setup:I.setup,addListeners:x.addListeners,cleanup:I.cleanup},n);return{activate:function(e){var t=r.findById(e);t&&r.activate(t)},dismiss:function(e,t){var n=e&&r.findById(e);n?r.dismiss(n,t):r.dismissAll(t)},unmount:function(){r.unmount()},getSetting:function(e){return n[e]},updateSetting:function(e,t){n[e]=t}}}var Z=X;return J.default=Z,J});
