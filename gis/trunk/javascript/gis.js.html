#HTTP_HEADER{Content-type:text/javascript}

[(#INCLURE{lib/leaflet/dist/[(#CONFIG{auto_compress_js}|=={oui}|?{'leaflet','leaflet-src'})].js})]

[L.Icon.Default.imagePath = "(#CHEMIN{lib/leaflet/dist/images}|url_absolue)";]

[var geocoder_forwardUrl = '(#VAL{gis_geocoder_rechercher}|generer_url_action{mode=search}|html_entity_decode)';]
[var geocoder_reverseUrl = '(#VAL{gis_geocoder_rechercher}|generer_url_action{mode=reverse}|html_entity_decode)';]
[(#INCLURE{javascript/gis_geocoder.js})]

[(#INCLURE{javascript/gis_utils.js})]

[(#INCLURE{lib/leaflet/plugins/KML.js})]

[(#INCLURE{lib/leaflet/plugins/GPX.js})]

[(#INCLURE{lib/leaflet/plugins/leaflet-providers.js})]

[(#INCLURE{lib/leaflet/plugins/Control.FullScreen.js})]

[(#INCLURE{lib/leaflet/plugins/Control.MiniMap.js})]

[(#REM) Scripts de google et bing si besoin ]

#SET{layers,#CONFIG{gis/layers,#ARRAY{0,openstreetmap_mapnik}}}
[(#VAL|gis_layer_defaut|in_array{#GET{layers}}|non)
	#SET{layers,#GET{layers}|push{#VAL|gis_layer_defaut}}
]

[(#LISTE{google_roadmap,google_satellite,google_terrain}|array_intersect{#GET{layers}}|count|>{0}|oui)
[(#INCLURE{lib/leaflet/plugins/Google.js})]
]

[(#VAL{bing_aerial}|in_array{#GET{layers}}|oui)
[(#INCLURE{lib/leaflet/plugins/Bing.js})]
]

[(#REM) Lib clustering si besoin ]
[(#ENV{cluster}|=={oui}|oui)
[(#INCLURE{lib/leaflet/plugins/leaflet.markercluster-src.js})]
]

[(#INCLURE{javascript/gis_init_map.js})]

[(#CONFIG{auto_compress_js}|=={oui}|oui)
#FILTRE{compacte}
]
