[(#ENV{editable})
<div class="formulaire_spip formulaire_editer formulaire_#FORM" id="formulaire_#FORM-#ENV{id,new}">
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
	<form action="#ENV{action}" method="post" enctype="multipart/form-data"><div>
	  #ACTION_FORMULAIRE{#ENV{action}}
	  <fieldset>
	    <legend><:clevermail:source_des_abonnes:></legend>
			<ul>
				#SET{name,cm_file}
				#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
				#SET{obli,''}
				<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
					<label for="#GET{name}"><:clevermail:a_partir_csv:></label>
					[<span class='erreur_message'>(#GET{erreurs})</span>]
					<input type="file" class="file" name="#GET{name}" id="#GET{name}" size="30" maxlength="255" value="#ENV{#GET{name}}" /></li>
				</li>
				#SET{name,cm_subs}
				#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
				#SET{obli,''}
				<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
					<label for="#GET{name}"><:clevermail:emails:></label>
					[<span class='erreur_message'>(#GET{erreurs})</span>]
					<textarea name="#GET{name}" id="#GET{name}" cols="80" rows="10" wrap="virtual" class="textarea">#ENV{#GET{name}}</textarea>
				</li>
			</ul>
    </fieldset>
    <fieldset>
      <legend><:clevermail:selection_des_listes:></legend>
      <ul>
         #SET{name,cm_lists}
         #SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
         #SET{obli,'obligatoire'}
         <li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
           <label for="#GET{name}"><:clevermail:abonne_lettres:></label>
           [<span class='erreur_message'>(#GET{erreurs})</span>]
           <select name="#GET{name}[]" id="#GET{name}" class="select" multiple="multiple" size="4">
             <BOUCLE_lists(SPIP_CM_LISTS){par lst_name}>
[(#REM) TODO   <option value="#LST_ID"[(#ENV{#GET{name}}|array_intersect{#ARRAY{#LST_ID}}|sizeof|>{0}|oui) selected="selected"]>#LST_NAME</option>]
               <option value="#LST_ID">#LST_NAME</option>
             </BOUCLE_lists>
           </select>
         </li>
         #SET{name,cm_mode}
         #SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
         #SET{obli,''}
         <li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
           <label for="#GET{name}"><:clevermail:mode:></label>
           [<span class='erreur_message'>(#GET{erreurs})</span>]
           <div class="choix">
	           <input type="radio" name="#GET{name}" id="#GET{name}1" class="radio" value="1"[ (#ENV{#GET{name}}|=={1}|oui)checked="checked"] />
	           <label for="#GET{name}1">HTML</label>
	         </div>
	         <div class="choix">
	           <input type="radio" name="#GET{name}" id="#GET{name}2" class="radio" value="0"[ (#ENV{#GET{name}}|=={0}|oui)checked="checked"] />
	           <label for="#GET{name}2">Text</label>
	         </div>
         </li>
	     </ul>
	   </fieldset> 
	    <p class="boutons"><span class="image_loading"></span><input type="submit" class="submit" value="<:bouton_enregistrer:>" /></p>
	</div></form>
</div>
]
