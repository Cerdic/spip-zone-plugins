<!-- titre=<:topbando:titre_top_bando:> -->
<!-- icone=plugin-32.png-->
<!-- boite=<:topbando:configuration_top_bando:> -->

[(#PLUGIN{autorite}|oui)
<!-- autoriser=webmestre -->
<!-- refus=Seuls les webmestres du site sont autoris&#233;s &#224; 
modifier les param&#232;tres. Pour en savoir plus, 
voir <a href="http://www.spip-contrib.net/-Autorite-">la documentation</a>. -->
]
[(#PLUGIN{autorite}|non)
<!-- autoriser=0minirezo -->
<!-- refus=Seuls les administrateurs du site sont autoris&#233;s &#224; 
modifier ces param&#232;tres.  -->
]

<!-- descriptif=
<h4><:topbando:descriptif_configuration:></h4>
-->

<!-- head=
	
	<style type="text/css">
	table.def td{padding-left:1em; padding-right:1em;}
  .previsu_titre:hover, .previsu_logo:hover, .oeil_voir:hover { cursor: pointer; }
  #bando_logo, #bando_titre { border: solid 1px #DDD; }
	</style>

-->
#CACHE{0}
<!-- 
[(#SET{largeur_entete,[(#ENV{largeur_entete}|=={100%}|?{[(#LOGO_SITE_SPIP_SURVOL||largeur|sinon{2000})],[(#ENV{largeur_entete,[(#LOGO_SITE_SPIP_SURVOL||largeur|sinon{2000})]})]})]})]<br>let: #GET{largeur_entete}
[(#REM) attention! là y'a une mauvaise bidouille entre hauteur bandeau et hauteur entete tant que les  sont confondus...!!!]
[(#SET{hauteur_entete,[(#ENV{hauteur_bando,[(#LOGO_SITE_SPIP_SURVOL||hauteur|sinon{200})]})]})]<br>het: #GET{hauteur_entete}

[(#SET{largeur_bando,[(#LOGO_SITE_SPIP_SURVOL||largeur|sinon{[(#GET{largeur_entete})]})]})]<br>lb: #GET{largeur_bando}
[(#SET{hauteur_bando,[(#LOGO_SITE_SPIP_SURVOL||hauteur|sinon{[(#GET{hauteur_entete})]})]})]<br>hb: #GET{hauteur_bando}


[(#SET{fact_reduc, [(#GET{largeur_bando}|>={[(#GET{largeur_entete})]}|?{[(#VAL{500}|div{[(#GET{largeur_bando})]})],[(#VAL{500}|div{[(#GET{largeur_entete})]})]})]})]<br>fact: #GET{fact_reduc}

[(#SET{largeur_entete_reduite,[(#GET{largeur_entete}|mult{[(#GET{fact_reduc})]})]})]<br>ler: #GET{largeur_entete_reduite}
[(#SET{hauteur_bando_reduite,[(#GET{hauteur_bando}|mult{[(#GET{fact_reduc})]})]})]<br>hbr: #GET{hauteur_bando_reduite}
[(#SET{hauteur_entete_reduite,[(#GET{hauteur_entete}|mult{[(#GET{fact_reduc})]})]})]<br>her: #GET{hauteur_entete_reduite}

[(#SET{hauteur_recadre,[(#ENV{hauteur_bando,240}|mult{[(#GET{hauteur_bando_reduite})]}|div{[(#GET{hauteur_bando})]}|round)]})]<br>hrec: #GET{hauteur_recadre}
[(#SET{topcentrer,[(#GET{hauteur_bando_reduite}|moins{[(#GET{hauteur_recadre})]}|div{2}|round)]})]<br>topcentrer: #GET{topcentrer}
[(#SET{top,[(#ENV{calage_top_recadrage,centrer}|=={centrer}|?{[(#GET{topcentrer})],[(#ENV{calage_top_recadrage}|mult{[(#GET{fact_reduc})]})]})]})]<br>top: #GET{top}

[(#SET{hauteur_logo,[(#ENV{redimensionner_logo}|=={oui}|?{[(#ENV{hauteur_logo,[(#GET{hauteur_entete})]})],[(#GET{hauteur_entete})]})]})]<br>hl: #GET{hauteur_logo}
[(#SET{proportion_logo,[(#LOGO_SITE_SPIP||largeur|div{[(#LOGO_SITE_SPIP||hauteur)]})]})]<br>pl: #GET{proportion_logo}
[(#SET{largeur_logo,[(#GET{hauteur_logo}|mult{[(#GET{proportion_logo})]}|round)]})]<br>ll: #GET{largeur_logo}
[(#SET{hauteur_logo_reduite,[(#GET{hauteur_logo}|mult{[(#GET{fact_reduc})]}|round)]})]<br>hlr: #GET{hauteur_logo_reduite}
[(#SET{largeur_logo_reduite,[(#GET{largeur_logo}|mult{[(#GET{fact_reduc})]}|round)]})]<br>llr: #GET{largeur_logo_reduite}

[(#SET{taille_police_reduite, [(#ENV{taille_police}|mult{[(#GET{fact_reduc})]})]})]<br>tpr: #GET{taille_police_reduite}
[(#SET{largeur_titre_reduite, [(#ENV{largeur_titre}|mult{[(#GET{fact_reduc})]})]})]<br>ltr: #GET{largeur_titre_reduite}
[(#SET{marge_sup_titre_reduite, [(#ENV{marge_sup_titre}|mult{[(#GET{fact_reduc})]})]})]<br>mstr: #GET{marge_sup_titre_reduite}

[(#SET{titre,[(#ENV{titre_bando}|=={titre_spip}|?{[(#NOM_SITE_SPIP)],[(#ENV{complement_nom_site})]})]})]
-->
<script type='text/javascript' src='#CHEMIN{prive/javascript/async_upload.js}'></script>
[(#VAL**|affiche_upload)]

<script language="JavaScript" type="text/javascript">
    function initialiser_params(){
        if (jQuery("#bando_non").attr("checked") == true)
        	jQuery(".details_bando").hide();
        if (jQuery("#logo_non").attr("checked") == true)
        	jQuery(".details_logo").hide();
        if (jQuery("#redimensionner_logo_non").attr("checked") == true)
            jQuery("#voir_redimensionner_logo").hide();
        if (jQuery("#titre_non").attr("checked") == true)
        	jQuery(".details_titre").hide();
        if (jQuery("#toutes_bordures_identiques_non").attr("checked") == true)
        	jQuery(".details_bordures").hide();
        if (jQuery("#fond_transparent_oui").attr("checked") == true) 
        	jQuery(".details_couleur_fond").hide();
        
    }
    
  // retourne 3 objets donnant paramètres du bando (les dimensions sont *reduites à l'échelle*) 
  // this.hBando = hauteur en px  
  // this.H = calage horizontal pour background-image (left/center/right) 
  // this.V = valeur de top en px pour background-image 
    function calages(){
    	var hbando = parseInt(jQuery("#hauteur_bando").val() * [(#GET{fact_reduc})]);
        var btop = jQuery("#calage_top_recadrage").val();
        if (parseInt(btop) != NaN)
        	this.V = btop * [(#GET{fact_reduc})];
        if (btop == "centrer") 
        	this.V = ([(#GET{hauteur_bando_reduite})] - hbando) / 2;
        this.H = jQuery("input[name='calage_horizontal_bando']:checked").val();
        this.hBando = hbando;
    }
    
  // gère l'affichage des bordures selon la config
    function gerer_bordures(){
        if (jQuery("input[name='toutes_bordures_identiques']:checked").val() == 'oui') {
        	jQuery("#voir_bordure_unique").show();
            jQuery(".details_bordures").hide();
            var bstyle = jQuery("#style_bordure_unique").val();
            var bcoul = jQuery("#couleur_bordure_unique").val();
            var bep = (parseInt(jQuery("#epaisseur_bordure_unique").val()) * [(#GET{fact_reduc})]) + 'px';
            jQuery("#bando_logo, #bando_titre").css({'border': bstyle + ' ' + bcoul + ' ' + bep});
        }
        else {
        	jQuery("#voir_bordure_unique").hide();
            jQuery(".details_bordures").show();
            Tb = ['top','right','bottom','left'];
            for (i in Tb){
            	var bstyle = jQuery("#style_bordure_" + Tb[i]).val();
                var bcoul = jQuery("#couleur_bordure_" + Tb[i]).val();
                var bep = (parseInt(jQuery("#epaisseur_bordure_" + Tb[i]).val()) * [(#GET{fact_reduc})]) + 'px';
                jQuery("#bando_logo, #bando_titre").css('border-' + Tb[i], bstyle + ' ' + bcoul + ' ' + bep);
            }
        }
    }
        
    jQuery(document).ready(function(){
     // initialisations
        initialiser_params();
        gerer_bordures();
        calages();
        
     // bloc bando   
        jQuery("input[name='utiliser_bando']").change(function(){
            if (jQuery("input[name='utiliser_bando']:checked").val() == 'oui') {
            	jQuery("#bando, #bando_logo, #bando_titre").css({'background-image': 'url([(#LOGO_SITE_SPIP_SURVOL||image_reduire{500,0}|extraire_attribut{src})])'});
                jQuery(".details_bando").show();
            }
            else {
            	jQuery("#bando, #bando_logo, #bando_titre").css({'background-image': 'none'});
                jQuery(".details_bando").hide();
            }
        });
        jQuery("#hauteur_bando").change(function(){
            dims = new calages;
            jQuery("#recadre, #bando_logo, #bando_titre").css({height: dims.hBando + "px"});
            if (jQuery("#redimensionner_logo_non").attr("checked") == true){
                var ll = Math.round(dims.hBando * [(#GET{proportion_logo})]);
                jQuery("#img_logo, #img_logo_titre").css({'height': dims.hBando + "px", 'width': ll + 'px'});
            }
            jQuery("#recadre").css({top: dims.V + "px"});
            jQuery("#bando_logo, #bando_titre").css({'background-position' : dims.H + ' -'+ dims.V + "px"});
        });
        jQuery("#calage_top_recadrage").change(function(){
            dims = new calages;
            jQuery("#recadre").css({top: dims.V + "px"});
            jQuery("#bando_logo, #bando_titre").css({'background-position': dims.H + ' -' + dims.V + 'px'});
        });
        jQuery("input[name='calage_horizontal_bando']").change(function(){
            dims = new calages;
            jQuery("#bando_logo, #bando_titre").css({'background-position': dims.H + ' -' + dims.V + 'px'});
        });
        
    // bloc logo 
        jQuery("input[name='utiliser_logo']").change(function(){
            if (jQuery("input[name='utiliser_logo']:checked").val() == 'oui') {
            	jQuery("#img_logo, #img_logo_titre").css({'display': 'inline'});
                jQuery(".details_logo").show();
            }
            else {
            	jQuery("#img_logo, #img_logo_titre").css({'display': 'none'});
                jQuery(".details_logo").hide();
            }
        });
        jQuery("input[name='place_logo']").change(function(){ 
        	var cote = jQuery("input[name='place_logo']:checked").val();
            jQuery("#img_logo, #img_logo_titre").css({'float': cote});
            var dh = Math.round(parseInt(jQuery("#marge_laterale_logo").val()) * [(#GET{fact_reduc})]);
            var db = Math.round(parseInt(jQuery("#marge_laterale_logo_bord").val()) * [(#GET{fact_reduc})]);
            var cote_txt = (cote == 'right' ? 'left' : 'right'); 
            jQuery("#img_logo, #img_logo_titre").css('margin-' + cote_txt, dh + 'px');
            jQuery("#img_logo, #img_logo_titre").css('margin-' + cote, db + 'px');
        });
        jQuery("input[name='redimensionner_logo']").change(function(){
            if (jQuery("#redimensionner_logo_non").attr("checked") == true){
                jQuery("#voir_redimensionner_logo").hide();
                var hl = parseInt(jQuery("#bando_logo").css("height"));
                var ll = Math.round(hl * [(#GET{proportion_logo})]);
                jQuery("#img_logo, #img_logo_titre").css({'height': hl + 'px', 'width': ll + 'px', 'margin-top': 0});
//                jQuery("#img_logo").css({ 'border': 'none' });
            }
            else {
                jQuery("#voir_redimensionner_logo").show();
                var hl = Math.round(parseInt(jQuery("#hauteur_logo").val()) * [(#GET{fact_reduc})]);
                var ll = Math.round(hl * [(#GET{proportion_logo})]);
                var dv = Math.round(parseInt(jQuery("#marge_sup_logo").val()) * [(#GET{fact_reduc})]);
                jQuery("#img_logo, #img_logo_titre").css({'height': hl + 'px', 'width': ll + 'px', 'margin-top': dv + 'px'});
//                jQuery("#img_logo").css({ 'border': 'dashed #ff0 2px;' });
            }
        });
        jQuery("#hauteur_logo").change(function(){
            var hl = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            var ll = Math.round(hl * [(#GET{proportion_logo})]);
            jQuery("#img_logo, #img_logo_titre").css({'height': hl + 'px', 'width': ll + 'px'});
        });
        jQuery("#marge_sup_logo").change(function(){
            var dv = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            jQuery("#img_logo, #img_logo_titre").css({'margin-top': dv + 'px'});
        });
        jQuery("#marge_laterale_logo").change(function(){
            var dh = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            var cote_marge = (jQuery("input[name='place_logo']:checked").val() == 'right' ? 'left' : 'right'); 
            jQuery("#img_logo, #img_logo_titre").css('margin-' + cote_marge, dh + 'px');
        });       
        jQuery("#marge_laterale_logo_bord").change(function(){
            var db = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            var cote_marge = jQuery("input[name='place_logo']:checked").val(); 
            jQuery("#img_logo, #img_logo_titre").css('margin-' + cote_marge, db + 'px');
        });       
        
    // bloc couleurs 
        jQuery("input[name='fond_transparent']").change(function(){
            if (jQuery("input[name='fond_transparent']:checked").val() == 'oui') {
            	jQuery(".details_couleur_fond").hide();
                jQuery("#bando, #bando_logo, #bando_titre").css('background-color', 'transparent');
            }
            else {
            	jQuery(".details_couleur_fond").show();
                var coul = jQuery("#couleur_principale").val();
                jQuery("#bando, #bando_logo, #bando_titre").css('background-color', coul);
            }
        });
        jQuery("#couleur_principale").blur( function(){
        	var coul = jQuery(this).val();
            jQuery("#bando, #bando_logo, #bando_titre").css({'background-color': coul});
        });
        jQuery("#couleur_principale_texte").blur( function(){ 
        	var coul = jQuery(this).val();
            jQuery("#bando, #bando_logo, #bando_titre").css({'color': coul});
        });
        
    // les bordures
        jQuery("input[name='toutes_bordures_identiques'], .change_bordures").change(gerer_bordures);
        
    // bloc titre
        jQuery("input[name='afficher_titre']").change(function(){
            if (jQuery("input[name='afficher_titre']:checked").val() == 'oui') 
            	jQuery(".details_titre").show();
            else jQuery(".details_titre").hide();
        });
        jQuery("input[name='emplacement_titre']").change(function(){
            var cote = jQuery("input[name='emplacement_titre']:checked").val();
            jQuery("#nom_site_spip").css({'float': cote});
        });
        jQuery("#taille_police").change( function(){ 
        	var taille = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            jQuery("#bando_titre").css({'font-size': taille  +'px'});
        });
        jQuery("input[name='alignement_titre']").change(function(){
            var cote = jQuery("input[name='alignement_titre']:checked").val();
            jQuery("#bando_titre").css({'text-align': cote});
        });
        jQuery("input[name='titre_bando']").change(function(){
            if (jQuery("input[name='titre_bando']:checked").val() == 'titre_spip') 
            	jQuery("#nom_site_spip").text("[(#NOM_SITE_SPIP)]");
            else jQuery("#nom_site_spip").text(jQuery("#complement_nom_site").val());
        });
        jQuery("#largeur_titre").change( function(){ 
        	var taille = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            jQuery("#nom_site_spip").css({'width': taille  +'px'});
        });
        jQuery("#marge_sup_titre").change( function(){ 
        	var taille = Math.round(parseInt(jQuery(this).val()) * [(#GET{fact_reduc})]);
            jQuery("#nom_site_spip").css({'padding-top': taille  +'px'});
        });
        jQuery("#complement_nom_site").change( function(){ 
            if (jQuery("#titre_autre").attr("checked") == true) 
                jQuery("#nom_site_spip").text(jQuery(this).val());
        });
        jQuery("input[name='utiliser_image_typo']").change(function(){
            if (jQuery("input[name='utiliser_image_typo']:checked").val() == 'oui') 
            	jQuery("#voir_justification_titre").hide();
            else jQuery("#voir_justification_titre").show();
        });
        
        
    // les prévisu avec largeur écran
        jQuery(".previsu_logo").click(function(){ 
            jQuery("#bando_logo").css({'width': jQuery(this).attr('title')}); 
            jQuery(".previsu_logo").css({'background-color': '#FFFFFF'});
            jQuery(this).css({'background-color': '#777777'});
        });
        jQuery(".previsu_titre").click(function(){ 
            jQuery("#bando_titre").css({'width': jQuery(this).attr('title')}); 
            jQuery(".previsu_titre").css({'background-color': '#FFFFFF'});
            jQuery(this).css({'background-color': '#777777'});
        });
        
    // le gadget oeil
        jQuery("input.declenche_oeil").keyup(function() {
        	var id_ec = jQuery(this).attr("id") + "_oeil";
            jQuery("#" + id_ec).attr("src", "[(#CHEMIN{images/oeil_f.gif})]");
        });
        jQuery("input.declenche_oeil").blur(function() {
        	var id_ec = jQuery(this).attr("id") + "_oeil";
            jQuery("#" + id_ec).attr("src", "[(#CHEMIN{images/oeil_o.gif})]");
        });
        
    // les redims bando et logo en WYSIWYG avec UI
        function go_recadre(){
            var hbando = jQuery("#recadre").css("height");
            hbando = Math.round(parseInt(hbando.substring(0,(hbando.length - 2))) / [(#GET{fact_reduc})]);
            var topbando = jQuery("#recadre").css("top");
            topbando = Math.round(parseInt(topbando.substring(0,(topbando.length - 2))) / [(#GET{fact_reduc})]);
            jQuery("#hauteur_bando").val(hbando);
            jQuery("#calage_top_recadrage").val(topbando);
            jQuery("#hauteur_bando").trigger('change');
        }
        function go_recadre_logo(){
            var hlogo = jQuery("#img_logo").css("height");
            hlogo = Math.round(parseInt(hlogo.substring(0,(hlogo.length - 2))) / [(#GET{fact_reduc})]);
            jQuery("#hauteur_logo").val(hlogo);
            jQuery("#hauteur_logo").trigger('change');
        }
        jQuery("#recadre").resizable({ containment: 'parent', 
                                       handles: 'n, s',
                                       stop: function(){ go_recadre(); }
                                  });
/* vraiment pas convaincant le resizable sur le logo...                                 
        jQuery("#img_logo").resizable({ containment: 'parent', 
                                        aspectRatio: true,
                                        stop: function(){ go_recadre_logo(); }
                                     });
//        jQuery("#img_logo").draggable({ containment: 'parent'}); // draggable semble bogué en jQuery 1.2.6...
*/
    });
</script>

<form method="post" action="#SELF"><div>[(#ENV{_cfg_}|form_hidden)]</div>

[(#REM) ------------------------- DIMENSIONS EN-TETE --------------------------]
[(#REM) restons simples pour l'instant...
<fieldset>
    <legend><:topbando:dimensions_entete:></legend>
    <p>
        <label><strong><:topbando:hauteur_entete:> :</strong></label>
        <input type="text" name="hauteur_entete" value="[(#ENV{hauteur_entete,200})]" style="width: 80px" id="hauteur_entete" />
        <br/><strong><:topbando:largeur_entete:> :</strong>
        <br/><input type="radio" name="largeur_entete" value="100%" [(#ENV{largeur_entete}|=={100%}|oui) checked="checked"] id="largeur_entete_100"/> 
        <label>100%</label>
        <br /><input type="radio" name="largeur_entete" value="autre" [(#ENV{largeur_entete}|=={100%}|non) checked="checked"] id="largeur_entete_autre"/>
        <label><:topbando:largeur_en_pixels:></label>: 
        <input type="text" name="largeur_perso_entete" value="[(#ENV{largeur_perso_entete,740})]" style="width: 80px" id="largeur_perso_entete" />
    </p>
</fieldset>
]
[(#REM) --------------------------- BANDEAU EN-TETE -------------------------- ]
<fieldset>
    <legend><:topbando:bando_entete:></legend>
    <p>
        <strong><:topbando:utiliser_bando:> :</strong>
        <label><:topbando:oui:></label>
        <input type="radio" name="utiliser_bando" value="oui" [(#ENV{utiliser_bando}|=={oui}|oui) checked="checked"] id="bando_oui"/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="utiliser_bando" value="non" [(#ENV{utiliser_bando}|=={oui}|non) checked="checked"] id="bando_non"/>
        <label><:topbando:non:></label>
    </p>
    <p class="details_bando">
        <strong><:topbando:calage_horizontal_image_bando:> :</strong>
        <label><:topbando:gauche:></label>
        <input type="radio" name="calage_horizontal_bando" value="left" [(#ENV{calage_horizontal_bando}|=={left}|oui) checked="checked"] id="calage_left"/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="calage_horizontal_bando" value="center" [(#ENV{calage_horizontal_bando}|=={center}|oui) checked="checked"] id="calage_center"/>
        <label><:topbando:centre:></label>
        &nbsp;&nbsp;&nbsp;<input type="radio" name="calage_horizontal_bando" value="right" [(#ENV{calage_horizontal_bando}|=={right}|oui) checked="checked"] id="calage_right"/>
        <label><:topbando:droite:></label>        
        <br/><small><:topbando:explication_calage_horizontal:></small>      
    </p>
    <p class="details_bando">
    	<label><:topbando:calage_top_recadrage:> :</label>
    	<input type="text" name="calage_top_recadrage" value="[(#ENV{calage_top_recadrage,centrer})]" style="width: 80px" class="declenche_oeil" id="calage_top_recadrage" />
        [<img id="calage_top_recadrage_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
     	<br/><small><:topbando:explication_calage_top:></small>
    </p>
    <p>
    	<label><strong><:topbando:hauteur_bando:></strong> :</label>
    	<input type="text" name="hauteur_bando" id="hauteur_bando" value="[(#ENV{hauteur_bando,200})]" style="width: 80px" class="declenche_oeil" /> 
        [<img id="hauteur_bando_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
        <br/><small><:topbando:utilisez_le_cadre_rouge_pour_redimensionner:></small>
    </p>
    <div id="bando" style="background: [(#ENV{utiliser_bando}|=={oui}|oui) url([(#LOGO_SITE_SPIP_SURVOL||image_reduire{500,0}|extraire_attribut{src})]) ]
                          no-repeat center [(#ENV{fond_transparent}|=={oui}|?{'transparent',[(#ENV{couleur_principale,#FFFFFF})]})]; 
                          width: 500px; 
                          height: #GET{hauteur_bando_reduite}px;">
<!--
            <div id="entete" style="border: solid 2px #0F0;
                                     position: relative;
                                     width: [(#GET{largeur_entete_reduite}|moins{4})]px;
                                     height: #GET{hauteur_entete_reduite}px;
                                     top: #GET{top}px;
                                     float: left;
                                     ">
            </div>
-->            
        <div id="recadre" style="border: dashed 2px #F00;
                                 position: relative;
                                 width: 496px;
                                 height: #GET{hauteur_recadre}px;
                                 top: #GET{top}px;
                                 ">
        </div>
    </div>
</fieldset>

[(#REM) --------------------------- LOGO EN-TETE ----------------------------- ]
<fieldset>
    <legend><:topbando:logo_entete:></legend>
    <p>
        <strong><:topbando:utiliser_logo:> :</strong>
        <label><:topbando:oui:></label>
        <input type="radio" name="utiliser_logo" value="oui" [(#ENV{utiliser_logo}|=={oui}|oui) checked="checked"] id="logo_oui"/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="utiliser_logo" value="non" [(#ENV{utiliser_logo}|=={oui}|non) checked="checked"] id="logo_non"/>
        <label><:topbando:non:></label>
    </p>
    <p class="details_logo">
        <strong><:topbando:place_logo:> :</strong>
        <label><:topbando:gauche:></label>
        <input type="radio" name="place_logo" value="left" [(#ENV{place_logo}|=={right}|non) checked="checked"] id="logo_g"/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="place_logo" value="right" [(#ENV{place_logo}|=={right}|oui) checked="checked"] id="logo_d"/>
        <label><:topbando:droite:></label>
    	<br/><label><:topbando:marge_laterale_logo_cote_texte:></label>: <input type="text" name="marge_laterale_logo" style="width: 40px;" value="[(#ENV{marge_laterale_logo,10})]" class="declenche_oeil" id="marge_laterale_logo" />px 
        [<img id="marge_laterale_logo_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    	<br/><label><:topbando:marge_laterale_logo_cote_bord:></label>: <input type="text" name="marge_laterale_logo_bord" style="width: 40px;" value="[(#ENV{marge_laterale_logo_bord,0})]" class="declenche_oeil" id="marge_laterale_logo_bord" />px 
        [<img id="marge_laterale_logo_bord_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
        <br/><small><:topbando:explication_2_marges_laterales_logo:></small>
    </p>
    <p class="details_logo">
    	<strong><:topbando:taille_logo:> :</strong>
        <label><:topbando:adaptation_automatique_hauteur_bandeau:></label>
        <input type="radio" name="redimensionner_logo" value="non" [(#ENV{redimensionner_logo}|=={oui}|non) checked="checked"] id='redimensionner_logo_non'/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="redimensionner_logo" value="oui" [(#ENV{redimensionner_logo}|=={oui}|oui) checked="checked"] id='redimensionner_logo_oui'/>
        <label><:topbando:taille_logo_imposee:></label>
    </p>
    <p class="details_logo" id="voir_redimensionner_logo">
    	<label><:topbando:hauteur_logo:> :</label>
    	<input type="text" name="hauteur_logo" id="hauteur_logo" value="[(#ENV{hauteur_logo,[(#LOGO_SITE_SPIP||hauteur)]})]" style="width: 80px" class="declenche_oeil" />px 
        [<img id="hauteur_logo_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    	&nbsp;&nbsp;&nbsp;<label><:topbando:marge_superieure_logo:></label>: <input type="text" name="marge_sup_logo" style="width: 40px;" value="[(#ENV{marge_sup_logo,10})]" class="declenche_oeil" id="marge_sup_logo" />px 
        [<img id="marge_sup_logo_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
        <br/><small><:topbando:explication_redimensionnement_proportionnel:></small>
    </p>
<!--
        <div id="entete_logo" style="border: solid 2px #0F0;
                                 position: relative;
                                 width: 496px;
                                 height: #GET{hauteur_entete_reduite}px;
                                 float: left;
                                 overflow: hidden;
                                 ">
        </div>
-->        
    [(#SET{Tb, #ARRAY{1,top,2,right,3,bottom,4,left}})]
    [(#SET{strB, ''})]
    <BOUCLE_bordures(POUR){tableau #GET{Tb}}>
    	[(#SET{strB, [(#GET{strB}) ]border-#VALEUR: [(#ENV{style_bordure_#VALEUR}) ][(#ENV{couleur_bordure_#VALEUR}) ][(#ENV{epaisseur_bordure_#VALEUR})px]; })]
    </BOUCLE_bordures>
    <div class="details_logo" id="bando_logo" style="background: [(#ENV{utiliser_bando}|=={oui}|oui) url([(#LOGO_SITE_SPIP_SURVOL||image_reduire{500,0}|extraire_attribut{src})]) ]
                            [(#ENV{calage_horizontal_bando})] -[(#GET{top})]px [(#ENV{fond_transparent}|=={oui}|?{'transparent',[(#ENV{couleur_principale,#FFFFFF})]})] no-repeat; 
                            width: 500px; 
                            height: #GET{hauteur_recadre}px;
                            [(#ENV{toutes_bordures_identiques}|=={oui}|?{
                            	border: [(#ENV{style_bordure_unique})] [(#ENV{couleur_bordure_unique})] [(#ENV{epaisseur_bordure_unique})px];
                                ,
                                [(#GET{strB})]
                            })]">
      
        [<img src="(#LOGO_SITE_SPIP||image_reduire{0,[(#GET{hauteur_logo_reduite})]}|extraire_attribut{src})" alt="logo_site"
          style="float: [(#ENV{place_logo,left})];
          		 [margin-[(#ENV{place_logo}|=={right}|?{'left','right'})]: (#ENV{marge_laterale_logo}|mult{[(#GET{fact_reduc})]})px;]
                 [margin-[(#ENV{place_logo})]: (#ENV{marge_laterale_logo_bord}|mult{[(#GET{fact_reduc})]})px;]
                 [(#ENV{redimensionner_logo}|=={oui}|oui) [margin-top: (#ENV{marge_sup_logo}|mult{[(#GET{fact_reduc})]})px;]]
                 [(#REM) ENV{redimensionner_logo}|=={oui}|oui) border: dashed #ff0 2px;]
                 [(#ENV{utiliser_logo}|=={non}|oui)display: none;]" 
          id="img_logo"/>]
      
    </div>
    <p class="details_logo">
        <strong><:topbando:previsualisation_largeur_ecran:></strong>:
        <span class="previsu_logo" title="500px">[[(#GET{largeur_bando})] pixels]</span>
        <span class="previsu_logo" title="[(#VAL{800}|mult{[(#GET{fact_reduc})]})]px">[800 pixels]</span>
        <span class="previsu_logo" title="[(#VAL{1024}|mult{[(#GET{fact_reduc})]})]px">[1024 pixels]</span>
        <span class="previsu_logo" title="[(#VAL{1280}|mult{[(#GET{fact_reduc})]})]px">[1280 pixels]</span>
        <span class="previsu_logo" title="[(#VAL{1600}|mult{[(#GET{fact_reduc})]})]px">[1600 pixels]</span>
        <span class="previsu_logo" title="[(#VAL{1920}|mult{[(#GET{fact_reduc})]})]px">[1920 pixels]</span>
        <span class="previsu_logo" title="[(#VAL{2048}|mult{[(#GET{fact_reduc})]})]px">[2048 pixels]</span>
    </p>     
</fieldset>
    
[(#REM) ------------------------ COULEURS ------------------------------------ ]
<fieldset>
    <legend><:topbando:choix_teinte_generale:></legend>
    <p>
			<strong><:topbando:fond_bandeau:> :</strong>
        <label><:topbando:fond_transparent:></label>
        <input type="radio" name="fond_transparent" value="oui" [(#ENV{fond_transparent}|=={oui}|oui) checked="checked"] id='fond_transparent_oui'/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="fond_transparent" value="non" [(#ENV{fond_transparent}|=={oui}|non) checked="checked"] id='fond_transparent_non'/>
        <label><:topbando:fond_colore:></label>
        
    </p>
    <p class="details_couleur_fond">
        <strong><:topbando:couleur_principale:></strong>
        <input type="text" name="couleur_principale" class="palette" id="couleur_principale" 
            value="[(#ENV{couleur_principale,#FFFFFF})]" style="width: 80px" class="declenche_oeil"/>
        [<img id="couleur_principale_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    </p>
    <p>
        <strong><:topbando:couleur_texte:></strong>
        <input type="text" name="couleur_principale_texte" class="palette" id="couleur_principale_texte" 
            value="[(#ENV{couleur_principale_texte,#000000})]" style="width: 80px" class="declenche_oeil" />
        [<img id="couleur_principale_texte_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    	<br/><small><:topbando:explication_palette:></small>
    </p>
</fieldset>
    
[(#REM) ------------------------ BORDURES ------------------------------------ ]
<fieldset>
    <legend><:topbando:bordures_bandeau:></legend>
    <p>
    	<strong><:topbando:toutes_bordures_identiques:>: </strong>
        <label><:topbando:oui:></label>
        <input type="radio" name="toutes_bordures_identiques" value="oui" [(#ENV{toutes_bordures_identiques}|=={non}|non) checked="checked"] id='toutes_bordures_identiques_oui' /> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="toutes_bordures_identiques" value="non" [(#ENV{toutes_bordures_identiques}|=={non}|oui) checked="checked"] id='toutes_bordures_identiques_non' />
        <label><:topbando:non:></label>
        [(#SET{Tbordures, #ARRAY{<:topbando:toutes_bordures:>,unique,<:topbando:haut:>,top,<:topbando:droite:>,right,<:topbando:bas:>,bottom,<:topbando:gauche:>,left}})]
        [(#SET{Tep, #ARRAY{<:topbando:aucune:>,none,<:topbando:plein:>,solid,<:topbando:tirets:>,dashed,<:topbando:pointilles:>,dotted}})]

        <BOUCLE_b(POUR){tableau #GET{Tbordures}}>
          <p id="voir_bordure_#VALEUR"[(#VALEUR|!={unique}|oui) class="details_bordures"]><strong>#CLE :</strong> 
            <br/><:topbando:style:>: <select name="style_bordure_#VALEUR" class="change_bordures declenche_oeil" id="style_bordure_#VALEUR">
            <BOUCLE_ep(POUR){tableau #GET{Tep}}>
            	<option value="#VALEUR"[ (#ENV{style_bordure_#_b:VALEUR}|=={#VALEUR}|oui)selected="selected"]>#CLE</option>
            </BOUCLE_ep>
            </select>
        	&nbsp;&nbsp;&nbsp;<:topbando:couleur:>: 
            <input type="text" name="couleur_bordure_#VALEUR" class="change_bordures palette" id="couleur_bordure_#VALEUR" 
            value="[(#ENV{couleur_bordure_#VALEUR,#000000})]" style="width: 80px" class="change_bordures"/>[(#ENV{couleur_bordure_#VALEUR})]
            &nbsp;&nbsp;&nbsp;<:topbando:epaisseur:>: 
            <input type="text" name="epaisseur_bordure_#VALEUR" class="change_bordures" id="epaisseur_bordure_#VALEUR" 
            value="[(#ENV{epaisseur_bordure_#VALEUR,1})]" style="width: 40px"/>px
        	[<img id="style_bordure_#VALEUR_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
          </p>
        </BOUCLE_b>
    </p>
    
    
</fieldset>

[(#REM)------------------------ TITRE SITE ----------------------------------- ]
<fieldset>
  <legend><:topbando:titre_site:></legend>
    <p>
        <strong><:topbando:afficher_titre:> :</strong>
        <label><:topbando:oui:></label>
        <input type="radio" name="afficher_titre" value="oui" [(#ENV{afficher_titre}|=={oui}|oui) checked="checked"] id='titre_oui' /> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="afficher_titre" value="non" [(#ENV{afficher_titre}|=={oui}|non) checked="checked"] id='titre_non' />
        <label><:topbando:non:></label>
    </p>
	  <div class="details_titre">
    <p>
    	<strong><:topbando:emplacement_titre:></strong>:
        <label><:topbando:gauche:></label>
        <input type="radio" name="emplacement_titre" value="left" [(#ENV{emplacement_titre}|=={left}|oui) checked="checked"]/>
        &nbsp;&nbsp;&nbsp;<input type="radio" name="emplacement_titre" value="none" [(#ENV{emplacement_titre}|=={none}|oui) checked="checked"]/>
        <label><:topbando:centre:></label>
        &nbsp;&nbsp;&nbsp;<input type="radio" name="emplacement_titre" value="right" [(#ENV{emplacement_titre}|=={right}|oui) checked="checked"]/>
        <label><:topbando:droite:></label>
    </p>
    <p>
  		<strong><:topbando:titre_bando:>:</strong>
        <br /><input type="radio" name="titre_bando" value="titre_spip" [(#ENV{titre_bando}|=={titre_spip}|oui) checked="checked"] id="titre_spip"/> 
        <label><:topbando:utiliser_titre_spip:></label>
        <br /><input type="radio" name="titre_bando" value="autre" [(#ENV{titre_bando}|=={titre_spip}|non) checked="checked"] id="titre_autre" />
        <label><:topbando:utiliser_autre_titre:></label>: 
			<input type="text" name="complement_nom_site" value="#ENV{complement_nom_site}" size="50" class="fondl" class="declenche_oeil" id="complement_nom_site" />
        [<img id="complement_nom_site_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    </p>
    <p>
    	<strong><:topbando:taille_police:></strong>: <input type="text" name="taille_police" style="width: 40px;" value="[(#ENV{taille_police,40})]" class="declenche_oeil" id="taille_police" />px
        [<img id="taille_police_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    </p>
    <p id="voir_justification_titre">
    	<strong><:topbando:justification_titre:></strong>:
        <label><:topbando:gauche:></label>
        <input type="radio" name="alignement_titre" value="left" [(#ENV{alignement_titre}|=={left}|oui) checked="checked"]/>
        &nbsp;&nbsp;&nbsp;<input type="radio" name="alignement_titre" value="center" [(#ENV{alignement_titre}|=={center}|oui) checked="checked"]/>
        <label><:topbando:centre:></label>
        &nbsp;&nbsp;&nbsp;<input type="radio" name="alignement_titre" value="right" [(#ENV{alignement_titre}|=={right}|oui) checked="checked"]/>
        <label><:topbando:droite:></label>
    </p>
    <p>
    	<strong><:topbando:marge_superieure_titre:></strong>: <input type="text" name="marge_sup_titre" style="width: 40px;" value="[(#ENV{marge_sup_titre,40})]" class="declenche_oeil" id="marge_sup_titre" />px 
        [<img id="marge_sup_titre_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    </p>
    <p>
    	<strong><:topbando:largeur_max_titre:></strong>: <input type="text" name="largeur_titre" style="width: 40px;" value="[(#ENV{largeur_titre,740})]" class="declenche_oeil" id="largeur_titre" />px 
        [<img id="largeur_titre_oeil" src="(#CHEMIN{images/oeil_o.gif})" alt="<:topbando:visualiser:>" class="oeil_voir"/>]
    </p>
[(#PLUGIN{choix_police}|oui)
		<p>
    	<strong><:topbando:utiliser_image_typo:></strong>:
        <label><:topbando:oui:></label>
        <input type="radio" name="utiliser_image_typo" value="oui" [(#ENV{utiliser_image_typo}|=={non}|non) checked="checked"] id="image_typo_oui"/> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="utiliser_image_typo" value="non" [(#ENV{utiliser_image_typo}|=={non}|oui) checked="checked"] id="image_typo_non"/>
        <label><:topbando:non:></label> 
        <br/>(<:topbando:pas_de_previsu_instantanee_des_images_typo:>!)
    </p>
]    
        <div id="bando_titre" style="background: [(#ENV{utiliser_bando}|=={oui}|oui) url([(#LOGO_SITE_SPIP_SURVOL||image_reduire{500,0}|extraire_attribut{src})]) ]
                                     [(#ENV{calage_horizontal_bando})] -[(#GET{top})]px [(#ENV{fond_transparent}|=={oui}|?{'transparent',[(#ENV{couleur_principale,#FFFFFF})]})] no-repeat; 
                                     width: 500px; 
                                     height: #GET{hauteur_recadre}px;
                                     font-size: #GET{taille_police_reduite}px;
                                     text-align: #ENV{alignement_titre};
                                     color: #ENV{couleur_principale_texte};
                                     [(#ENV{toutes_bordures_identiques}|=={oui}|?{
                            			border: [(#ENV{style_bordure_unique})] [(#ENV{couleur_bordure_unique})] [(#ENV{epaisseur_bordure_unique})px];
                                		,
                                		[(#GET{strB})]
                            		 })]">

            [<img src="(#LOGO_SITE_SPIP||image_reduire{0,[(#GET{hauteur_logo_reduite})]}|extraire_attribut{src})" alt="logo_site"
                  style="float: [(#ENV{place_logo,left})];
          		         [margin-[(#ENV{place_logo}|=={right}|?{'left','right'})]: (#ENV{marge_laterale_logo}|mult{[(#GET{fact_reduc})]})px;]
                         [margin-[(#ENV{place_logo})]: (#ENV{marge_laterale_logo_bord}|mult{[(#GET{fact_reduc})]})px;]
                         [(#ENV{redimensionner_logo}|=={oui}|oui) [margin-top: (#ENV{marge_sup_logo}|mult{[(#GET{fact_reduc})]})px;]]
                         [(#ENV{utiliser_logo}|=={non}|oui)display: none;]" 
                  id="img_logo_titre"/>]
          
            [(#PLUGIN{choix_police}|?{ 
            	[(#ENV{utiliser_image_typo}|=={oui}|?{
                    [<strong id="nom_site_spip" style="margin-right: auto;
                                                       margin-left:auto;
                                                       display: block;
                                                       [float: (#ENV{emplacement_titre});]
                                                       [width: (#GET{largeur_titre_reduite})px;]
                                                       [padding-top: (#GET{marge_sup_titre_reduite})px;]
                                                       ">(#MODELE{typo}{texte=[(#GET{titre})],
                                                                        [(#ENV{fond_transparent}|=={oui}|non)[couleur=(#ENV{couleur_principale}),]})]
                                                                        taille=[(#GET{taille_police_reduite})],
                                                                        largeur=[(#GET{largeur_titre_reduite})]})</strong>]
                    ,
                    [<strong id="nom_site_spip" style="margin-right: auto;
                                                       margin-left:auto;
                                                       display: block;
                                                       [float: (#ENV{emplacement_titre});]
                                                       [width: (#GET{largeur_titre_reduite})px;]
                                                       [padding-top: (#GET{marge_sup_titre_reduite})px;]
                                                       ">(#GET{titre})</strong>]
                })]
                ,
                [<strong id="nom_site_spip" style="margin-right: auto;
                                                   margin-left:auto;
                                                   display: block;
                                                   [float: (#ENV{emplacement_titre});]
                                                   [width: (#GET{largeur_titre_reduite})px;]
                                                   [padding-top: (#GET{marge_sup_titre_reduite})px;]
                                                   ">(#GET{titre})</strong>]
            })]
        </div>
        <p>
            <strong><:topbando:previsualisation_largeur_ecran:></strong>:
            <span class="previsu_titre" title="500px">[[(#GET{largeur_bando})] pixels]</span>
            <span class="previsu_titre" title="[(#VAL{800}|mult{[(#GET{fact_reduc})]})]px">[800 pixels]</span>
            <span class="previsu_titre" title="[(#VAL{1024}|mult{[(#GET{fact_reduc})]})]px">[1024 pixels]</span>
            <span class="previsu_titre" title="[(#VAL{1280}|mult{[(#GET{fact_reduc})]})]px">[1280 pixels]</span>
            <span class="previsu_titre" title="[(#VAL{1600}|mult{[(#GET{fact_reduc})]})]px">[1600 pixels]</span>
            <span class="previsu_titre" title="[(#VAL{1920}|mult{[(#GET{fact_reduc})]})]px">[1920 pixels]</span>
            <span class="previsu_titre" title="[(#VAL{2048}|mult{[(#GET{fact_reduc})]})]px">[2048 pixels]</span>
        </p>     

    </div><!-- fin détails -->
    
</fieldset>

[(#REM)------------------------ MENU DES LANGUES ----------------------------- ]
<fieldset>
  <legend><:topbando:menu_langues:></legend>
    <p>
        <strong><:topbando:afficher_menu_langues:> :</strong>
        <label><:topbando:oui:></label>
        <input type="radio" name="afficher_langues" value="oui" [(#ENV{afficher_langues}|=={oui}|oui) checked="checked"] id='afficher_langues_oui' /> 
        &nbsp;&nbsp;&nbsp;<input type="radio" name="afficher_langues" value="non" [(#ENV{afficher_langues}|=={oui}|non) checked="checked"] id='afficher_langues_non' />
        <label><:topbando:non:></label>
    </p>
</fieldset>



[(#REM) ------------------------ BOUTON OK ----------------------------------- ]
<div>
<input style="float:#LANG_RIGHT;" type="submit" name="_cfg_ok" value="<:OK:>" class="fondo" />
<input type="reset" value="<:Reset:>" class="fondo" />
<!--
<input type="submit" name="_cfg_delete" value="<:Supprimer:>" class="fondo" />
-->
</div>

</form>

