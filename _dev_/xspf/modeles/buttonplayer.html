[(#REM)
	Modele pour le XSPF Web Music Player (Flash): jukebox des mp3 en portfolio
	http://musicplayer.sourceforge.net/
	
	Methode classique <template><buttonplayer123></template> ou 123 est l'id article fournissant les documents attaches
	Methode par rubrique (on prend les videos parmis les documents de la rubrique) :
	<template><buttonplayer|rubrique=123></template>
	Methode par secteur (on prend les videos parmis les documents du secteur) :
	<template><buttonplayer|secteur=123></template>
	Methode par document unique (on prend un seul document) :
	<template><buttonplayer|document=123></template>
-- Options
	- autoplay : true|false,false
	- autoload : true|false,true
	- repeat : true|false,false
	- align : left|center|right,center
	
]
[(#ENV{objet}|=={site}|?{' '})
	#SET{objet,site}
]

[(#ENV{donnee}|?{' ',''}) 
  [(#SET{objet_spip,id_donnee})]
  [(#SET{objet_val,[(#ENV{donnee})]})]
]
[(#ENV{rubrique}|?{' ',''}) 
  [(#SET{objet_spip,id_rubrique})]
  [(#SET{objet_val,[(#ENV{rubrique})]})]
]
[(#ENV{secteur}|?{' ',''}) 
  [(#SET{objet_spip,id_secteur})]
  [(#SET{objet_val,[(#ENV{secteur})]})]
]
[(#ENV{document}|?{' ',''}) 
  [(#SET{objet_spip,id_document})]
  [(#SET{objet_val,[(#ENV{document})]})]
]
[(#ENV{mot}|?{' ',''}) 
  [(#SET{objet_spip,id_mot})]
  [(#SET{objet_val,[(#ENV{mot})]})]
]
[(#ENV{breve}|?{' ',''}) 
  [(#SET{objet_spip,id_breve})]
  [(#SET{objet_val,[(#ENV{breve})]})]
]
[(#ENV{article}|?{' ',''}) 
  [(#SET{objet_spip,id_article})]
  [(#SET{objet_val,#ENV{article}})]
]
[(#GET{objet_spip}|?{'',' '}) 
  [(#SET{objet_spip,id_article})]
  [(#SET{objet_val,[(#ENV{id_buttonplayer})]})]
]

[(#SET{wmode,#ENV{wmode,#CONFIG{xspf/wmode}|sinon{transparent}}})]
[(#SET{width,#ENV{width,20}})]
[(#SET{height,#ENV{height,20}})]
[(#SET{repeat,#ENV{repeat,#CONFIG{xspf/butrepeat}|sinon{false}}})]
[(#SET{autoplay,#ENV{autostart,#CONFIG{xspf/butautostart}|sinon{false}}})]
[(#SET{autoload,#ENV{autoload,#CONFIG{xspf/butautoload}|sinon{true}}})]

[(#SET{align,#ENV{align,center}})]
<noscript><p><:xspf:js_necessaire:></p></noscript>
<!-- alternative texte pour ceux qui ont le js desactive -->

<div id="buttonplayer_container_[(#GET{objet_spip})]#ENV{id}" class="xspf_player" style="[(#GET{align}|=={center}|?{margin:auto; text-align:center;,float:[(#GET{align})]})]">
	<p>
		<:xspf:get_player{url=http://get.adobe.com/fr/flashplayer/}:>
	</p>
</div>

<script type="text/javascript">
// <![CDATA[
	var flashvars[(#GET{objet_spip})]#ENV{id} = {};
		flashvars[(#GET{objet_spip})]#ENV{id}.playlist_url = encodeURIComponent("[(#URL_PAGE{xspf}|url_absolue|parametre_url{type,mp3,'&'}|parametre_url{objet,#GET{objet},'&'}|parametre_url{[(#GET{objet_spip})],[(#GET{objet_val})],'&'})]");
		[(#GET{autoplay}|=={true}|oui)flashvars[(#GET{objet_spip})]#ENV{id}.autoplay ="#GET{autoplay}";]
		flashvars[(#GET{objet_spip})]#ENV{id}.repeat_playlist = "#GET{repeat}";
		flashvars[(#GET{objet_spip})]#ENV{id}.autoload = "#GET{autoload}";
	
	var params[(#GET{objet_spip})]#ENV{id} = {};
		params[(#GET{objet_spip})]#ENV{id}.wmode = "#GET{wmode}";
	
	var attributes[(#GET{objet_spip})]#ENV{id} = {};
  		attributes[(#GET{objet_spip})]#ENV{id}.id= "xspf_player_[(#GET{objet_spip})]#ENV{id}";
  		attributes[(#GET{objet_spip})]#ENV{id}.name= "xspf_player_[(#GET{objet_spip})]#ENV{id}";
		
	$(document).ready(function() {
		swfobject.embedSWF("#CHEMIN{swf/musicplayer.swf}", "buttonplayer_container_[(#GET{objet_spip})]#ENV{id}", "#GET{width}", "#GET{height}", "9.0.0","#CHEMIN{lib/swfobject/expressInstall.swf}", flashvars[(#GET{objet_spip})]#ENV{id}, params[(#GET{objet_spip})]#ENV{id}, attributes[(#GET{objet_spip})]#ENV{id});
	});
// ]]>
</script>