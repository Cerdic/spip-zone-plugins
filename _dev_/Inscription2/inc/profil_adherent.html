<div class = "affichage">
<?php 
	$aux = "";
	$var_user = array();
	$auteur = array();
	//liste d'elements a afficher
	foreach(lire_config('inscription2') as $cle => $val) {
		//Si la $cle est marqué pour être affichée mais pas modifiable
		if($val!='' and ereg("^.+_fiche$", $cle)){ 
			$aux = str_replace("_fiche", "", $cle);
			if($aux == 'username' or $aux == 'nom' or $aux == 'email')
				if($aux == 'username')
					$auteur['a.login'] = "0";
				else
					$auteur['a.'.$aux] = "0";
			else
				$auteur['b.'.$aux] = "0";
		}elseif($val!='' and ereg("^.+_fiche_mod$", $cle)){ //champ modifiable
			$aux = str_replace("_fiche_mod", "", $cle);
			if($aux == 'username' or $aux == 'nom'or $aux == 'email'){
				if($aux == 'username')
					$auteur['a.login'] = "1";
				else
					$auteur['a.'.$aux] = "1";
			}else
				$auteur['b.'.$aux] = "1";
		}
	}
	if(is_array($auteur)){
		$aux = join(', ',array_keys($auteur));
		$aux = spip_query("SELECT $aux FROM spip_auteurs a LEFT JOIN spip_auteurs_elargis b ON a.id_auteur=b.id_auteur WHERE a.id_auteur = ".$GLOBALS['auteur_session']['id_auteur'] );
		$aux = spip_fetch_array($aux);
	}
	if(!is_array($aux)){
		echo _T('inscription2:erreur_user_not_found');
		return;
	}
	$id = $GLOBALS['auteur_session']['id_auteur'];
	if(is_array($aux)){
		foreach($aux as $cle => $val){
			echo '<div><strong>'._T('inscription2:'.$cle).' : </strong>';
			if($cle == 'login' or $cle == 'nom' or $cle == 'email'){
				if($auteur['a.'.$cle]=="1")
					echo '<span class="crayon spip_auteurs-'.$cle.'-'.$id.' ">'.$val.'</span></div>';  
				else 
					echo '<span>'.$val.'</span></div>';  
			}else{
				if($auteur['b.'.$cle]=="1")
					echo '<span class="crayon spip_auteurs_elargis-'.$cle.'-'.$id.' ">'.$val.'</span></div>';  
				else 
					echo '<span>'.$val.'</span></div>';  
			}
		}
	}
?>
</div>