	<script type="text/javascript">
	//<![CDATA[
	URLbase = "#URL_SITE_SPIP/";
	var map;
	var markerManager;
	<BOUCLE_centrado(GIS){id_article?}{id_rubrique ?}{0,1}>
	#SET{latitude,#ENV{latit,#LAT}}
	#SET{lonxitude,#ENV{lonxit,#LONX}}
	</BOUCLE_centrado>
	#SET{latitude,#ENV{latit,42.94}}
	#SET{lonxitude,#ENV{lonxit,-8.228}}
	<//B_centrado>
	$(document).ready(
		function load() {
    		if (GBrowserIsCompatible()) {
    			// facelo mapa
    			map = new GMap2(document.getElementById("map"));
    			map.addControl(new GLargeMapControl());
    			map.addControl(new GMapTypeControl());
    			map.setCenter(new GLatLng(#GET{latitude}, #GET{lonxitude}), #ENV{zoom,7}, G_SATELLITE_MAP);
    			map.enableDoubleClickZoom();
    			map.enableContinuousZoom();
    			markerManager = new GMarkerManager(map);
  				//leemo-lo documento dos marcadores
       			$.get('[(#URL_PAGE{rss-gis})]', {[id_rubrique:(#ID_RUBRIQUE)][, id_mot:(#ID_MOT)][, id_auteur:(#ID_AUTEUR)][, recherche:(#RECHERCHE)][, id_article:(#ID_ARTICLE)]}, function(xml){
    				//xml almacena en un objeto xml los datos recogidos del documento leido
    				$("item", xml).each(function(item){
    					/*primero buscamos dentro del objeto xml almacenado en xml todos los nodos "item", el contenido de cada nodo "item" del documento xml
    					se almacena en la variable xmlItem (*en la variable item se almacena la posicion del "item" actual en el array de items y asi podemos
    					recorrerlos con facilidad)*/
    					var xmlItem = xml.documentElement.getElementsByTagName("item")[item];
   						agregarMarcador(xmlItem, 0);
					});
					markerManager.refresh();
   				});
   			}
		}
	);
	//]]>
	</script>