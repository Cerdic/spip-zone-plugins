<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
 * Plugin de coloration syntaxique par Frank SAURET.
 * En utilisant largement le travail de Richard Tuin 
-->
<html>
	<head>
		<title>Geshi</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta content="noindex, nofollow" name="robots">
		
		<script language="javascript">
       
        var FenInitiale = window.parent.InnerDialogLoaded();
        var FCKLang = FenInitiale.FCKLang ;
        var FCK = FenInitiale.FCK;
        
        //Chargement de la fenêtre
        window.onload = function()
          {
          	window.parent.SetOkButton( true ) ;
          	FenInitiale.FCKLanguageManager.TranslatePage( document ) ;
          }       
               
        //Appuie sur ok
        function Ok() 
        {
            // Affichage patientez
            document.getElementById('wait').style.display = 'block';
            //Récup du chemin pour gecko
            var myloc = window.location.href;
            var locarray = myloc.split("/");
            delete locarray[(locarray.length-1)];
            var arraytext = locarray.join("/");
            xmlhttpPost(arraytext+'/geshi/output.php');
        }
        
        //retour du résultat        
        function updatepage(str) 
        {
        //str = str.replace(/a/g,'zzzaaazzz'); ça ça marche
           // str = str.replace(/a/g,'zzzaaazzz');
var reg = new RegExp("\{", "i");
res = str.replace(reg, "repzjtrrz  az arzo ");
            FCK.InsertHtml(str);
        }
        
        function xmlhttpPost(strURL) 
        {
            var xmlHttpReq = false;
            var self = this;
            // Mozilla/Safari
            if (window.XMLHttpRequest) 
              {
                self.xmlHttpReq = new XMLHttpRequest();
              }
            // IE
            else if (window.ActiveXObject) 
              {
                self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
              }
            self.xmlHttpReq.open('POST', strURL, true);
            self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            self.xmlHttpReq.onreadystatechange = function() 
              {
                if (self.xmlHttpReq.readyState == 4) 
                  {
                    updatepage(self.xmlHttpReq.responseText);
                    window.parent.close();
                  }
              }
            self.xmlHttpReq.send(getquerystring());
        }
        
        function getquerystring() 
        {
            var form    = document.forms['f1'];
            var source  = form.codesource.value;
            var lang    = form.langage.value;
            var showlines   = form.numligne.checked ? form.numligne.value : '';
            var largtab   = form.tabulation.value ? form.tabulation.value : '';
            var premnum   = form.premnum.value ? form.premnum.value : '';            
            
            qstr = 'source=' + escape(source) + '&lang=' + lang + '&lines=' + showlines + '&largtab=' + largtab+ '&premnum=' + premnum;  // NOTE: no '?' before querystring
            return qstr;
        }
          //-->
        </script>
	</head>
  <body scroll="no" style="OVERFLOW: hidden">
    <form name="f1" method=post>	
    	<table border="0" width="100%" cellspacing="1">
    		<tr>
    			<td colspan="2">	
      		<span fckLang="ColorationInserer">code source</span><p>
      	  <TEXTAREA id="codesource" NAME="codesource" COLS="110" ROWS="15"></TEXTAREA></td>
    		</tr>
    		<tr>
    			<td width="51%">
                <span fckLang="ColorationLangage">Langage</span>
                <select name="langage" id="langage" style="width: 100px;">
                  <option value="actionscript">actionscript</option>
                  <option value="ada">ada</option>
                  <option value="apache">apache</option>
                  <option value="applescript">applescript</option>
                  
                  <option value="asm">asm</option>
                  <option value="asp">asp</option>
                  <option value="autoit">autoit</option>
                  <option value="bash">bash</option>
                  <option value="blitzbasic">blitzbasic</option>
                  <option value="bnf">bnf</option>
                  <option value="c" selected>c</option>
                  <option value="c_mac">c_mac</option>
                  <option value="caddcl">caddcl</option>
                  
                  <option value="cadlisp">cadlisp</option>
                  <option value="cfdg">cfdg</option>
                  <option value="cfm">cfm</option>
                  <option value="cpp">cpp</option>
                  <option value="cpp-qt">cpp-qt</option>
                  <option value="csharp">csharp</option>
                  <option value="css">css</option>
                  <option value="d">d</option>
                  <option value="delphi">delphi</option>
                  
                  <option value="diff">diff</option>
                  <option value="div">div</option>
                  <option value="dos">dos</option>
                  <option value="eiffel">eiffel</option>
                  <option value="fortran">fortran</option>
                  <option value="freebasic">freebasic</option>
                  <option value="gml">gml</option>
                  <option value="groovy">groovy</option>
                  <option value="html4strict">html4strict</option>
                  
                  <option value="idl">idl</option>
                  <option value="ini">ini</option>
                  <option value="inno">inno</option>
                  <option value="io">io</option>
                  <option value="java">java</option>
                  <option value="java5">java5</option>
                  <option value="javascript">javascript</option>
                  <option value="latex">latex</option>
                  <option value="lisp">lisp</option>
                  
                  <option value="lua">lua</option>
                  <option value="matlab">matlab</option>
                  <option value="mirc">mirc</option>
                  <option value="mpasm">mpasm</option>
                  <option value="mysql">mysql</option>
                  <option value="nsis">nsis</option>
                  <option value="objc">objc</option>
                  <option value="ocaml">ocaml</option>
                  <option value="ocaml-brief">ocaml-brief</option>
                  
                  <option value="oobas">oobas</option>
                  <option value="oracle8">oracle8</option>
                  <option value="pascal">pascal</option>
                  <option value="perl">perl</option>
                  <option value="php" >php</option>
                  <option value="php-brief">php-brief</option>
                  <option value="plsql">plsql</option>
                  <option value="python">python</option>
                  <option value="qbasic">qbasic</option>
                  
                  <option value="rails">rails</option>
                  <option value="reg">reg</option>
                  <option value="robots">robots</option>
                  <option value="ruby">ruby</option>
                  <option value="sas">sas</option>
                  <option value="scheme">scheme</option>
                  <option value="sdlbasic">sdlbasic</option>
                  <option value="smalltalk">smalltalk</option>
                  <option value="smarty">smarty</option>
                  
                  <option value="sql">sql</option>
                  <option value="tcl">tcl</option>
                  <option value="text">text</option>
                  <option value="thinbasic">thinbasic</option>
                  <option value="tsql">tsql</option>
                  <option value="vb">vb</option>
                  <option value="vbnet">vbnet</option>
                  <option value="vhdl">vhdl</option>
                  <option value="visualfoxpro">visualfoxpro</option>
                  
                  <option value="winbatch">winbatch</option>
                  <option value="xml">xml</option>
                  <option value="xpp">xpp</option>
                  <option value="z80">z80</option>
                </select></td>
    			      <td rowspan="4" width="48%">
                    <div id="wait" style="float: right; width: 200px; display: none;">
              		  	<span fckLang="ColorationPatience">Patience...</span>
              		</div>
              	</td>
    		</tr>
    		<tr>
    			<td width="51%">
                <span fckLang="ColorationTabulation">Taille de la tabulation </span>
                <input type="text" name="tabulation" size="1" id="tabulation" value="2">
    			</td>
    		</tr>
    		<tr>
    			<td width="51%">
                <span fckLang="ColorationPremiernumero">premier numéro</span>
                <input type="text" name="premnum" size="1" id="premnum" value="1">
           </td>     
    		</tr>
    		<tr>
    			<td width="51%">
                <input type="checkbox" name="numligne" id="numligne" value="1" />
                <span fckLang="ColorationNumerodeLigne">Numéro de ligne</span>
          </td>
    		</tr>		
    	</table>
    </form>   
	</body>
</html>