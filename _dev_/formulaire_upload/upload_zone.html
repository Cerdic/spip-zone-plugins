#CACHE{86400}
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html dir="#LANG_DIR" lang="#LANG">
<head>
<title>Upload Zone - [(#NOM_SITE_SPIP|textebrut)]</title>
[<meta name="description" content="(#INTRODUCTION|couper{150}|textebrut)" />]
<INCLURE{fond=inc-head}>

<style type="text/css"><!--
	#zone-documents td { vertical-align: top; font-size:small;}
	#zone-documents td { border-top: dotted gray 1px;  padding-top: 5px; padding-bottom:8px; }

	#zone-documents table { }
	.fiche-document { width: 70%; }
	.logo-document { width: 130px; text-align: center; }
// --></style>

[<script type="text/javascript" src="(#CHEMIN{javascript/jquery.MultiFile.js})"></script>
]
</head>

<body class="page_upload">

<div id="page">

	[(#REM) Entete de la page + titre du site ]
	<INCLURE{fond=inc-entete}>

	<div id="hierarchie"><a href="#URL_SITE_SPIP/"><:accueil_site:></a></div>

	<div id="conteneur">

		[(#REM) Contenu principal : contenu de l'article ]
		<div id="contenu">
			<div class="cartouche">
			<h1 class="titre">Upload zone</h1>
			</div>

			<div id="tous_docs">
			<INCLURE{fond=modeles/upload_documents_auteurs}>
			</div>

		</div>
	</div>


<script type="text/javascript"><!--

var pagination_zone = function() {
	$('#zone-documents')
	.prev('.pagination')
	.find('a')
	.click(function(){
		var r = $(this).attr('href').match(/[?&;]debut_tous=([0-9]+)/);
		r = r ? r[1] : 0;
		$.get(
			'#URL_PAGE{mini_formulaire_upload}&liste=1&debut_tous='+r,
			function(c) {
				$('#tous_docs')
				.html(
					$('<iframe>').html(c).find('#tous_docs').html()
				);
				pagination_zone();
			}
		);
		return false;
	});
};
pagination_zone();

// --></script>





	<div id="navigation">
		#FORMULAIRE_UPLOAD
	</div>


<script type='text/javascript'><!--
if (window.jQuery && jQuery.fn.ajaxForm) {
function upload_attach (re) {
	jQuery('#formulaire_upload>form')

	// changer l'action : pas indispensable mais permet d'eviter la lenteur du
	// recalcul total de la page, qui provoque en plus un rechargement
	// des javascripts etc. dans l'iframe.
	.attr('action', '#URL_PAGE{mini_formulaire_upload}')

	.ajaxForm({
		'beforeSubmit': function(formData, jqForm, options){
			$('#formulaire_upload')
			.css('opacity',0.2);
			return true;
		},
		'success': function(e){
			var h;
			if (h = $('<iframe><\/iframe>').html(e).find('#formulaire_upload').html()) {
				$('#formulaire_upload')
				.html(h)
				.animate({'opacity':1.0}, 'slow');
				upload_attach(true);
			}
			else
				alert('bug !');
		}
	});

	// si on reattache les evenements, remettre les crayons
	if (re && window.cQuery)
		cQuery("#formulaire_upload .crayon:lt(1000)").initcrayon();

	// si multifile est la, on l'utilise (trop bien)
	if (jQuery.fn.MultiFile)
	$('#formulaire_upload>form input[@type=file]').MultiFile({
		max: 5,
		STRING: {'remove': 'x', 'selected': '$file'}
	});

	// et la pagination
	$('#formulaire_upload .pagination a')
	.click(function(){
		var r = $(this).attr('href').match(/[?&;]debut_docs=([0-9]+)/);
		r = r ? r[1] : 0;
		$.get(
			'#URL_PAGE{mini_formulaire_upload}&debut_docs='+r,
			function(c) {
				$('#formulaire_upload')
				.html(
					$('<iframe>').html(c).find('#formulaire_upload').html()
				);
				upload_attach(true);
			}
		);
		return false;
	});

	console.log($('#formulaire_upload .pagination a'));

};
upload_attach(false);
}
// --></script>




<hr style="clear:both;" />

<a href="http://www.spip-contrib.net/Formulaire-Upload">Documentation &amp; bugs</a>

</div>
</body>
</html>