<BOUCLE_content(AUTEURS){id_auteur}{tous}>
[(#REM) Fil d'Ariane ]
<p id="hierarchie"><a href="#URL_SITE_SPIP/"><:accueil_site:></a><span class="sep"> &gt; </span><a href="#URL_PAGE{auteurs}" class="spip_in"><:tradlang:info_contributeurs:></a>[<span class="sep"> &gt; </span><strong class="on">(#NOM|couper{80})</strong>]</p>

<div class="content-principal">
	<div class="vcard">[(#REM) microformat vcard]
		<div class="cartouche">
			[(#LOGO_AUTEUR|image_reduire{200,200})]
			<h1 class="h1 #EDIT{qui} fn">#NOM</h1>
		</div>
		
		[<div class="#EDIT{bio} texte bio">(#BIO)</div>]
		<B_langues_preferees>
		<p class="langues_preferees">
			<:tradlang:info_langues_preferees:>
		<BOUCLE_langues_preferees(POUR){tableau #LANGUES_PREFEREES|?{#LANGUES_PREFEREES,#ARRAY|serialize}|unserialize}{', '}>
		<abbr title="#VALEUR">[(#VALEUR|traduire_nom_langue)]</abbr>
		</BOUCLE_langues_preferees>
		</p>
		</B_langues_preferees>
		[<p class="#EDIT{hyperlien} hyperlien"><:voir_en_ligne:> : <a href="(#URL_SITE)" class="url spip_out">[(#NOM_SITE|sinon{[(#URL_SITE|couper{80})]})]</a></p>]
	</div>[(#REM) / vcard]
	[(#ENV{vue}|in_array{#ARRAY{0,profil}}|oui)
		<INCLURE{fond=inclure/auteur_profil,env}>
	]
	<BOUCLE_si_pas_profil(CONDITION){si #ENV{vue}|in_array{#ARRAY{0,profil}}|non}>
		<div id="infos_auteur_tabs">
			<ul class="liste-items">
				[(#PLUGIN{mesfavoris}|oui)<li class="item"><a href="#favoris">[(#ID_AUTEUR|=={#SESSION{id_auteur}}|?{<:tradlang:favoris_vos_modules:>,<:tradlang:favoris_ses_modules:>})]</a></li>]
				<li class="item"><a href="#revisions">[(#SESSION{id_auteur}|=={#ID_AUTEUR}|?{<:tradlang:titre_revisions_vos:>,<:tradlang:titre_revisions_ses:>})]</a></li>
				<li class="item"><a href="#stats">[(#SESSION{id_auteur}|=={#ID_AUTEUR}|?{<:tradlang:titre_stats_vos:>,<:tradlang:titre_stats_ses:>})]</a></li>
			</ul>
			[(#PLUGIN{mesfavoris}|oui)
				[(#SET{titre,[(#ID_AUTEUR|=={#SESSION{id_auteur}}|?{<:tradlang:favoris_vos_modules:>,<:tradlang:favoris_ses_modules:>})]})]
				[(#SET{bouton_ajout,[(#ID_AUTEUR|=={#SESSION{id_auteur}}|?{non,oui})]})]
				<div id="favoris">
				[(#INCLURE{fond=inclure/mesfavoris,id_auteur=#ID_AUTEUR,titre=#GET{titre},bouton_ajout=#GET{bouton_ajout},sinon=<:tradlang:info_auteur_sans_favori:>,ajax})]
				</div>
			]
			[(#CONFIG{objets_versions}|unserialize|is_array|?{#SET{objets_versions,#CONFIG{objets_versions}|unserialize},#SET{objets_versions,#ARRAY}})]
			[(#VAL{spip_tradlangs}|in_array{#GET{objets_versions}}|oui)[(#SET{url_modif,#URL_PAGE{tradlang_revision}})]
			[<div id="revisions">
				<h2>[(#SESSION{id_auteur}|=={#ID_AUTEUR}|?{<:tradlang:titre_revisions_vos:>,<:tradlang:titre_revisions_ses:>})]</h2>
				(#INCLURE{fond=prive/objets/liste/versions,objet=tradlang,url_modif=#GET{url_modif},id_auteur,ajax,sinon=<:revisions:info_aucune_revision:>}|trim)
			</div>]]
			<div id="stats">
				<INCLURE{fond=inclure/stats-trads-jours,options=#ARRAY{id_auteur,#ID_AUTEUR},ajax,env} />
				<INCLURE{fond=inclure/stats-trads-mois,options=#ARRAY{id_auteur,#ID_AUTEUR},ajax,env} />
				
				<INCLURE{fond=prive/stats/visites} />
				
				<script type="text/javascript">
				function trace_trads_table(table, classes, options) {
					$table = $(table);
					if ($table.is(':hidden')) {
						return true; // pas a faire ou deja fait.
					}
				
					// copier le titre des tableaux
					titre = $table.find("caption").text();
					$table
						.before("<h2>" + titre + "</h2>")
						.wrap("<div class='" + classes + "'></div>");
				
					// mettre les visites avec un fond colore pour le graphique
					$table.find("thead th:eq(1)").data({fill: true, serie: 'bar', color: '#FFD845'});
					$table.find("thead th:eq(2)").data({serie: 'line', color: '#7FC4FF'});
				
					params = {
						legendeExterne:true,
						legendeActions:true,
						width:'100%', // 795px, 600px (sans le tableau de resume) ...
						height:'250px',
						modeDate:true,
						zoom:true,
						parse:{
							axeOnTitle:true,
							defaultSerie:{
								bars:{show:true},
								lines:{show:true},
								points:{show:false}
							}
						},
						flot:{
							xaxis:{
								labelWidth:45,
								monthNames: [
									'[(#VAL{2000-01-01}|nom_mois)]',
									'[(#VAL{2000-02-01}|nom_mois)]',
									'[(#VAL{2000-03-01}|nom_mois)]',
									'[(#VAL{2000-04-01}|nom_mois)]',
									'[(#VAL{2000-05-01}|nom_mois)]',
									'[(#VAL{2000-06-01}|nom_mois)]',
									'[(#VAL{2000-07-01}|nom_mois)]',
									'[(#VAL{2000-08-01}|nom_mois)]',
									'[(#VAL{2000-09-01}|nom_mois)]',
									'[(#VAL{2000-10-01}|nom_mois)]',
									'[(#VAL{2000-11-01}|nom_mois)]',
									'[(#VAL{2000-12-01}|nom_mois)]'
								]
							}
						},
						infobulle:{show:true}
					}
				
					$table.tFlot($.extend(true, {}, params, options));	
				}
				
				function trace_trads(){
					trace_trads_table(
						"#trads_quotidiennes",
						"statistiques_trads_quotidiennes statistiques_trads",
						{
							grille:{weekend:true},
							flot:{
								xaxis:{
									minTickSize: [1, "day"]
								},
								bars:{barWidth:24 * 60 * 60 * 1000}
							}
						});
						
					trace_trads_table(
						"#trads_mensuelles",
						"statistiques_trads_mensuelles statistiques_trads", {
							grille:{years:true},
							flot:{
								xaxis:{
									timeformat:"%b %y",
									minTickSize: [1, "month"]
								},
								bars:{barWidth:30 * 24 * 60 * 60 * 1000 /* nb de jours... approximatif */}
							}
					});
					
				}
				(function($){
					$(document).ready(function(){
						trace_trads();
						onAjaxLoad(trace_trads);
					});
				})(jQuery);
				</script>
			</div>
		</div>
	</BOUCLE_si_pas_profil>
</div>
[(#ENV{vue}|in_array{#ARRAY{0,profil}}|non|et{#SESSION{id_auteur}|!={#ENV{id_auteur}}|oui})
#FORMULAIRE_ECRIRE_AUTEUR
]
</BOUCLE_content>