[(#ENV{lang_cible}|non)
	[(#SESSION{langues_preferees}|unserialize|is_array|oui)
		#SET{lang_cible,#SESSION{langues_preferees}|unserialize|table_valeur{0}}
		[(#GET{lang_cible}|=={#LANG_MERE}|oui)
			#SET{lang_cible,#SESSION{langues_preferees}|unserialize|table_valeur{1}}
		]
		#SET{lang_cible_forcee,oui}
	]
]
[(#ENV{lang_cible}|oui)
	#SET{lang_cible,#ENV{lang_cible}}
]
<BOUCLE_lang_orig(TRADLANG_MODULES){si #AUTORISER{voir,tradlang}|oui}{id_tradlang_module ?}{module ?}>
[(#SET{lang_orig,[(#ENV{lang_orig,#LANG_MERE})]})]
</BOUCLE_lang_orig>
</B_lang_orig>
[(#SET{lang_orig,[(#ENV{lang_orig})]})]
<//B_lang_orig>
<div class="contenu-principal contenu-[(#ENV{vue})]">
[(#GET{lang_cible_forcee}|=={oui}|oui)
	#BOITE_OUVRIR{'',notice}
	<p><:tradlang:message_lang_cible_selectionnee_auto_preferees{lang=#GET{lang_cible}}:></p>
[(#BOITE_FERMER)]]
<INCLURE{fond=inclure/tradlang_entete,lang_cible=#GET{lang_cible},env}>
[<div class="tradlang_choisir_module">
	<div class="ajax">
		(#FORMULAIRE_TRADLANG_CHOISIR_MODULE{#ENV{id_tradlang_module},#GET{lang_orig},#GET{lang_cible},#ENV{lang_crea}})
	</div>
</div>]
<BOUCLE_module(TRADLANG_MODULES){si #AUTORISER{voir,tradlang}|oui}{id_tradlang_module ?}{module ?}>
[(#GET{lang_cible}|et{#ENV{module,#ENV{id_tradlang_module}}}|et{#GET{lang_cible}|!={#GET{lang_orig}}}|oui)
	<div class="cartouche">
		[(#SET{lang_orig_long,[(#GET{lang_orig}|traduire_nom_langue)]})]
		#SET{lang_cible_long,#GET{lang_cible}|traduire_nom_langue}
		<h1><:tradlang:titre_page_tradlang_module{id=#ID_TRADLANG_MODULE,module=#NOM_MOD}:></h1>
		#FORMULAIRE_FAVORI
	</div>
	
	<h2 class="h2"><:tradlang:titre_traduction_module_de_vers{module=#NOM_MOD,lang_orig=#GET{lang_orig},lang_orig_long=#GET{lang_orig_long},lang_cible=#GET{lang_cible},lang_cible_long=#GET{lang_cible_long}}:></h2>
	
	[(#ENV{vue}|=={upload}|oui)
		<p><a href="[(#SELF|parametre_url{vue,''})]" class="ajax btn"><:tradlang:lien_retour_module{module=#NOM_MOD}:></a></p>
		<INCLURE{fond=noisettes/vues/tradlang_upload_module,lang_orig=#GET{lang_orig},lang_cible=#GET{lang_cible},lang_cible_forcee=#GET{lang_cible_forcee},env,ajax}>
	]
	[(#ENV{vue}|=={upload}|non)
		<INCLURE{fond=noisettes/listes/tradlang_liste_tous,lang_orig=#GET{lang_orig},lang_cible=#GET{lang_cible},lang_cible_forcee=#GET{lang_cible_forcee},env,ajax}>
	]
]
[(#GET{lang_cible}|et{#ENV{module,#ENV{id_tradlang_module}}}|non)
<div class="error">
	[(#ENV{module}|ou{#ENV{id_tradlang_module}}|non)
	<:tradlang:erreur_choisir_module:>]
	[(#GET{lang_cible}|non)
	<:tradlang:erreur_choisir_lang_cible:>]
</div>
]
[(#GET{lang_cible}|=={#ENV{lang_orig}}|oui)
	#BOITE_OUVRIR{'',error}
		<:tradlang:erreur_langues_differentes:>
	#BOITE_FERMER
]
</BOUCLE_module>
</B_module>
[(#AUTORISER{voir,tradlang}|oui)
[(#GET{lang_cible}|et{#ENV{module,#ENV{id_tradlang_module}}}|non)
	[(#ENV{module}|non)
	#BOITE_OUVRIR{'',error}
		<:tradlang:erreur_choisir_module:>
	#BOITE_FERMER]
	[(#GET{lang_cible}|non)
	#BOITE_OUVRIR{'',error}
		<:tradlang:erreur_choisir_lang_cible:>
	#BOITE_FERMER]
]]
[(#AUTORISER{voir,tradlang}|non)
	[(#SESSION{id_auteur}|non)[(#LOGIN_PUBLIC)]]
]
<//B_module>
</div>
#FILTRE{trim}
