#SET{langues,#ARRAY}
<BOUCLE_langues_sort(TRADLANG){fusion lang}>
<BOUCLE_strings_ok(TRADLANG){lang=#LANG}{statut = 'OK'}> </BOUCLE_strings_ok>
#SET{langues,#GET{langues}|array_merge{#ARRAY{#LANG,#COMPTEUR_BOUCLE}}}
</B_strings_ok>
#SET{langues,#GET{langues}|array_merge{#ARRAY{#LANG,#COMPTEUR_BOUCLE}}}
<//B_strings_ok>
</BOUCLE_langues_sort>
#SET{langues,#GET{langues}|langues_sort}
<B_langues_totales>
<table class="bilan spip liste">
	<thead>
		<tr class="row_first">
			<th></th>
			<BOUCLE_langues_totales(POUR){tableau #GET{langues}}>
			<th class="lang #CLE" title="[(#CLE|traduire_nom_langue)]">
				<abbr title="[(#CLE|traduire_nom_langue)]">[(#CLE)]</abbr>
			</th>
			</BOUCLE_langues_totales>
		</tr>
	</thead>
	<B_modules_lang>
	<tbody>
	<BOUCLE_modules_lang(TRADLANG_MODULES){par module,nom_mod,id_tradlang_module}>
	<tr class="module #NOM_MOD[ (#COMPTEUR_BOUCLE|alterner{row_odd,row_even})]" title="[(#NOM_MOD|attribut_html)]">
		<td>[(#NOM_MOD)]</td>
		#SET{full,''}
		#SET{langue_mere,#LANG_MERE}
		<BOUCLE_compte_langue_mere(TRADLANG){module}{lang=#LANG_MERE}> </BOUCLE_compte_langue_mere>
		#SET{full,#GRAND_TOTAL}
		</B_compte_langue_mere>
		<BOUCLE_langue_module(POUR){tableau #GET{langues}}>
			<BOUCLE_compte_tradlang(TRADLANG){module}{lang=#CLE}{statut=OK}> </BOUCLE_compte_tradlang>
			#SET{class,'non_traduit'}
			[(#TOTAL_BOUCLE|=={#GET{full}}|oui)#SET{class,traduit_full}]
			[(#TOTAL_BOUCLE|=={#GET{full}}|non)
			[(#TOTAL_BOUCLE|>={#GET{full}|div{100}|mult{60}}|oui)#SET{class,traduit}]]
			[(#_langue_module:CLE|!={#GET{langue_mere}}|oui)<td class="#GET{class}"><a href="[(#URL_PAGE{traduction}|parametre_url{etape,traduction}|parametre_url{module,#MODULE}|parametre_url{lang_cible,#CLE})]">#TOTAL_BOUCLE</a></td>]
			[(#_langue_module:CLE|=={#GET{langue_mere}}|oui)<td class="[(#GET{class})] lang_mere">#TOTAL_BOUCLE</td>]
			</B_compte_tradlang>
			<td class="non_traduit"><a href="[(#URL_PAGE{traduction}|parametre_url{etape,traduction}|parametre_url{module,#MODULE}|parametre_url{lang_cible,#CLE})]"> - </a></td>
			<//B_compte_tradlang>
		</BOUCLE_langue_module>
	</tr>
	</BOUCLE_modules_lang>
	</tbody>
	</B_modules_lang>
</table>
</B_langues_totales>
bof
<//B_langues_totales>
<script type='text/javascript'><!--
var modules = [];
$('table.bilan th').each(function(i){
	modules[i] = $(this).attr('title');
});
$('table.bilan tr').each(function() {
	var lang = $('td',this).parent('tr').attr('title');
	if (lang && (lang = lang.replace(/:.*/,'')) && lang != 'fr'){
		console.log(lang);
		$('td',this).each(function(i){
			$(this).find('a').click(function(){
				if (confirm('<:tradlang:message_confirm_redirection:> : '+modules[i]+' ['+lang+']')) {
					var url = '[(#URL_PAGE{traduction}|parametre_url{etape,traduction})]&module=' +modules[i] +'&lang_cible=' +lang;
					if (window.parent)
						window.parent.location = url;
					else
						window.location = url;
				}else{
					return false;
				}
			});
		});
	}
});
// --></script> 