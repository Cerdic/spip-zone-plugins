<BOUCLE_module(TRADLANG_MODULES){module?}{id_tradlang_module?}>
#SET{str_mere,#ARRAY}
#SET{str_cible,#ARRAY}
#SET{str_statut,#ARRAY}
<BOUCLE_revise(TRADLANG){module}{lang=#LANG_MERE}>[(#SET{str_mere,[(#GET{str_mere}|push{#ID})]})] </BOUCLE_revise>
#SET{total_mere,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_mere{nb=#GET{total_mere}}:></p>
</B_revise>
<div class="formulaire_spip editer">
	<span class="erreur_message"><:tradlang:erreur_aucun_item_langue_mere{lang_mere=#LANG_MERE}:></span>
</div>
<//B_revise>
[(#SET{defaut_tri,#ARRAY{
	statut,#ENV{statut_sens,1},
	id,1,
	str,1,
	ts,-1
}})]

<BOUCLE_total_item(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}>[(#SET{str_cible,#GET{str_cible}|push{#ID}})] </BOUCLE_total_item>
#SET{total_cible,#GRAND_TOTAL}</B_total_item>#SET{total_cible,0}<//B_total_item>
<BOUCLE_total_item_ok(TRADLANG){module}{statut=OK}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}> </BOUCLE_total_item_ok>
#SET{total_ok,#GRAND_TOTAL}
</B_total_item_ok>#SET{total_ok,0}<//B_total_item_ok>
<BOUCLE_total_item_new(TRADLANG){module}{statut=NEW}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}> </BOUCLE_total_item_new>
#SET{total_new,#GRAND_TOTAL}
</B_total_item_new>#SET{total_new,0}<//B_total_item_new>
<BOUCLE_total_item_modif(TRADLANG){module}{statut=MODIF}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}> </BOUCLE_total_item_modif>
#SET{total_modif,#GRAND_TOTAL}
</B_total_item_modif>#SET{total_modif,0}<//B_total_item_modif>
#SET{percent_ok,#GET{total_ok}|div{#GET{total_mere}}|mult{100}|floor}
#SET{percent_modif,#GET{total_modif}|div{#GET{total_mere}}|mult{100}|floor}
#SET{percent_new,#VAL{100}|moins{#GET{percent_ok}}|moins{#GET{percent_modif}}}
<div class="info_module">
	<:tradlang:info_module_traduit_pc{pc=#GET{percent_ok}}:>
	<ul>
		[(#GET{total_new}|>{0}|oui)
		<li>
			<:tradlang:info_module_traduction{total=#GET{total_new},percent=#GET{percent_new},statut=NEW}:>
		</li>]
		[(#GET{total_modif}|>{0}|oui)
		<li>
			<:tradlang:info_module_traduction{total=#GET{total_modif},percent=#GET{percent_modif},statut=MODIF}:>
		</li>]
		<li>
			<div class="graph" title="<:tradlang:info_module_traduit_pc{pc=#GET{percent_ok}}:>">
				<div class="ok"[ style="width: (#GET{percent_ok})px"]> </div>
				<div class="modif" style="left: #GET{percent_ok}px; width: #GET{percent_modif}px"></div>
				<div class="new" style="left: [(#GET{percent_ok}|plus{#GET{percent_modif}})]px; width: #GET{percent_new}px"> </div>
			</div>
		</li>
	</ul>
</div>

[(#REM)	
[(#GET{total_mere}|>{0}|oui)<p><:tradlang:nb_items_langue_cible{nb=#GET{total_cible},langue=#ENV{lang_cible}}:></p>]]

<B_statut>
[(#GRAND_TOTAL|>{1}|oui)
<p class="filtrer"><:tradlang:info_filtrer_status:>
[(#ENV{statut}|oui)<a href="[(#SELF|parametre_url{statut,''})]" class="ajax"><:tradlang:lien_aucun_status:></a><span class="sep"> | </span>]
[(#ENV{statut}|non)<:tradlang:lien_aucun_status:><span class="sep"> | </span>]]
<BOUCLE_statut(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{fusion statut}{'<span class="sep"> | </span>'}>
[(#GRAND_TOTAL|>{1}|oui)
[(#STATUT|!={#ENV{statut}}|oui)<a href="[(#URL_TRADLANG_MODULE|parametre_url{statut,#STATUT}|parametre_url{lang_cible,#ENV{lang_cible}}|parametre_url{lang_orig,#ENV{lang_orig}})]" class="ajax">#STATUT</a>]
[(#STATUT|!={#ENV{statut}}|non)#STATUT]]
#SET{statut,#STATUT}
</BOUCLE_statut>
[(#GRAND_TOTAL|>{1}|oui)
</p>]
[(#REM) Si un seul statut et pas celui de l'environnement c'est qu'on aura pas de résultats après]
[(#GRAND_TOTAL|=={1}|et{#ENV{statut}}|et{#GET{statut}|!={#ENV{statut}}}|oui)
<p><:tradlang:message_aucun_resultat_statut:></p>
<p><a href="[(#URL_TRADLANG_MODULE|parametre_url{statut,''}|parametre_url{lang_cible,#ENV{lang_cible}}|parametre_url{lang_orig,#ENV{lang_orig}})]"><:tradlang:lien_voir_toute_chaines_module:></a></p>
]
</B_statut>

<B_revise_cible>
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr class="row_first">
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="origine">
				[(#SET{lang_orig,#ENV{lang_orig}})]
				[(#SET{str,#VAL{tradlang:traduction}|_T{#ARRAY{lang,#GET{lang_orig}}}})]
				#GET{str}
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut" width="50px">
				<:tradlang:th_status:>
			</th>
			<th class="modifier" width="50px">
				&nbsp;
			</th>
		</tr>
	</thead>
	<tbody>
	[(#REM)on n'affiche que les id qui existent dans la langue mère] 
	<BOUCLE_revise_cible(TRADLANG){module}{statut ?}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{tri #ENV{par,statut},#GET{defaut_tri}}{par id}>
	<INCLURE{fond=inclure/tr_tradlang,id_tradlang,lang_orig,compteur=#COMPTEUR_BOUCLE,ajax}>
	</BOUCLE_revise_cible>
	</tbody>
</table>
</B_revise_cible>
<//B_revise_cible>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_inexistants>
#SET{total_inexistants,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_inexistants{nb=#GET{total_inexistants},langue=#ENV{lang_cible}}:></p>
[(#GET{total_inexistants}|=={#GET{total_mere}}|oui)
<div class="actions">
	[(#SET{texte_bouton,[(#VAL{tradlang:bouton_activer_lang}|_T{#ARRAY{lang,#ENV{lang_cible}}})]})]
	[(#BOUTON_ACTION{#GET{texte_bouton},[(#URL_ACTION_AUTEUR{tradlang_creer_langue_cible,#ID_TRADLANG_MODULE,#SELF}|parametre_url{lang_crea,#ENV{lang_cible}})]})]
</div>
]
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="origine">
				<:tradlang:traduction{lang=#ENV{lang_orig}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_inexistants(TRADLANG){module}{lang=#LANG_MERE}{id !IN #GET{str_cible}}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})]">
		<td>#ID</td>
		<BOUCLE_revise_inexistants_orig(TRADLANG){module}{lang=#ENV{lang_orig}}{id=#ID}>
		<td style="text-align:#LANG_LEFT;" dir="#LANG_DIR">[(#STR**|entites_html)]</td>
		</BOUCLE_revise_inexistants_orig>
		<td style="text-align:#LANG_LEFT;" dir="#LANG_DIR"><:tradlang:str_existe_pas_in_langue:></td>
		<//B_revise_inexistants_orig>
		<td>#STATUT</td>
	</tr>
	</BOUCLE_revise_inexistants>
	</tbody>
</table>
</B_revise_inexistants>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_en_trop>
#SET{total_en_trop,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_en_trop{nb=#GET{total_en_trop},langue=#ENV{lang_cible}}:></p>
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_en_trop(TRADLANG){module}{lang=#ENV{lang_cible}}{!id IN #GET{str_mere}}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{row_odd,row_even})]">
		<td>#ID</td>
		<td style="text-align:#LANG_LEFT;" dir="#LANG_DIR">[(#STR**|entites_html)]</td>
		<td>#STATUT</td>
	</tr>
	</BOUCLE_revise_en_trop>
	</tbody>
</table>
</B_revise_en_trop>
</BOUCLE_module>
</B_module>
<div class="formulaire_spip">
	<p class="message_erreur"><:tradlang:erreur_module_inconnu:></p>
</div>
<//B_module>