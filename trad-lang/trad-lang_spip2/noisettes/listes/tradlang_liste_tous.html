<BOUCLE_module(TRADLANG_MODULES){module?}{id_tradlang_module?}>
#SET{str_mere,#ARRAY}
#SET{str_cible,#ARRAY}
#SET{str_statut,#ARRAY}
<BOUCLE_revise(TRADLANG){module}{lang=#LANG_MERE}{par id}>[(#SET{str_mere,[(#GET{str_mere}|push{#ID})]})] </BOUCLE_revise>
#SET{total_mere,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_mere{nb=#GET{total_mere}}:></p>
</B_revise>
<div class="formulaire_spip editer">
	<span class="erreur_message"><:tradlang:erreur_aucun_item_langue_mere{lang_mere=#LANG_MERE}:></span>
</div>
<//B_revise>
<BOUCLE_langue_complete(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}>
#SET{str_cible,#GET{str_cible}|push{#ID}}
</BOUCLE_langue_complete>
#SET{total_cible,#GRAND_TOTAL}
</B_langue_complete>
#SET{total_cible,0}
<//B_langue_complete>
[(#SET{defaut_tri,#ARRAY{
	statut,#ENV{statut_sens,1},
	id,1,
	str,1,
	ts,-1
}})]

[(#GET{total_mere}|>{0}|oui)<p><:tradlang:nb_items_langue_cible{nb=#GET{total_cible},langue=#ENV{lang_cible}}:></p>]

<B_statut>
[(#GRAND_TOTAL|>{1}|oui)
<p class="filtrer"><:tradlang:info_filtrer_status:>
[(#ENV{statut}|oui)<a href="[(#SELF|parametre_url{statut,''})]" class="ajax"><:tradlang:lien_aucun_status:></a><span class="sep"> | </span>]
[(#ENV{statut}|non)<:tradlang:lien_aucun_status:><span class="sep"> | </span>]]
<BOUCLE_statut(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{fusion statut}{'<span class="sep"> | </span>'}>
[(#GRAND_TOTAL|>{1}|oui)
[(#STATUT|!={#ENV{statut}}|oui)<a href="[(#URL_TRADLANG_MODULE|parametre_url{statut,#STATUT})]" class="ajax">#STATUT</a>]
[(#STATUT|!={#ENV{statut}}|non)#STATUT]]
#SET{statut,#STATUT}
</BOUCLE_statut>
[(#GRAND_TOTAL|>{1}|oui)
</p>]
[(#REM) Si un seul statut et pas celui de l'environnement c'est qu'on aura pas de résultats après]
[(#GRAND_TOTAL|=={1}|et{#ENV{statut}}|et{#GET{statut}|!={#ENV{statut}}}|oui)
<p><:tradlang:message_aucun_resultat_statut:></p>
<p><a href="[(#SELF|parametre_url{statut,''})]"><:tradlang:lien_voir_toute_chaines_module:></a></p>
]
</B_statut>

<B_revise_cible>
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr class="row_first">
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="origine">
				[(#SET{lang_orig,#ENV{lang_orig}})]
				[(#SET{str,#VAL{tradlang:traduction}|_T{#ARRAY{lang,#GET{lang_orig}}}})]
				#GET{str}
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut" width="50px">
				<:tradlang:th_status:>
			</th>
			<th class="modifier" width="50px">
				&nbsp;
			</th>
		</tr>
	</thead>
	<tbody>
	[(#REM)on n'affiche que les id qui existent dans la langue mère] 
	<BOUCLE_revise_cible(TRADLANG){module}{statut ?}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{tri #ENV{par,statut},#GET{defaut_tri}}{par id}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{row_odd,row_even})] statut_[(#STATUT|strtolower)]" id="tradlang-#ID_TRADLANG">
		<td class="code_langue">#ID</td>
		<BOUCLE_revise_orig(TRADLANG){module}{lang=#ENV{lang_orig}}{id=#ID}>
		<td class="origine">[&lt;(#STATUT|!={OK}|?{#STATUT})&gt; ][(#STR**|entites_html)]</td>
		</BOUCLE_revise_orig>
		<td class="origine"><:tradlang:str_existe_plus:></td>
		<//B_revise_orig>
		<td class="cible #EDIT{str_statut}">[(#STR**|entites_html)]</td>
		<td class="statut" width="50px">[(#STATUT|sinon{<:tradlang:info_status_ok:>})]</td>
		<td class="modifier" width="50px"><a href="[(#URL_TRADLANG|parametre_url{lang_orig,#ENV{lang_orig}}|parametre_url{retour,#SELF})]"><:tradlang:lien_editer_chaine:></a></td>
	</tr>
	</BOUCLE_revise_cible>
	</tbody>
</table>
</B_revise_cible>
<//B_revise_cible>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_inexistants>
#SET{total_inexistants,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_inexistants{nb=#GET{total_inexistants},langue=#ENV{lang_cible}}:></p>
[(#GET{total_inexistants}|=={#GET{total_mere}}|oui)
<div class="actions">
	[(#SET{texte_bouton,[(#VAL{tradlang:bouton_activer_lang}|_T{#ARRAY{lang,#ENV{lang_cible}}})]})]
	[(#BOUTON_ACTION{#GET{texte_bouton},[(#URL_ACTION_AUTEUR{tradlang_creer_langue_cible,#ID_TRADLANG_MODULE,#SELF}|parametre_url{lang_crea,#ENV{lang_cible}})]})]
</div>
]
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="origine">
				<:tradlang:traduction{lang=#ENV{lang_orig}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_inexistants(TRADLANG){module}{lang=#LANG_MERE}{id !IN #GET{str_cible}}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})]">
		<td>#ID</td>
		<BOUCLE_revise_inexistants_orig(TRADLANG){module}{lang=#ENV{lang_orig}}{id=#ID}>
		<td>[(#STR**|entites_html)]</td>
		</BOUCLE_revise_inexistants_orig>
		<td><:tradlang:str_existe_pas_in_langue:></td>
		<//B_revise_inexistants_orig>
		<td>#STATUT</td>
	</tr>
	</BOUCLE_revise_inexistants>
	</tbody>
</table>
</B_revise_inexistants>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_en_trop>
#SET{total_en_trop,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_en_trop{nb=#GET{total_en_trop},langue=#ENV{lang_cible}}:></p>
<table class="spip liste_traductions tablesorter">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_en_trop(TRADLANG){module}{lang=#ENV{lang_cible}}{!id IN #GET{str_mere}}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{row_odd,row_even})]">
		<td>#ID</td>
		<td>[(#STR**|entites_html)]</td>
		<td>#STATUT</td>
	</tr>
	</BOUCLE_revise_en_trop>
	</tbody>
</table>
</B_revise_en_trop>
</BOUCLE_module>
</B_module>
<div class="formulaire_spip">
	<p class="message_erreur"><:tradlang:erreur_module_inconnu:></p>
</div>
<//B_module>