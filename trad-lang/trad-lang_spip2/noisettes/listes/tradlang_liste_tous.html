<BOUCLE_module(TRADLANG_MODULES){nom_mod=#ENV{module}}>
#SET{str_mere,#ARRAY}
#SET{str_cible,#ARRAY}
#SET{str_status,#ARRAY}
<BOUCLE_revise(TRADLANG){module}{lang=#LANG_MERE}{id != zz_timestamp_nepastraduire}{par id}>[(#SET{str_mere,[(#GET{str_mere}|push{#ID})]})] </BOUCLE_revise>
#SET{total_mere,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_mere{nb=#GET{total_mere}}:></p>
</B_revise>
<BOUCLE_langue_complete(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{id != zz_timestamp_nepastraduire}>
#SET{str_cible,#GET{str_cible}|push{#ID}}
</BOUCLE_langue_complete>
#SET{total_cible,#GRAND_TOTAL}
</B_langue_complete>
[(#SET{defaut_tri,#ARRAY{
	status,#ENV{status_sens,-1},
	id,1,
	str,1
}})]

<p><:tradlang:nb_items_langue_cible{nb=#GET{total_cible},langue=#ENV{lang_cible}}:></p>

<B_status>
[(#GRAND_TOTAL|>{1}|oui)
<p class="filtrer"><:tradlang:info_filtrer_status:>
[(#ENV{status}|oui)<a href="[(#SELF|parametre_url{status,''})]" class="ajax"><:tradlang:lien_aucun_status:></a><span class="sep"> | </span>]
[(#ENV{status}|non)<:tradlang:lien_aucun_status:><span class="sep"> | </span>]]
<BOUCLE_status(TRADLANG){module}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{id != zz_timestamp_nepastraduire}{fusion status}{'<span class="sep"> | </span>'}>
[(#GRAND_TOTAL|>{1}|oui)
[(#STATUS|!={#ENV{status}}|oui)<a href="[(#SELF|parametre_url{status,#STATUS})]" class="ajax">#STATUS</a>]
[(#STATUS|!={#ENV{status}}|non)#STATUS]]
#SET{statut,#STATUS}
</BOUCLE_status>
[(#GRAND_TOTAL|>{1}|oui)
</p>]
[(#REM) Si un seul statut et pas celui de l'environnement c'est qu'on aura pas de résultats après]
[(#GRAND_TOTAL|=={1}|et{#GET{status}|!={#ENV{status}}}|oui)
<p><:tradlang:message_aucun_resultat_statut:></p>
<p><a href="[(#SELF|parametre_url{status,''})]"><:tradlang:lien_voir_toute_chaines_module:></a></p>
]
</B_status>

<B_revise_cible>
<table class="liste_traductions">
	<thead>
		<tr>
			<th class="code_langue">
				[(#TRI{id,<:tradlang:codelangue:>,ajax})]
				
			</th>
			<th class="origine">
				[(#SET{lang_orig,#ENV{lang_orig}})]
				[(#SET{str,#VAL{tradlang:traduction}|_T{#ARRAY{lang,#GET{lang_orig}}}})]
				[(#TRI{str,#GET{str},ajax})]
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut">
				[(#TRI{status,<:tradlang:th_status:>,ajax})]
			</th>
		</tr>
	</thead>
	<tbody>
	[(#REM)on n'affiche que les id qui existent dans la langue mère] 
	<BOUCLE_revise_cible(TRADLANG){module}{status ?}{lang=#ENV{lang_cible}}{id IN #GET{str_mere}}{id != zz_timestamp_nepastraduire}{tri #ENV{par,status},#GET{defaut_tri}}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})] statut_[(#STATUS|strtolower)]">
		<td class="code_langue">#ID</td>
		<BOUCLE_revise_orig(TRADLANG){module}{lang=#ENV{lang_orig}}{id=#ID}{id != zz_timestamp_nepastraduire}>
		<td class="origine">[&lt;(#STATUS|!={OK}|?{#STATUS})&gt; ][(#STR**|entites_html)]</td>
		</BOUCLE_revise_orig>
		<td class="origine"><:tradlang:str_existe_plus:></td>
		<//B_revise_orig>
		<td class="cible #EDIT{str_statut}">[(#STR**|entites_html)]</td>
		<td class="statut">[(#STATUS|sinon{<:tradlang:info_status_ok:>})]</td>
	</tr>
	</BOUCLE_revise_cible>
	</tbody>
</table>
</B_revise_cible>
<//B_revise_cible>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_inexistants>
#SET{total_inexistants,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_inexistants{nb=#GET{total_inexistants},langue=#ENV{lang_cible}}:></p>
<table class="liste_traductions">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="origine">
				<:tradlang:traduction{lang=#ENV{lang_orig}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_inexistants(TRADLANG){module}{lang=#LANG_MERE}{id !IN #GET{str_cible}}{id != zz_timestamp_nepastraduire}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})]">
		<td>#ID</td>
		<BOUCLE_revise_inexistants_orig(TRADLANG){module}{lang=#ENV{lang_orig}}{id=#ID}{id != zz_timestamp_nepastraduire}>
		<td>[(#STR**|entites_html)]</td>
		</BOUCLE_revise_inexistants_orig>
		<td><:tradlang:str_existe_pas_in_langue:></td>
		<//B_revise_inexistants_orig>
		<td>#STATUS</td>
	</tr>
	</BOUCLE_revise_inexistants>
	</tbody>
</table>
</B_revise_inexistants>

[(#REM) On affiche les id qui n'existent pas dans la langue cible]
<B_revise_en_trop>
#SET{total_en_trop,#GRAND_TOTAL}
<p><:tradlang:nb_items_langue_en_trop{nb=#GET{total_en_trop},langue=#ENV{lang_cible}}:></p>
<table class="liste_traductions">
	<thead>
		<tr>
			<th class="code_langue">
				<:tradlang:codelangue:>
			</th>
			<th class="cible">
				<:tradlang:traduction{lang=#ENV{lang_cible}}:>
			</th>
			<th class="statut">
				<:tradlang:th_status:>
			</th>
		</tr>
	</thead>
	<tbody>
	<BOUCLE_revise_en_trop(TRADLANG){module}{lang=#ENV{lang_cible}}{!id IN #GET{str_mere}}{id != zz_timestamp_nepastraduire}>
	<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})]">
		<td>#ID</td>
		<td>[(#STR**|entites_html)]</td>
		<td>#STATUS</td>
	</tr>
	</BOUCLE_revise_en_trop>
	</tbody>
</table>
</B_revise_en_trop>
</BOUCLE_module>
</B_module>
<div class="formulaire_spip">
	<p class="message_erreur"><:tradlang:erreur_module_inconnu:></p>
</div>
<//B_module>