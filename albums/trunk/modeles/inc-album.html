[(#REM)

	Modèle «album» par défaut : vue sous forme de vignettes.
	cf. notes de modeles/album.html

][(#REM)

	Inclus dans :
		modeles/album.html

][(#REM)

	Paramètres (*obligatoire):
		*ids_documents    identifiant des documents
		*env              environnement issu du squelette appelant
		+ ceux de modeles/album.html

][
(#SET{titre_album,      #ENV{titre}|in_array{#LISTE{oui,true}}|?{#INFO_TITRE{album,#ID_ALBUM},#ENV{titre}|trim}})][
(#SET{descriptif_album, #ENV{descriptif}|?{#INFO_DESCRIPTIF{album,#ID_ALBUM}}})][
(#SET{taille_preview,   #CONFIG{taille_preview}|intval|sinon{#EVAL{_ALBUMS_TAILLE_PREVIEW}|intval}|sinon{150}})][
(#SET{recadrer,         #VAL{recadrer}|in_array{#ENV{args,#ARRAY}|array_keys}|?{true,#EVAL{_ALBUMS_RECADRER}}})][
(#SET{pagination,       #ENV{pagination}|intval|sinon{#EVAL{_ALBUMS_PAGINATION_VIGNETTES}|intval}|sinon{#EVAL{_ALBUMS_PAGINATION}|intval}|sinon{20}})][
(#SET{balise_titre,     #ENV*{balise_titre}|sinon{#ENV*{balise_titraille}}|sinon{#EVAL{_ALBUMS_BALISE_TITRE_VIGNETTES}}|sinon{#EVAL{_ALBUMS_BALISE_TITRE}}|sinon{strong}|trim|replace{^<|>$}})][
(#SET{position_legende, #ENV{position_legende}|sinon{#EVAL{_ALBUMS_POSITION_LEGENDE_VIGNETTES}}|sinon{#EVAL{_ALBUMS_POSITION_LEGENDE}}|trim})][
(#SET{position_legende, #GET{position_legende}|in_array{#LISTE{top,bottom}}|?{#GET{position_legende},bottom}})][
(#SET{caption,          #GET{titre_album}|?{#GET{titre_album}|wrap{#VAL{'<'}|concat{#GET{balise_titre},' class="titre_album">'}}}
                        |concat{#GET{#GET{descriptif_album}}|?{#GET{descriptif_album}|wrap{<div class="descriptif_album">}}}
                        |wrap{#VAL{'<'}|concat{#HTML5|?{figcaption,div},' class="caption ',#GET{position_legende},'">'}}}|trim)
]<B_documents_album>
[<(#HTML5|?{figure,div}) class="album vignettes figure[ (#ENV{align})][ (#ENV{classe})]">]
	#ANCRE_PAGINATION
	[(#GET{position_legende}|=={top}|oui)[(#GET{caption})]]
	<ul[ (#PLUGIN{bootstrap}|oui)class='thumbnails'][ (#CONFIG{foundation/variante}|intval|>={4}|?{class='small-block-grid-2 medium-block-grid-3 large-block-grid-4',class='block-grid 4-up mobile-two-up'})]>
		<BOUCLE_documents_album(DOCUMENTS){id_document IN #ENV{ids_documents}}{tout}{pagination #GET{pagination} #VAL{album}|concat{#ENV{id}}}>[
		(#SET{titre_document,      #TITRE|sinon{#FICHIER|basename}})][
		(#SET{titre_document_long, #GET{titre_document}|concat{' - ',#TYPE_DOCUMENT,' - ',#VAL{#TAILLE|taille_en_octets},#MEDIA|=={image}|?{#VAL{' - '}|concat{#LARGEUR,'&times;',#HAUTEUR,' px'}}}})][
		(#SET{ratio,               #VAL{/\W/}|preg_split{#ENV*{ratio,#GET{recadrer}|?{1}}}})][
		(#SET{ratio,               #GET{ratio}|count|>{1}|?{#GET{ratio/0}|div{#GET{ratio/1}},#GET{ratio/0}}|floatval})][
		(#SET{ratio,               #GET{ratio}|sinon{#LARGEUR|div{#HAUTEUR}}|floatval})][
		(#SET{largeur,             #ENV{largeur}|sinon{#ENV{hauteur}|mult{#GET{ratio}}}|sinon{#GET{taille_preview}}|intval})][
		(#SET{hauteur,             #ENV{hauteur,#GET{largeur}|div{#GET{ratio}}}|intval})][
		(#SET{src,                 #MEDIA|=={image}|?{
			#GET{recadrer}|?{
				#FICHIER|image_passe_partout{#GET{largeur},#GET{hauteur}}|image_recadre{#GET{largeur},#GET{hauteur},center},
				#FICHIER|image_reduire{#GET{largeur},#GET{hauteur}}},
			#LOGO_DOCUMENT{icone}}
		|extraire_attribut{src}})]
		<li[ (#PLUGIN{bootstrap}|oui)class='thumbnail']>
			<a href="#FICHIER" type="#MIME_TYPE" rel="album#ID_ALBUM" class="[(#EXTENSION)][ (#PLUGIN{foundation}|oui)th]" title="[(#GET{titre_document_long}|attribut_html)]" role="button" aria-label="Vignette">
				[(#GET{src}|balise_img{#GET{titre_document_long},vignette}|inserer_attribut{aria-hidden,true})]
			</a>
			[(#ENV{label}|oui)[<span class="label">(#GET{titre_document})</span>]]
		</li>
		</BOUCLE_documents_album>
	</ul>
	[<div class='pagination'>(#PAGINATION{#ENV{pagination_type,page}})</div>]
	[(#GET{position_legende}|=={bottom}|oui)[(#GET{caption})]]
[</(#HTML5|?{figure,div})>]<!-- .album.vignettes -->
</B_documents_album>
