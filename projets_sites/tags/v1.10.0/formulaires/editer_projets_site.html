<div class='formulaire_spip formulaire_editer formulaire_#FORM formulaire_#FORM-#ENV{id_projets_site,nouveau}'>
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV**{message_ok})</p>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]

[(#REM)
	Si on a un webservice, on ne touche pas aux champs mis à jour par ce dernier. On les cache par CSS car il s'avère que les disabled ne font plus bon ménage en SPIP 3.1.
][(#SET{class_webservice,[(#ENV{webservice}|?{'hidden invisible',''})]})]
[(#REM)
	Mais si on est sur une création d'un nouveau site (new=oui), on ne doit pas mettre 'class_webservice'
	sur les champs.
][(#SET{class_webservice,[(#ENV{id_projets_site}|=={oui}|?{'',#GET{class_webservice}})]})]
[(#ENV{editable})
	<form method='post' action='#ENV{action}'><div>
		#ACTION_FORMULAIRE{#ENV{action}}
		<input type='hidden' name='id_projets_site' value='#ENV{id_projets_site}' />
			[(#ENV{id_projets_site}|intval|>{0}|sinon{#ENV{webservice}}|non)
			<fieldset class="editer_referencement_automatise fieldset">
				<[(#DIV|sinon{ul})] class="editer-groupe">
					<[(#DIV|sinon{li})] class="editer editer_url_auto pleine_largeur[ (#ENV**{erreurs}|table_valeur{url_auto}|oui)erreur]">
						[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{url_auto})</span>]
						<p class="explication"><:projets_site:texte_referencement_automatique:></p>
						<input type="text" name="url_auto" id="url_auto" class='text' size='40' value="[(#ENV{webservice}|sinon{http://})]" />
					</[(#DIV|sinon{li})]>
				</[(#DIV|sinon{ul})]>
				<p class="boutons"><input type='submit' class='submit' name='ajoute_url_auto' value='<:bouton_ajouter:>' /></p>
				<p class="explication"><:projets_site:texte_non_fonction_referencement:></p>
			</fieldset>
			][(#ENV{id_projets_site}|intval|>{0}|oui)
			<p class="boutons"><input type='submit' class='submit' value='<:bouton_enregistrer:>' /></p>
			]
		<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
			[(#GET{class_webservice}|=={'hidden invisible'}|oui)
				[(#SAISIE{explication,webservice_active_explication,
					texte=<:projets_site:webservice_active_explication:>})]
			]
			[(#SAISIE{input, titre, obligatoire=oui,
				label=<:projets_site:champ_titre_label:>,
				size=255,
				maxlength=255,
				conteneur_class=[(#GET{class_webservice})]})]

			[(#SAISIE{selection, type_site, obligatoire=oui,
				label=<:projets_site:champ_type_site_label:>,
				datas=#ARRAY{01local,<:projets_site:type_site_01local:>,02dev,<:projets_site:type_site_02dev:>,03inte,<:projets_site:type_site_03inte:>,04test,<:projets_site:type_site_04test:>,05rec,<:projets_site:type_site_05rec:>,06prep,<:projets_site:type_site_06prep:>,07prod,<:projets_site:type_site_07prod:>},
				defaut='07prod',
				conteneur_class=[(#GET{class_webservice})]})]

			[(#SAISIE{input, uniqid,
				label=<:projets_site:champ_uniqid_label:>,
				explication=<:projets_site:champ_uniqid_explication::>,
				size=255,
				maxlength=255})]

			[(#SAISIE{input, webservice,
				label=<:projets_site:champ_webservice_label:>,
				explication=<:projets_site:champ_webservice_explication::>})]

			[(#SAISIE{date, date_creation,
				label=<:projets_site:champ_date_creation_label:>,
				conteneur_class=[(#GET{class_webservice})]})]

			[(#SAISIE{textarea, descriptif,
				label=<:projets_site:champ_descriptif_label:>,
				li_class='haut',
				inserer_barre='edition',
				rows=10,
				cols=40})]

		</[(#VAL{ul}|saisie_balise_structure_formulaire)]>

<!-- Front Office -->
		<fieldset class="editer_fo_fieldset">
			<h3 class="legend" id="editer_fo_legend">
				<:projets_site:fo_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, fo_url,
					label=<:projets_site:champ_fo_url_label:>,
					size=255,
					maxlength=255,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, fo_login,
					label=<:projets_site:champ_fo_login_label:>,
					size=25,
					maxlength=25})]

				[(#SAISIE{input, fo_password,
					label=<:projets_site:champ_fo_password_label:>,
					size=25,
					maxlength=25})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- Back office -->
		<fieldset class="editer_bo_fieldset">
			<h3 class="legend" id="editer_bo_legend">
				<:projets_site:bo_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, bo_url,
					label=<:projets_site:champ_bo_url_label:>,
					size=255,
					maxlength=255,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, bo_login,
					label=<:projets_site:champ_bo_login_label:>,
					size=25,
					maxlength=25})]

				[(#SAISIE{input, bo_password,
					label=<:projets_site:champ_bo_password_label:>,
					size=25,
					maxlength=25})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- Logiciel -->
		<fieldset class="editer_logiciel_fieldset[ (#GET{class_webservice})]">
			<h3 class="legend" id="editer_logiciel_legend">
				<:projets_site:logiciel_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, logiciel_nom, obligatoire=oui,
					label=<:projets_site:champ_logiciel_nom_label:>,
					size=25,maxlength=25,
					conteneur_class=[(#GET{class_webservice})],
					datas=#ENV{liste_logiciels_nom}})]

				[(#SAISIE{input, logiciel_version, obligatoire=oui,
					label=<:projets_site:champ_logiciel_version_label:>,
					size=25,
					maxlength=25,
					conteneur_class=[(#GET{class_webservice})],
					datas=#ENV{liste_logiciels_version}})]

				[(#SAISIE{input, logiciel_revision,
					label=<:projets_site:champ_logiciel_revision_label:>,
					size=25,
					maxlength=25,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, logiciel_charset,
					label=<:projets_site:champ_logiciel_charset_label:>,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{explication,logiciel_plugins_explication,
					inserer_debut=<:projets_site:logiciel_plugins_titre_explication:>,
					texte=<:projets_site:champ_logiciel_plugins_explication:>})]

				[(#SAISIE{textarea, logiciel_plugins,
					label=<:projets_site:champ_logiciel_plugins_label:>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- Les auteurs -->
		<fieldset class="editer_auteurs_fieldset[ (#GET{class_webservice})]">
			<h3 class="legend" id="editer_auteurs_legend">
				<:projets_site:auteurs_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{explication, auteurs_explication,
					inserer_debut=<:projets_site:auteurs_titre_explication:>,
					texte=<:projets_site:auteurs_explication:>})]

				[(#SAISIE{textarea, auteurs_admin,
					label=<:projets_site:champ_auteurs_admin_label>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{textarea, auteurs_webmestres,
					label=<:projets_site:champ_auteurs_webmestres_label>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- applicatif -->
		<fieldset class="editer_serveur_fieldset">
			<h3 class="legend" id="editer_serveur_legend">
				<:projets_site:serveur_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, serveur_nom,
					label=<:projets_site:champ_serveur_nom_label:>,
					size=255,
					maxlength=255,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, serveur_port,
					label=<:projets_site:champ_serveur_port_label:>,
					size=5,
					maxlength=5,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, serveur_path,
					label=<:projets_site:champ_serveur_path_label:>,
					size=255,
					maxlength=255,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{textarea, serveur_logiciel,
					label=<:projets_site:champ_serveur_logiciel_label:>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, serveur_surveillance,
					label=<:projets_site:champ_serveur_surveillance_label:>,
					size=255,
					maxlength=255})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- Apache -->
		<fieldset class="editer_apache_fieldset[ (#GET{class_webservice})]">
			<h3 class="legend" id="editer_apache_legend">
				<:projets_site:apache_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{textarea, apache_modules,
					label=<:projets_site:champ_apache_modules_label>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- PHP -->
		<fieldset class="editer_php_fieldset[ (#GET{class_webservice})]">
			<h3 class="legend" id="editer_php_legend">
				<:projets_site:php_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, php_version,
					label=<:projets_site:champ_php_version_label:>,
					size=25,
					maxlength=25,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, php_memory,
					label=<:projets_site:champ_php_memory_label:>,
					size=10,
					maxlength=10,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{textarea, php_extensions,
					label=<:projets_site:champ_php_extensions_label:>,
					rows=6,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, php_timezone,
					label=<:projets_site:champ_php_timezone_label:>,
					conteneur_class=[(#GET{class_webservice})]})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- versioning -->
		<fieldset class="editer_versioning_fieldset">
			<h3 class="legend" id="editer_versioning_legend">
				<:projets_site:versioning_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, versioning_type,
					label=<:projets_site:champ_versioning_type_label:>,
					size=255,
					maxlength=255,
					explication=<:projets_site:champ_versioning_type_explication::>})]

				[(#SAISIE{input, versioning_path,
					label=<:projets_site:champ_versioning_path_label:>,
					size=255,
					maxlength=255})]

				[(#SAISIE{input, versioning_trac,
					label=<:projets_site:champ_versioning_trac_label:>,
					size=255,
					maxlength=255})]
			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- SAS -->
		<fieldset class="editer_sas_fieldset">
			<h3 class="legend" id="editer_sas_legend">
				<:projets_site:sas_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, sas_protocole,
					label=<:projets_site:champ_sas_protocole_label:>,
					size=255,
					maxlength=255,
					explication=<:projets_site:champ_sas_protocole_explication::>})]

				[(#SAISIE{input, sas_serveur,
					label=<:projets_site:champ_sas_serveur_label:>,
					size=255,
					maxlength=255})]

				[(#SAISIE{input, sas_port,
					label=<:projets_site:champ_sas_port_label:>,
					size=5,
					maxlength=5})]

				[(#SAISIE{input, sas_login,
					label=<:projets_site:champ_sas_login_label:>,
					size=25,
					maxlength=25})]

				[(#SAISIE{input, sas_password,
					label=<:projets_site:champ_sas_password_label:>,
					size=25,
					maxlength=25})]
			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- SGBD -->
		<fieldset class="editer_sgbd_fieldset">
			<h3 class="legend" id="editer_sgbd_legend">
				<:projets_site:sgbd_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, sgbd_type,
					label=<:projets_site:champ_sgbd_type_label:>,
					explication=<:projets_site:champ_sgbd_type_explication::>,
					size=25,
					maxlength=25,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_version,
					label=<:projets_site:champ_sgbd_version_label:>,
					size=50,
					maxlength=50,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_serveur,
					label=<:projets_site:champ_sgbd_serveur_label:>,
					size=255,
					maxlength=255,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_port,
					label=<:projets_site:champ_sgbd_port_label:>,
					size=5,
					maxlength=5,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_gestion,
					label=<:projets_site:champ_sgbd_gestion_label:>,
					size=255,
					maxlength=255})]

				[(#SAISIE{input, sgbd_nom,
					label=<:projets_site:champ_sgbd_nom_label:>,
					size=50,
					maxlength=50,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_prefixe,
					label=<:projets_site:champ_sgbd_prefixe_label:>,
					size=25,
					maxlength=25,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_charset,
					label=<:projets_site:champ_sgbd_charset_label:>,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_collation,
					label=<:projets_site:champ_sgbd_collation_label:>,
					conteneur_class=[(#GET{class_webservice})]})]

				[(#SAISIE{input, sgbd_login,
					label=<:projets_site:champ_sgbd_login_label:>,
					size=25,
					maxlength=25})]

				[(#SAISIE{input, sgbd_password,
					label=<:projets_site:champ_sgbd_password_label:>,
					size=25,
					maxlength=25})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

<!-- autres champs -->
		<fieldset class="editer_autres_fieldset">
			<h3 class="legend" id="editer_autres_legend">
				<:projets_site:autres_fieldset_label:>
			</h3>
			<[(#VAL{ul}|saisie_balise_structure_formulaire)] class="editer-groupe">
				[(#SAISIE{input, sso,
					label=<:projets_site:champ_sso_label:>,
					size=25,
					maxlength=25})]

				[(#SAISIE{textarea, perimetre_acces,
					label=<:projets_site:champ_perimetre_acces_label:>,
					li_class=haut, class=inserer_barre_edition, rows=6})]

				[(#SAISIE{textarea, statistiques,
					label=<:projets_site:champ_statistiques_label:>,
					li_class=haut, class=inserer_barre_edition, rows=6})]

				[(#SAISIE{textarea, moteur_recherche,
					label=<:projets_site:champ_moteur_recherche_label:>,
					explication=<:projets_site:champ_moteur_recherche_explication:>,
					li_class=haut, class=inserer_barre_edition, rows=6})]

				[(#SAISIE{textarea, autres_outils,
					label=<:projets_site:champ_autres_outils_label:>,
					li_class=haut, class=inserer_barre_edition, rows=6})]

				[(#SAISIE{textarea, remarques,
					label=<:projets_site:champ_remarques_label:>,
					explication=<:projets_site:champ_remarques_explication::>,
					li_class=haut, class=inserer_barre_edition, rows=6})]

			</[(#VAL{ul}|saisie_balise_structure_formulaire)]>
		</fieldset>

		[(#REM) ajouter les saisies supplementaires : extra et autre, a cet endroit ]
		<!--extra-->
		<p class="boutons"><input type='submit' class='submit' value='<:bouton_enregistrer:>' /></p>
	</div></form>
	]
</div>
