[(#AUTORISER{voir,'projets_sites_client'}|sinon_interdire_acces)]
[<div class="champ contenu_logiciel">
	<div class="label visible"><:projets_sites_client:label_logiciel:> : </div>
	<div dir='#LANG_DIR' class='logiciel'>SPIP (#SPIP_VERSION)</div>
</div>]

[<div class="champ contenu_php_version">
	<div class="label visible"><:projets_sites_client:label_php_version:> : </div>
	<div dir='#LANG_DIR' class='php_version'>(#EVAL{phpversion()})</div>
</div>]

[<div class="champ contenu_php_memory">
	<div class="label visible"><:projets_sites_client:label_php_memory:> : </div>
	<div dir='#LANG_DIR' class='php_memory'>(#EVAL{ini_get('memory_limit')})</div>
</div>]

[<div class="champ contenu_date_creation">
	<div class="label visible"><:projets_sites_client:label_date_creation:> : </div>
	<div dir='#LANG_DIR' class='date_creation'>(#VAL{'Y-m-d H:i:s'}|date{#CHEMIN{config/connect.php}|filemtime})</div>
</div>]

[(#REM)
	Le code ci-dessous est une méthode "barbare" mais efficace pour soustraire toutes les infos du fichier config/connect.php.
	Le soucis c'est que ça peut ne pas être sécuritaire car on affiche le mot de passe de la bdd.
	Je laisse le code dans la page même si ce n'est pas affiché. C'est pour historique. 

	C'est au webmestre qu'appartiendra la décision de surcharger ce fichier pour afficher ces infos ou pas.

	[(#SET{bdd,[(#CHEMIN{config/connect.php}|file_get_contents|match{"spip_connect_db\((.*)\);"}|explode{","})]})]
	<pre>
	[(#GET{bdd}|print_r{1})]
	</pre>
	[(#SET{bdd_host,#GET{bdd}|table_valeur{0}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_host : (#GET{bdd_host})</p>]
	[(#SET{bdd_port,#GET{bdd}|table_valeur{1}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_port : (#GET{bdd_port})</p>]
	[(#SET{bdd_login,#GET{bdd}|table_valeur{2}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_login : (#GET{bdd_login})</p>]
	[(#SET{bdd_pass,#GET{bdd}|table_valeur{3}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_pass : (#GET{bdd_pass})</p>]
	[(#SET{bdd_nom,#GET{bdd}|table_valeur{4}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_nom : (#GET{bdd_nom})</p>]
	[(#SET{bdd_type,#GET{bdd}|table_valeur{5}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_type : (#GET{bdd_type})</p>]
	[(#SET{bdd_prefixe,#GET{bdd}|table_valeur{6}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_prefixe : (#GET{bdd_prefixe})</p>]
	[(#SET{bdd_auth,#GET{bdd}|table_valeur{7}|explode{"'"}|table_valeur{1}})]
	[<p>bdd_auth : (#GET{bdd_auth})</p>]
]
[<div class="champ contenu_fo_url">
	<div class="label visible"><:projets_sites_client:label_fo_url:> : </div>
	<div dir='#LANG_DIR' class='fo_url'>(#URL_SITE_SPIP)</div>
</div>]

<!-- Information webmestre -->
<div class="fieldset fieldset_webmestre">
	<h3 class="titrem"><:projets_sites_client:label_webmestre:></h3>
</div>

<B_webmestre>
<div class="liste-objets">
	<table class="spip liste">
		<thead>
			<tr>
				<th class="login secondaire"><:projets_sites_client:label_webmestre_login:></th>
				<th class="email secondaire"><:projets_sites_client:label_webmestre_email:></th>
				<th class="nom principal"><:projets_sites_client:label_webmestre_nom:></th>
			</tr>
		</thead>
		<tbody>
		<BOUCLE_webmestre(AUTEURS){webmestre=oui}{par id_auteur}{tout}>
		<tr>
			<td class="login secondaire">#LOGIN</td>
			<td class="email secondaire">#EMAIL</td>
			<td class="nom principal"><a href="#URL_ECRIRE{auteur,id_auteur=#ID_AUTEUR}">#NOM</a></td>
		</tr>
		</BOUCLE_webmestre>
		</tbody>
	</table>
</div>
</B_webmestre>

<!-- Information applicative -->
<div class="fieldset fieldset_applicatif">
	<h3 class="titrem"><:projets_sites_client:label_applicatif:></h3>
</div>

<div class="champ contenu_applicatif_path">
	<div class="label visible"><:projets_sites_client:label_applicatif_path:> : </div>[(#SET{texte,$_SERVER['SCRIPT_FILENAME']})]
	<div dir='#LANG_DIR' class='applicatif_path'>#EVAL{#GET{texte}}</div>
</div>

<div class="champ contenu_applicatif_port">
	<div class="label visible"><:projets_sites_client:label_applicatif_port:> : </div>[(#SET{texte,$_SERVER['SERVER_PORT']})]
	<div dir='#LANG_DIR' class='applicatif_port'>#EVAL{#GET{texte}}</div>
</div>

<div class="champ contenu_applicatif_logiciel">
	<div class="label visible"><:projets_sites_client:label_applicatif_logiciel:> : </div>[(#SET{texte,$_SERVER['SERVER_SOFTWARE']})]
	<div dir='#LANG_DIR' class='applicatif_logiciel'>#EVAL{#GET{texte}}</div>
</div>

<div class="champ contenu_applicatif_nom">
	<div class="label visible"><:projets_sites_client:label_applicatif_nom:> : </div>[(#SET{texte,$_SERVER['SERVER_NAME']})]
	<div dir='#LANG_DIR' class='applicatif_nom'>#EVAL{#GET{texte}}</div>
</div>

<!-- Information sgbd -->
<div class="fieldset fieldset_sgbd">
	<h3 class="titrem"><:projets_sites_client:label_sgbd:></h3>
</div>

<div class="champ contenu_sgbd_type">
	<div class="label visible"><:projets_sites_client:label_sgbd_type:> : </div>[(#SET{texte,$GLOBALS['db_ok']['type']})]
	<div dir='#LANG_DIR' class='sgbd_type'>#EVAL{#GET{texte}}</div>
</div>

<div class="champ contenu_sgbd_version">
	<div class="label visible"><:projets_sites_client:label_sgbd_version:> : </div>
	<div dir='#LANG_DIR' class='sgbd_version'>#EVAL{sql_version()}</div>
</div>

<div class="champ contenu_sgbd_nom">
	<div class="label visible"><:projets_sites_client:label_sgbd_nom:> : </div>[(#SET{texte,$GLOBALS['db_ok']['db']})]
	<div dir='#LANG_DIR' class='sgbd_nom'>#EVAL{#GET{texte}}</div>
</div>

<B_serveur>
<div class="champ contenu_sgbd_serveur">
	<div class="label visible"><:projets_sites_client:label_sgbd_serveur:> : </div>
	<div dir='#LANG_DIR' class='sgbd_serveur'><BOUCLE_serveur(DATA) {source sql, SHOW VARIABLES LIKE 'hostname'}>[(#VALEUR{Value})]</BOUCLE_serveur></div>
</div></B_serveur>

<div class="champ contenu_sgbd_prefixe">
	<div class="label visible"><:projets_sites_client:label_sgbd_prefixe:> : </div>[(#SET{texte,$GLOBALS['db_ok']['prefixe']})]
	<div dir='#LANG_DIR' class='sgbd_prefixe'>#EVAL{#GET{texte}}</div>
</div>

<!-- Information plugins -->
<div class="fieldset fieldset_plugins">
	<h3 class="titrem"><:projets_sites_client:label_plugins:></h3>
</div>
[(#REM) Le nom des fichiers un peu arbitraire, les fichiers plugin.xml sont toujours d'actualité en SPIP 3… ]
[(#SPIP_VERSION|intval|=={2}|oui)#INCLURE{fond=prive/objets/liste/info_plugins,env}]
[(#SPIP_VERSION|intval|=={3}|oui)#INCLURE{fond=prive/objets/liste/info_paquets,env}]

<style type="text/css">
body.info_config #contenu .fiche_objet #wysiwyg .champ { margin-bottom: 1em; }
body.info_config #contenu .fiche_objet #wysiwyg .champ .label.visible { display: block;}
body.info_config #contenu .fiche_objet #wysiwyg .fieldset .titrem {
	background-color: #EEEEEE;
	color: black;
	display: block;
	font-weight: normal;
	padding: 7px 5px 7px 10px;
	border-top: 1px solid #cccccc;
}
</style>