[(#REM)
Maintenant qu'on a les types de logos de tous les objets éditoriaux de SPIP
On scanne objet par objet les logos contenus dans le répertoire IMG/
][(#SET{logo_max_size,[(#EVAL{_LOGO_MAX_SIZE})]})][(#SET{logo_max_height,[(#EVAL{_LOGO_MAX_HEIGHT})]})][(#SET{logo_max_width,[(#EVAL{_LOGO_MAX_WIDTH})]})]

<B_ls2>
<div class="galerie[ media-(#ENV{logo,spip_articles})]">
	<h2>[(#ENV{logo,spip_articles}|objet_info{texte_objets}|_T)][<br/><em><small>(#GRAND_TOTAL|singulier_ou_pluriel{lister_logos:info_1_logo,lister_logos:info_nb_logos})</small></em>]</h2>
	[(#ANCRE_PAGINATION)]
	[<div class="pagination">(#PAGINATION{prive})</div>]
	<table>
		<thead>
			<tr>
				<th class="id"><:medias:id:></th>
				<th></th>
				<th><:medias:logo:></th>
				<th><:medias:infos:></th>
				<th><:medias:descriptif:></th>
			</tr>
		</thead>
		<tbody>
		<BOUCLE_ls2 (DATA) {source table, #ENV{logo,spip_articles}|lister_logos_fichiers{#ENV{etat,''},#ENV{controle,''}}} {pagination 5 #ENV{logo,spip_articles}}>[(#SET{pathinfo,[(#VALEUR|pathinfo)]})][(#SET{brise,[(#ENV{logo,spip_articles}|id_table_objet|sql_getfetsel{[(#ENV{logo,spip_articles})],[(#ENV{logo,spip_articles}|id_table_objet|concat{'=',[(#VALEUR|logo_infos{3}|sql_quote)]})]}|?{0,1})]})]
			<tr id="[(#GET{pathinfo/filename})]">
				<td class="id">
					<strong>[(#GET{brise}|non)<a href="[(#VALEUR|logo_infos{3}|generer_url_entite{[(#ENV{logo,spip_articles}|table_objet)]})]">][(#VALEUR|logo_infos{3})][(#GET{brise}|non)</a>]</strong>
				</td>
				<td class='statut'>
					[(#GET{brise,0}|oui)<img src='#CHEMIN_IMAGE{document-manquant-24.png}' width='24' height='24' alt='<:lister_logos:objet_supprime:>' />]
				</td>
				<td class="logo">
					<a href="[(#VALEUR)]"[ title='(#GET{pathinfo/basename}|attribut_html)'][ type="(#VALEUR|getimagesize|table_valeur{mime})"]>[(#VALEUR|balise_img|image_reduire{250,100}|inserer_attribut{alt,#VALEUR}|inserer_attribut{class,spip_logos})]</a>
					[<div class="fichier">(#GET{pathinfo/basename})</div>]
				</td>
				<td class="exif">
					<div class="constante_logo">
						<div class="[(#GET{logo_max_size}|oui)[(#VALEUR|filesize|div{1024}|>{#GET{logo_max_size}}|?{'logo_max_size_ko','logo_max_size_ok'})]]" title="[(#GET{logo_max_size}|oui)logo_max_size]"> </div>
						<div class="[(#GET{logo_max_width}|oui)[(#VALEUR|largeur|>{#GET{logo_max_width}}|?{'logo_max_width_ko','logo_max_width_ok'})]]" title="[(#GET{logo_max_width}|oui)logo_max_width]"> </div>
						<div class="[(#GET{logo_max_height}|oui)[(#VALEUR|hauteur|>{#GET{logo_max_height}}|?{'logo_max_height_ko','logo_max_height_ok'})]]" title="[(#GET{logo_max_height}|oui)logo_max_height]"> </div>
					</div>
					[<strong class="extension">(#GET{pathinfo/extension})</strong>]
					<div class="dimensions">[(#VALEUR|largeur)] x [(#VALEUR|hauteur)] pixels </div>
					[<div class="taille">(#VALEUR|filesize|taille_en_octets)</div>]
					[<div class="date">(#VAL{Y-m-d h:i:s}|date{#VALEUR|filemtime}|affdate{d/m/Y})</div>]
					[<a class="[(#ENV{logo,spip_articles}|table_objet)]" href="[(#VALEUR|logo_infos{3}|generer_url_entite{[(#ENV{logo,spip_articles}|table_objet)]})]">(#INFO_TITRE{[(#ENV{logo,spip_articles}|table_objet)],[(#VALEUR|logo_infos{3})]})</a>]
					[(#INFO_TITRE{[(#ENV{logo,spip_articles}|table_objet)],[(#VALEUR|logo_infos{3})]}|non)<em><:lister_logos:objet_supprime:></em>]
				</td>
				<td class="descriptif">
					[<strong>(#VALEUR|logo_etat)</strong>]
				</td>
			</tr>
		</BOUCLE_ls2>
		</tbody>
	</table>
	[<div class="pagination">(#PAGINATION{prive})</div>]
</div>
</B_ls2>
	<h2>[(#ENV{logo,spip_articles}|objet_info{texte_objets}|_T)]</h2>
	<p><:lister_logos:pas_de_logos:></p>
<//B_ls2>

