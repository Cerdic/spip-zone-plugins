[(#REM) titre=Gestion Documents Stockage]
[(#REM) autoriser=webmestre ]

<!-- descriptif=
Stockage de documents sur S3.
Cette page de configuration est r&#233;serv&#233;e au webmestre du site.

Pour envoyer des documents sur S3, utiliser la m&#233;diath&#232;que ou <a href="#URL_ECRIRE{s3}">la page d&#233;di&#233;e</a>.
-->

#CACHE{0}


<form method="post" action="#SELF"><div>[(#ENV{_cfg_}|form_hidden)]</div>

[(#REM) ------------------------ Stockage sur Amazon S3 --------------------- ]
<fieldset>
<legend>
	Stockage Amazon S3
</legend>
<p><:medias:envoyer_explication:>:</p>

<select name="provider">
	<option value="amazon">Amazon S3</option>
	<option value="google"[
		(#ENV{provider}|=={gs}|?{selected="selected"})
		]>Google Storage</option>
<!--	<option value="archiveorg"[
		(#ENV{provider}|=={archiveorg}|?{selected="selected"})
		]>archive.org</option> -->
</select>


<p><label><:medias:cle_publique:>: <small><i>Cf.</i> <a href="http://aws-portal.amazon.com/gp/aws/developer/account/index.html?action=access-key">http://aws-portal.amazon.com/gp/...</a></small>
<br /><input type="text" name="s3publickey" value="[(#ENV**{s3publickey}|entites_html)]" class="forml" /></label>
</p>

<p><label><:medias:cle_secrete:>:
<br /><input type="text" name="s3secretkey" value="[(#ENV**{s3secretkey}|entites_html)]" class="forml" /></label>
</p>

<p><label><:medias:bucket_nom:>:
<br /><input type="text" name="s3bucket" value="[(#ENV**{s3bucket}|entites_html)]" class="forml" /></label>
</p>


<p><label><:medias:chemin_base_bucket:>[ (#ENV{s3bucket})] :

<br /><input type="text" name="s3path" value="[(#ENV**{s3path}|entites_html)]" /></label>

<br /><small>Cette valeur est utile si vous voulez h&#233;berger les fichiers de plusieurs sites sous le m&#234;me bucket.</small>
</label>


Pour Amazon S3, choisir la zone g&#233;ographique du bucket&nbsp;:
<select name="location">
	<option value="us">US (Etats-Unis)</option>
	<option value="eu"[
		(#ENV{location}|=={eu}|?{selected="selected"})
		]>EU (Europe)</option>
</select>

</p>




<div>
<label><:medias:url_s3:>:
<br />
<select name="s3baseurl">
	<option value="">[http://(#ENV{provider}|s3_endpoint)/][(#ENV{s3bucket}|sinon{$bucket$})][/(#ENV{s3path})]/</option>
[
	<option value="http://(#ENV{s3bucket})/"[
		(#ENV{s3baseurl}|=={http://[(#ENV{s3bucket})]/}|?{selected="selected"})
		]>http://[(#ENV{s3bucket})][/(#ENV{s3path})]/</option>

]</select>

[(#ENV{s3bucket,''}|oui)
	<blockquote>
	<small>
	Test DNS :
	<br />
	[(#ENV{s3bucket}|checkdnsrr{CNAME}|?{
		<tt>[(#ENV{s3bucket})] CNAME [(#ENV{s3bucket}|filtrer{dns_get_record,#EVAL{DNS_CNAME}}|var_export{1})]</tt>
	,
		[(#ENV{s3bucket}|sinon{$bucket$})] <:medias:registrement_cname_erreur:> <tt>CNAME</tt>
	})]
	</small></blockquote>
]

</label>
</div>


</fieldset>



[(#REM) ------------------------ BOUTON OK ------------------------ ]
<div>
<input style="float:#LANG_RIGHT;" type="submit" name="_cfg_ok" value="<:OK:>" class="fondo" />
<!--
<input type="reset" value="<:Reset:>" class="fondo" />
<input type="submit" name="_cfg_delete" value="<:Supprimer:>" class="fondo" />
-->
</div>

</form>
