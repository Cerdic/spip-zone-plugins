<h1>#SQUELETTE</h1>
<?php

$rrules = array(
'FREQ=DAILY;COUNT=2',
'FREQ=DAILY;UNTIL=20121224T000000Z',
'FREQ=DAILY;INTERVAL=2',
'FREQ=DAILY;INTERVAL=10;COUNT=5',
'FREQ=DAILY;UNTIL=20150131T140000Z;BYMONTH=1',
'FREQ=DAILY;COUNT=2',
'FREQ=DAILY;UNTIL=20121224T000000Z',
'FREQ=DAILY;INTERVAL=2',
'FREQ=DAILY;INTERVAL=10;COUNT=5',
'FREQ=DAILY;UNTIL=20150131T140000Z;BYMONTH=1',
'FREQ=MONTHLY;COUNT=2;BYDAY=1FR',
'FREQ=MONTHLY;UNTIL=20121224T000000Z;BYDAY=1FR',
'FREQ=MONTHLY;INTERVAL=2;COUNT=2;BYDAY=1SU,-1SU',
'FREQ=MONTHLY;COUNT=6;BYDAY=-2MO',
'FREQ=MONTHLY;BYMONTHDAY=-3',
'FREQ=MONTHLY;COUNT=2;BYMONTHDAY=2,15',
'FREQ=MONTHLY;COUNT=2;BYMONTHDAY=1,-1',
'FREQ=MONTHLY;INTERVAL=18;COUNT=2;BYMONTHDAY=10,11,12,13,14,15',
'FREQ=MONTHLY;INTERVAL=2;BYDAY=TU',
'FREQ=MONTHLY;BYDAY=FR;BYMONTHDAY=13',
'FREQ=MONTHLY;BYDAY=SA;BYMONTHDAY=7,8,9,10,11,12,13',
#'FREQ=MONTHLY;COUNT=3;BYDAY=TU,WE,TH;BYSETPOS=3',
'FREQ=MONTHLY;BYMONTHDAY=15,30;COUNT=5',
#'FREQ=MONTHLY;BYDAY=MO,TU,WE,TH,FR;BYSETPOS=-2',
'FREQ=MONTHLY;COUNT=2;BYDAY=1FR',
'FREQ=MONTHLY;UNTIL=20121224T000000Z;BYDAY=1FR',
'FREQ=MONTHLY;INTERVAL=2;COUNT=2;BYDAY=1SU,-1SU',
'FREQ=MONTHLY;COUNT=6;BYDAY=-2MO',
'FREQ=MONTHLY;BYMONTHDAY=-3',
'FREQ=MONTHLY;COUNT=2;BYMONTHDAY=2,15',
'FREQ=MONTHLY;COUNT=2;BYMONTHDAY=1,-1',
'FREQ=MONTHLY;INTERVAL=18;COUNT=2;BYMONTHDAY=10,11,12,13,14,15',
'FREQ=MONTHLY;INTERVAL=2;BYDAY=TU',
'FREQ=MONTHLY;BYDAY=FR;BYMONTHDAY=13',
'FREQ=MONTHLY;BYDAY=SA;BYMONTHDAY=7,8,9,10,11,12,13',
#'FREQ=MONTHLY;COUNT=3;BYDAY=TU,WE,TH;BYSETPOS=3',
'FREQ=MONTHLY;BYMONTHDAY=15,30;COUNT=5',
#'FREQ=MONTHLY;BYDAY=MO,TU,WE,TH,FR;BYSETPOS=-2',
'FREQ=WEEKLY;COUNT=2',
'FREQ=WEEKLY;UNTIL=20121224T000000Z',
'FREQ=WEEKLY;INTERVAL=2;WKST=SU',
'FREQ=WEEKLY;UNTIL=20121007T000000Z;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;COUNT=2;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;INTERVAL=2;UNTIL=20121224T000000Z;WKST=SU;BYDAY=MO,WE,FR',
'FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;INTERVAL=2;COUNT=4;BYDAY=TU,SU;WKST=MO',
'FREQ=WEEKLY;INTERVAL=2;COUNT=4;BYDAY=TU,SU;WKST=SU',
'FREQ=WEEKLY;COUNT=2',
'FREQ=WEEKLY;UNTIL=20121224T000000Z',
'FREQ=WEEKLY;INTERVAL=2;WKST=SU',
'FREQ=WEEKLY;UNTIL=20121007T000000Z;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;COUNT=2;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;INTERVAL=2;UNTIL=20121224T000000Z;WKST=SU;BYDAY=MO,WE,FR',
'FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH',
'FREQ=WEEKLY;INTERVAL=2;COUNT=4;BYDAY=TU,SU;WKST=MO',
'FREQ=WEEKLY;INTERVAL=2;COUNT=4;BYDAY=TU,SU;WKST=SU',
'FREQ=YEARLY;COUNT=2;BYMONTH=6,7',
'FREQ=YEARLY;INTERVAL=3;COUNT=2;BYYEARDAY=1,100,200',
'FREQ=YEARLY;INTERVAL=2;COUNT=2;BYMONTH=1,2,3',
'FREQ=YEARLY;UNTIL=20150131T090000Z;BYMONTH=1;BYDAY=SU,MO,TU,WE,TH,FR,SA',
'FREQ=YEARLY;BYWEEKNO=20;BYDAY=MO',
'FREQ=YEARLY;BYMONTH=3;BYDAY=TH',
'FREQ=YEARLY;BYDAY=TH;BYMONTH=6,7,8',
'FREQ=YEARLY;INTERVAL=4;BYMONTH=11;BYDAY=TU;BYMONTHDAY=2,3,4,5,6,7,8',
'FREQ=YEARLY;INTERVAL=3;COUNT=2;BYYEARDAY=1,100,200',
'FREQ=YEARLY;BYMONTH=3;BYDAY=2SU',
'FREQ=YEARLY;BYMONTH=11;BYDAY=1SU',
'FREQ=YEARLY;COUNT=5;BYYEARDAY=-1,-100,-200',
'FREQ=YEARLY;COUNT=2;BYMONTH=6,7',
'FREQ=YEARLY;INTERVAL=3;COUNT=2;BYYEARDAY=1,100,200',
'FREQ=YEARLY;INTERVAL=2;COUNT=2;BYMONTH=1,2,3',
'FREQ=YEARLY;UNTIL=20150131T090000Z;BYMONTH=1;BYDAY=SU,MO,TU,WE,TH,FR,SA',
'FREQ=YEARLY;BYWEEKNO=20;BYDAY=MO',
'FREQ=YEARLY;BYMONTH=3;BYDAY=TH',
'FREQ=YEARLY;BYDAY=TH;BYMONTH=6,7,8',
'FREQ=YEARLY;INTERVAL=4;BYMONTH=11;BYDAY=TU;BYMONTHDAY=2,3,4,5,6,7,8',
'FREQ=YEARLY;INTERVAL=3;COUNT=2;BYYEARDAY=1,100,200',
'FREQ=YEARLY;BYMONTH=3;BYDAY=2SU',
'FREQ=YEARLY;BYMONTH=11;BYDAY=1SU',
'FREQ=YEARLY;COUNT=5;BYYEARDAY=-1,-100,-200',
);

$today = date('Y-m-d H:i:s');
include_spip('inc/when');
foreach($rrules as $rrule){
	echo $rrule;
	echo "<br />";
	echo "Prochaine occurence : ".affdate($n=when_rule_to_next_date($today,$rrule));
	echo "<br />";
	$max = 3;
	while ($n AND $max--){
		echo "Prochaine occurence : ".affdate($n=when_rule_to_next_date($today,$rrule,$n));
		echo "<br />";
	}
	echo when_rule_to_texte($rrule);
	echo "<hr />";
}

?>