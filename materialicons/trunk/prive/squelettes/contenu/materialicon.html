[(#AUTORISER{voir,materialicon,#ID_MATERIALICON}|sinon_interdire_acces)]
[(#SET{url_voir,#VAL{materialicon}|objet_info{url_voir}})]
[(#SET{url_edit,#VAL{materialicon}|objet_info{url_edit}})]
<BOUCLE_materialicon(MATERIALICONS){id_materialicon}{si #ENV{exec}|=={#GET{url_voir}}}>
[(#BOITE_OUVRIR{[
	[(#AUTORISER{modifier,materialicon,#ID_MATERIALICON})
		[(#ID_MATERIALICON|afficher_qui_edite{materialicon}|non)
			[(#URL_ECRIRE{#GET{url_edit},id_materialicon=#ID_MATERIALICON}|icone_verticale{<:materialicon:icone_modifier_materialicon:>,materialicon,edit,right ajax preload})]
		]
		[(#ID_MATERIALICON|afficher_qui_edite{materialicon}|oui)
			[(#URL_ECRIRE{#GET{url_edit},id_materialicon=#ID_MATERIALICON}|icone_verticale{#ID_MATERIALICON|afficher_qui_edite{materialicon},warning-24,'',right edition_deja ajax preload})]
		]
	]

	<h1>[(#RANG). ](#NOM|sinon{<:info_sans_titre:>})[(#CHEMIN_IMAGE{materialicon-24.png}|balise_img{materialicon,cadre-icone})]</h1>

],simple fiche_objet})]

<div class="ajax">
	#FORMULAIRE_DATER{materialicon,#ID_MATERIALICON}
</div>

<!--affiche_milieu-->

<div id="wysiwyg">
<INCLURE{fond=prive/objets/contenu/materialicon,id=#ID_MATERIALICON,id_materialicon=#ID_MATERIALICON,virtuel=oui,ajax=wysiwyg,wysiwyg=1}>
</div>

<div class="nettoyeur"></div>

[(#AUTORISER{modifier,materialicon,#ID_MATERIALICON})
	[(#ID_MATERIALICON|afficher_qui_edite{materialicon}|non)
		[(#URL_ECRIRE{#GET{url_edit},id_materialicon=#ID_MATERIALICON}|icone_verticale{<:materialicon:icone_modifier_materialicon:>,materialicon,edit,right ajax preload})]
	]
	[(#ID_MATERIALICON|afficher_qui_edite{materialicon}|oui)
		[(#URL_ECRIRE{#GET{url_edit},id_materialicon=#ID_MATERIALICON}|icone_verticale{#ID_MATERIALICON|afficher_qui_edite{materialicon},warning-24,'',right edition_deja ajax preload})]
	]
]

<div class="nettoyeur"></div>
<div class="liste">
	<BOUCLE_objetslies(spip_materialicons_liens){id_materialicon}{0,1}><h3><:materialicon:titre_objets_lies_materialicon:></h3></BOUCLE_objetslies>

	<BOUCLE_listeobjets(spip_materialicons_liens){id_materialicon}{fusion objet}{par objet}>
		#SET{table,#OBJET|table_objet}
		[(#SET{titre,[#OBJET:info_(#GET{table})_liees_materialicon]})]
		[(#SET{liste,#VAL{prive/objets/liste/#GET{table}}|trouver_fond|?{#GET{table},objets_lies_materialicon}})]
		<INCLURE{fond=prive/objets/liste/#GET{liste},objet,id_materialicon,ajax,env} />
	</BOUCLE_listeobjets>
</div>

#PIPELINE{afficher_complement_objet,#ARRAY{args,#ARRAY{type,materialicon,id,#ID_MATERIALICON},data,'<div class="nettoyeur"></div>'}}

#BOITE_FERMER


#SET{enfants,''}
[(#VAL{prive/objets/contenu/materialicon-enfants}|trouver_fond|oui)
	[(#SET{enfants,[(#INCLURE{fond=prive/objets/contenu/materialicon-enfants,id_materialicon,env})]})]
]
[(#PIPELINE{affiche_enfants,[(#ARRAY{args,#ARRAY{exec,materialicon,id_materialicon,#ID_MATERIALICON,objet,materialicon,id_objet,#ID_MATERIALICON},data,#GET{enfants}})]})]

[(#CONST{_AJAX}|oui)
	<script type="text/javascript">/*<!\\[CDATA\\[*/reloadExecPage('#ENV{exec}','#navigation,#chemin,#extra');/*\\]\\]>*/</script>
]
</BOUCLE_materialicon>
[(#ENV**{exec}|=={#GET{url_edit}}|?{#INCLURE{fond=prive/squelettes/contenu/#GET{url_edit},redirect='',env,retourajax=oui},#REM|sinon_interdire_acces})]
<//B_materialicon>
