<!-- nom=microblog -->
#CACHE{0}
<div class="formulaire_spip formulaire_editer formulaire_cfg">
	[<p class='reponse_formulaire reponse_formulaire_erreur'>(#ENV*{message_erreur})</p>]
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
	<form method="post" action="#ENV{action}"><div>
		#ACTION_FORMULAIRE{SELF}
		<fieldset>
			<legend><:twitter:legend_api_twitter:></legend>
			<p class="explication"><:twitter:explication_twitter_api_oauth:></p>

			<ul class="compte">
				<li class="editer_twitter_consumer_key twitter_conf">
					<label for="twitter_consumer_key"><:twitter:label_twitter_consumer_key:></label>
					<input type="text" name="twitter_consumer_key" value="[(#ENV{twitter_consumer_key})]" id="twitter_consumer_key" class="text" />
				</li>
				<li class="editer_twitter_consumer_secret twitter_conf">
					<label for="twitter_consumer_secret"><:twitter:label_twitter_consumer_secret:></label>
					<input type="text" name="twitter_consumer_secret" value="[(#ENV{twitter_consumer_secret}|=={#CONFIG{microblog/twitter_consumer_secret}}|?{'',#ENV{twitter_consumer_secret}})]" id="twitter_consumer_secret" class="text" />
					[<em><tt>(#CONFIG{microblog/twitter_consumer_secret}|twitter_masquer_secret)</tt></em>]
				</li>
			</ul>
		</fieldset>
		<fieldset>
			<legend><:twitter:notifications:></legend>
			<ul>
				<li class="editer_notifications">
					<label><:twitter:notifications_publiques:></label>
					<p class="explication"><:twitter:elements_signaler:> :</p>
					<div class="choix">
						<input type="checkbox" name="evt_forumposte" id="evt_forumposte" [
							(#ENV{evt_forumposte}|?{checked="checked"})] />
						<label for="evt_forumposte"><:twitter:poster_forums:></label>
					</div>
					<div class="choix">
						<input type="checkbox" name="evt_proposerarticles" id="evt_proposerarticles"[
							(#ENV{evt_proposerarticles}|?{checked="checked"})]  />
						<label for="evt_proposerarticles"><:twitter:proposer_articles:></label>
					</div>
					<hr />
					<div class="choix">
						<input type="checkbox" name="evt_forumvalide" id="evt_forumvalide" [
							(#ENV{evt_forumvalide}|?{checked="checked"})] />
						<label for="evt_forumvalide"><:twitter:publier_forums:></label>
					</div>
					<div class="choix">
						<input type="checkbox" name="evt_publierarticles" id="evt_publierarticles"[
							(#ENV{evt_publierarticles}|?{checked="checked"})] />
						<label for="evt_publierarticles"><:twitter:publier_articles:></label>
						<div id="evt_publierarticles_options"[(#ENV{evt_publierarticles}|non)style="display:none;"]>
						[(#CONFIG{post_dates}|=={non}|oui)
							<div class="choix">
								<input type="radio" name="evt_publierarticlesfutur" id="evt_publierarticlesfutur_validation" value="validation"[
									(#ENV{evt_publierarticlesfutur}|=={publication}|?{'',checked="checked"})] />
								<label for="evt_publierarticlesfutur_validation"><:twitter:publier_articles_futurs_immediatement:></label>
							</div>
							<div class="choix">
								<input type="radio" name="evt_publierarticlesfutur" id="evt_publierarticlesfutur_publication" value="publication"[
									(#ENV{evt_publierarticlesfutur}|=={publication}|?{checked="checked"})] />
								<label for="evt_publierarticlesfutur_publication"><:twitter:publier_articles_futurs_visibles:></label>
							</div>
						]
							<div class="choix">
								<input type="checkbox" name="short_url" id="short_url" value="1"[
									(#ENV{short_url,''}|oui)checked="checked"] />
								<label for="short_url"><:twitter:publier_articles_shorturl:></label>
							</div>
							<div class="choix">
								<input type="text" name="attente" id="attente" value="[(#ENV{attente}|sinon{1})]" size="2" />
								<label for="attente"><:twitter:publier_articles_attente:>
								<small>(<:twitter:necessite_job_queue:>)</small>
								</label>
							</div>
						</div>
						<script type="text/javascript">
							function affiche_bloc_synchro(){
								if (jQuery("#evt_publierarticles").attr("checked"))
									jQuery("#evt_publierarticles_options").show('fast');
								else
									jQuery("#evt_publierarticles_options").hide('fast');
							}
							jQuery(document).ready(function(){
								jQuery("#evt_publierarticles").click(affiche_bloc_synchro);
							});
						</script>
					</div>
				</li>
			</ul>
		</fieldset>

		<fieldset>
			<legend><:twitter:invite:></legend>
			<ul>
				<li>
					<label><:twitter:invite_statut:></label>
					<p class="explication"><:twitter:invite_statut_explications:></p>
					<div class="choix">
						<input type="checkbox" name="invite"[
							(#ENV{invite}|?{checked="checked"})] id="invite" />
						<label for="invite"><:twitter:invite_afficher:></label>
					</div>
				</li>
			</ul>
		</fieldset>

		<p class="boutons">
			<input type="submit" name="_cfg_ok" value="<:bouton_valider:>" class="submit" />
		</p>
	</div></form>

	<BOUCLE_cond(CONDITION){si #ENV{twitter_consumer_key}|strlen|et{#ENV{twitter_consumer_secret}|strlen}}>
	<fieldset>
		<legend><:twitter:legend_comptes_twitter:></legend>

		<ul class="comptes">
			<li class="compte pleine_largeur">
				<BOUCLE_comptes(POUR){tableau #CONFIG{microblog/twitter_accounts}}>
				<INCLURE{fond=modeles/twitter_user_description,account=#CLE} />
				</BOUCLE_comptes>
				Aucun compte associ√©.
				<//B_comptes>
			</li>
			<li class="associer_twitter_compte twitter_conf">
				[(#BOUTON_ACTION{[(#CHEMIN_IMAGE{ajouter-16.png}|balise_img)]<:twitter:label_associer_compte_twitter:>,#URL_ACTION_AUTEUR{ajouter_twitteraccount,new,#SELF}})]
			</li>
		</ul>
		<style type="text/css">
		.twitter.user_desc {background:white;padding:10px;padding-left: 52px;}
		.twitter.user_desc .name .spip_logos {float: left;margin: 0 10px 10px -42px;}
		.twitter.user_desc .name img {vertical-align: middle}
		.twitter.user_desc .name small {float: right;}
		.twitter.user_desc .actions {float: right}
		.twitter.user_desc .description p:last-child {margin-bottom: 0}
		.associer_twitter_compte {text-align: right}
		</style>
	</fieldset>
	</BOUCLE_cond>
</div>