#HTTP_HEADER{Content-Type: text/xml; charset=#CHARSET}
<?xml version="1.0"?>

[(#REM)
	Menu de selection d'un mot a partir d'une valeur passee en parametre
	La reponse doit etre en xml, elle sera exploitee par iautocompleter.js
]

<ajaxresponse>
	
	#SET{plusieurs,1}
	[(#SET{cherche,#ENV{value}})]

	[(#ENV{value}|etiquettes_position_quot|!={100000}|?{' '})
		[(#ENV{value}|etiquettes_position_quot|=={0}|?{' '})
			#SET{plusieurs,0}
			[(#SET{cherche,[(#ENV{value}|substr{6})]})]
		]
	]

	[(#REM) Chercher les mots correspondant a la requete ]
	<BOUCLE_s(MOTS){titre LIKE (#GET{cherche})%}{type=#ENV{groupe}}{0,20}{par titre}{doublons}>
	<item>
		<text><![CDATA[<strong>#TITRE</strong>[ - (#DESCRIPTIF|textebrut|couper{20})]]]></text>
		<value><![CDATA[[(#TITRE*|textebrut|strcspn{' ,"'}|=={[(#TITRE*|textebrut|strlen)]}|?{'',&quot;})][(#TITRE*|textebrut|entites_html)][(#TITRE*|textebrut|strcspn{' ,"'}|=={[(#TITRE*|textebrut|strlen)]}|?{'',&quot;})]]]></value>
		<id>#ID_MOT</id>
	</item>
	</BOUCLE_s>
		
		<BOUCLE_s1(MOTS){titre LIKE %(#GET{cherche})%}{type=#ENV{groupe}}{0,20}{par titre}{doublons}>
		<item>
			<text><![CDATA[<strong>#TITRE</strong>[ - (#DESCRIPTIF|textebrut|couper{20})]]]></text>
			<value><![CDATA[[(#TITRE*|textebrut|strcspn{' ,"'}|=={[(#TITRE*|textebrut|strlen)]}|?{'',&quot;})][(#TITRE*|textebrut|entites_html)][(#TITRE*|textebrut|strcspn{' ,"'}|=={[(#TITRE*|textebrut|strlen)]}|?{'',&quot;})]]]></value>
			<id>#ID_MOT</id>
		</item>
		</BOUCLE_s1>
		
	<//B_s>

</ajaxresponse>
