<?phpfunction sel_editer_contenu_objet($flux){	$spip_branche_principale = substr($GLOBALS[spip_version_branche], 0, 1);	if ($flux['args']['type']=='auteur') {		if ($spip_branche_principale==3) $flux['data'] = preg_replace('%(<li class="editer editer_bio(.*?)</li>)%is','',$flux['data']);		if ($spip_branche_principale==2) $flux['data'] = preg_replace('%(<li class="editer_bio(.*?)</li>)%is','',$flux['data']);		if ($spip_branche_principale==3) $flux['data'] = preg_replace('%(<li class="editer editer_pgp(.*?)</li>)%is','',$flux['data']);		if ($spip_branche_principale==2) $flux['data'] = preg_replace('%(<li class="editer_pgp(.*?)</li>)%is','',$flux['data']);				// visiteur (6forum) : utilisateur non certifié --> pas d'accès aux statuts des utilisateurs		// rédacteur (1comite) : utilisateur certifié --> pas d'accès aux statuts des utilisateurs		// admistrateur : administrateur local du catalogue --> accès aux statuts des utilisateurs (menu normal), mais pas la case à cocher "webmestre"		// webmestre : administrateur global du catalogue --> accès à tout, menu + case à cocher.								if (in_array($GLOBALS[auteur_session][statut],array('','1comite','6forum')))		{				if ($spip_branche_principale==3) $flux['data'] = preg_replace("%(<li class='editer editer_statut'>(.*?)</script>(.*?)</li>)%is","",$flux['data']);			if ($spip_branche_principale==2) $flux['data'] = preg_replace("%(<li class='editer_statut'>(.*?)</li>)%is","",$flux['data']);		}		// Pour les sessions d'admin non webmestre (admin local du catalogue), on cache la case droit webmestre		// Pour les sessions d'admin webmestre (admin global du catalogue), on la met en changeant son label				if (($GLOBALS[auteur_session][statut]=='0minirezo') && ($GLOBALS[auteur_session][webmestre]=='non'))		{			$flux['data'] = preg_replace('%(<div class="choix choix-webmestre(.*?)</div>)%is','',$flux['data']);		}		if (($GLOBALS[auteur_session][statut]=='0minirezo') && ($GLOBALS[auteur_session][webmestre]=='oui'))		{			if ($spip_branche_principale==3) $flux['data'] = preg_replace('%(<label for="webmestre">(.*?)</label>)%is','<label for="webmestre">'._T('auteur:info_admin_statuer_webmestre').'</label>',$flux['data']);			if ($spip_branche_principale==2) $flux['data'] = preg_replace("%(<label for='webmestre'>(.*?)</label>)%is","<label for='webmestre'>"._T('auteur:info_admin_statuer_webmestre').'</label>',$flux['data']);		}				$flux['data'] = preg_replace("%(<li class='editer_liens_sites fieldset'>(.*?)</fieldset>(.*?)</li>)%is","",$flux['data']);		$complement_auteur = recuperer_fond('formulaires/inc-auteur', $flux['args']['contexte']);		$flux['data'] =    preg_replace('%(<fieldset>(.*?)</fieldset>)%isU', '$1'."\n".$complement_auteur, $flux['data']);		$complement_sels = recuperer_fond('formulaires/inc-liste_sels', $flux['args']['contexte']);		$flux['data'] =    preg_replace('%(<fieldset>(.*?)</fieldset>)%isU', '$1'."\n".$complement_sels, $flux['data']);		$complement_organisations = recuperer_fond('formulaires/inc-liste_organisations', $flux['args']['contexte']);		$flux['data'] =    preg_replace('%(<fieldset>(.*?)</fieldset>)%isU', '$1'."\n".$complement_organisations, $flux['data']);				} // Vos identifiants de connexion...			return $flux;}// $flux['data'] = preg_replace('%(<li(.*?)editer_statut|editer_bio|editer_pgp(.*?)>(.*?)</li>)%is'...function sel_formulaire_charger($flux){    if ($flux['args']['form'] == 'editer_auteur'){		if ($flux['data']['id_auteur']=='oui') $flux['data']['statut'] = '6forum';	}	return $flux;}function sel_formulaire_verifier($flux){    if ($flux['args']['form'] == 'editer_auteur'){        if ($adresse1 = _request('adresse1')){            if ($adresse1='') $flux['data']['adresse1'] = _T('auteur:form_erreur_information_obligatoire');        }    }    return $flux;}function sel_formulaire_traiter($flux){    if ($flux['args']['form'] == 'editer_auteur'){		$id_auteur = $flux['data']['id_auteur'];		$upd = sql_updateq('spip_auteurs', array(			'adresse1' => _request('adresse1'),			'adresse2' => _request('adresse2'),			'code_postal' => _request('code_postal'),			'ville' => _request('ville'),			'pays' => _request('pays'),			'tel1' => _request('tel1'),			'tel2' => _request('tel2'),			'commentaires' => _request('commentaires')		), 'id_auteur=' . intval($id_auteur));		if ($upd) $flux['data']['message_ok'] = "Bravo !";		if (!$upd) $flux['data']['message_erreur'] = "Raté.....";		spip_log($flux,'rrr');    };	    return $flux;}?>