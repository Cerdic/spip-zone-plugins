<B_plugins>
<div class="liste plugins">
	<ul class="liste-items">
<BOUCLE_plugins(PAQUETS plugins){par multi nom, prefixe}{!par constante, actif}{id_depot=0}{actif ?}{constante ?IN #ENV{constante}}>
		<li class="item[ (#ACTIF|=={oui}|?{actif,inactif})][(#OBSOLETE|=={oui}|oui) disabled][(#CONSTANTE|=={_DIR_EXTENSIONS}|oui) verrou][(#MAJ_VERSION|oui) up]"[ id="(#PREFIXE|strtolower)-#COMPTEUR_BOUCLE"]>
			[(#OBSOLETE|=={oui}|non)
			<div class="check">
				[(#CONSTANTE|=={_DIR_EXTENSIONS}|non)
					<input type="checkbox" class="checkbox select_plugin" name="id_paquets[(#VAL{91}|chr)][(#VAL{93}|chr)]" value="#ID_PAQUET" />
				]
			</div>]
			[(#REM) <!-- Resume du plugin -->]
			<div class="resume">
				<h3 class="nom"><a[ href="(#VERSION)"] rel="info">[(#NOM)]</a></h3>
				<span class="version">[(#VERSION)]</span>
				<span class="etat">[ - (#ETAT)]</span>
				<div class="short">[(#SLOGAN|svp_T{#PREFIXE}|typo)]</div>
				[(#LOGO|oui)<div class="icon">
					[(#ACTIF|=={oui}|?{
						#CONSTANTE|constant|concat{#SRC_ARCHIVE/#LOGO}|image_reduire{32}
						,
						#CONSTANTE|constant|concat{#SRC_ARCHIVE/#LOGO}|image_reduire{32}|image_sepia{#dddddd}
					})]
				</div>]
			</div>
			
			<div class="actions">[(#OBSOLETE|=={oui}|non)
				[(#CONSTANTE|=={_DIR_EXTENSIONS}|non)
					[(#ACTIF|=={oui}|oui)
						<input type="submit" name="[(#ID_PAQUET|svp_nom_action{desactiver})]" class="submit" value="<:svp:bouton_desactiver:>" />
						[(#INSTALLE|=={oui}|et{#AUTORISER{webmestre}}|oui)
							<input type="submit" name="[(#ID_PAQUET|svp_nom_action{desinstaller})]" class="submit" value="<:svp:bouton_desinstaller:>" />
						]
					]
					[(#ACTIF|=={oui}|non)
						<input type="submit" name="[(#ID_PAQUET|svp_nom_action{activer})]" class="submit" value="<:svp:bouton_activer:>" />
					]
					[(#MAJ_VERSION|oui)
						<input type="submit" name="[(#ID_PAQUET|svp_nom_action{up})]" class="submit" value="<:svp:bouton_up:>" />
					]
				]
				[(#CONSTANTE|=={_DIR_EXTENSIONS}|oui)
					<span class="details">
					<:svp:info_verrouille:>
					</span>
				]
			]</div>
			[(#ACTIF|=={oui}|oui) #SET{prefixe,#PREFIXE|strtolower}
				[(#INCLURE{fond=prive/squelettes/inclure/cfg,script=configurer_#GET{prefixe},nom=#NOM})]
			]
			[(#MAJ_VERSION|oui)
			[(#CHEMIN_IMAGE{update-16.png}|balise_img{<:svp:plugin_info_up:>,picto_up}|inserer_attribut{title,<:svp:plugin_info_up:>})]
			]
			[(#OBSOLETE|=={oui}|oui)
			[(#CHEMIN_IMAGE{plugin-dis-16.png}|balise_img{<:plugin_info_non_compatible_spip:>,picto_err}|inserer_attribut{title,<:plugin_info_non_compatible_spip:>})]
			]
			<div class="details" style="display:none">
				<dl class="description">
					<dd class="desc">
						[(#DESCRIPTION*|svp_T{#PREFIXE}|propre)]
						[<em class="site">
							<a href="(#LIEN_DOC)" class="spip_out" title="<:svp:bulle_aller_documentation:>"><:en_savoir_plus:></a>
						</em>]
					</dd>
					[<dt class="auteurs"><:public:par_auteur:></dt>
					<dd class="auteurs">(#AUTEUR*|svp_afficher_credits)</dd>]
					[<dt class="licence"><:intitule_licence:></dt>
					<dd class="licence">(#LICENCE|svp_afficher_credits{','})</dd>]
				</dl>
				[(#AUTORISER{webmestre}|oui)
				<dl class="tech">
					<dt><:version:></dt>
					<dd>#VERSION[ SVN [(#VAL{91}|chr)](#CONSTANTE|constant|concat{#SRC_ARCHIVE/}|version_svn_courante|abs|sinon{''})[(#VAL{93}|chr)]]</dd>
					<dt><:repertoire_plugins:></dt>
					<dd>[(#CONSTANTE|constant|concat{#SRC_ARCHIVE/}|joli_repertoire)]</dd>
					[<dt><:plugin_info_necessite:></dt>
					<dd>(#DEPENDANCES|svp_afficher_dependances{necessite}|supprimer_tags)</dd>]
				</dl>
			</div>]
		</li>
</BOUCLE_plugins>
	</ul>
</div>
</B_plugins>

<script type="text/javascript">
//<![CDATA[
	jQuery(function(){
		jQuery('.plugins li.item a[rel=info]').click(function(){
			var li = jQuery(this).parents('li').eq(0);
			if (jQuery('div.details',li).toggle().is(':visible'))
				li.addClass('on');
			else
				li.removeClass('on');
			return false;
		});
		jQuery('.plugins li.item input.checkbox').change(function(){
			jQuery(this).parents('form').eq(0).find('.boutons').slideDown();
		}); 
	});
//]]>
</script>
