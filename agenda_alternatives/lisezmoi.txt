----------------------------------------------------------------------
Permet l'utilisation du plugin Agenda dans le squelettes Alternatives.
(Contrib testée avec Spip 1.9.2c et Alternatives 1.9.2c)
----------------------------------------------------------------------

Dans le squelette, trois fichiers à modifier : 
	themes/alternatives/sommaire.html, 
	themes/alternatives/article.html, 
	themes/alternatives/inc/inc-menu-principal.html

----------------------------------------------------------------------
1. Pour sommaire.html, placer le code : 
	[(#MODELE{encart_agenda}{lang})] 

	après la ligne : 
	<INCLURE{fond=inc/inc-annonces}{lang}>
	(vers ligne 43)
	
2. Pour sommaire.html, placer le code : 
	<INCLURE{fond=inc/alter_calendrier}{var_date=archives}{date=#ENV{archives,#DATE}}{self=#SELF}{lang}>
	après la ligne : 
	<div id="encart">
	(vers ligne 39)

3. Pour inc/inc-menu-principal.html, placer le code : 
	<B_agenda><li id="menu-principal-agenda"><a href="<BOUCLE_agenda(EVENEMENTS){0,1}>[(#URL_PAGE{evenements})]</BOUCLE_agenda>" title="<:icone_agenda:>"><:icone_agenda:></a></li></B_agenda>

	après la ligne qui se termine par : 
	<:accueil_site:></a></li>
	(vers ligne 3)

4. Pour article.html, placer le code : 
	[(#MODELE{evenements_article}{id_article}{lang}{self=#SELF})] 

	après la ligne  : 
	<INCLURE{fond=inc-petition}{id_article}{self=#SELF}>
	(vers ligne 108)

----------------------------------------------------------------------
Pour vous simplifer la vie, les fichiers originaux ainsi modifiés ont été placés dans : 
	plugins/agenda_alternatives/modifications

Il suffit donc pour vous de remplacer les 3 fichiers originaux dans :
	themes/alternatives et themes/alternatives/inc

Mais attention : il se peut que le squelette alternatives que vous avez entre les mains soit légèrement différent que celui qui est proposé ici.
Si vous le pouvez donc, il vaut mieux que vous fassiez les changements vous-même.

Les trois modifs ci-dessus sont indépendantes, vous n'êtes pas obligé de les faire toutes ou de respecter un ordre précis. L'emplacement du code proposé ci-dessus dans les fichiers html est également modifiable : avec un peu d'astuce, vous saurez placer les différents modules là où bon vous semble...
	
----------------------------------------------------------------------
Vous obtiendrez donc :

	- Un mini calendrier dans le cadre de droite (modif 2)
	- Un encart 'Agenda' dans le cadre de droite avec les prochains évènements (modif 1)
	- Un bouton 'Agenda' supplémentaire en haut (modif 3), menant à :
	- Une page 'evenements' qui liste les évènements (du jour/du mois, prochains, passés)
	- La liste des évènements associés au bas de chaque article (modif 4)

Note : certains des éléments précédents n'aparaissent pas si aucun évènement n'est programmé dans le site.

----------------------------------------------------------------------
Précautions d'usage :

0. Restez prudent. Cette contrib libre n'a aucune obligation de résultats.
	De furtifs bogues peuvent encore échapper à notre vigilance...

I. Placez les trois plugins en question dans le dossier /plugins/
	Vous obtiendrez donc trois sous-dossiers, ressemblant à :
		/plugins/agenda_alternatives
		/plugins/agenda
		/plugins/widget_calendar
	Pour les utiliser, n'oubliez pas de les activer tous les trois dans l'interface privée, sinon votre site pourra ne pas fonctionner.

II. Assurez-vous des compatibilités. Par exemple :
	Agenda 1.9.1 avec Spip 1.9.1
	Agenda 1.9.2 avec Spip 1.9.2

III. Faites les choses dans l'ordre :
	1. s'assurer que SPIP fonctionne
	2. s'assurer que le squelette fonctionne
	3. activer l'agenda et widget calendar et s'assurer que tout fonctionne encore
	4. procéder aux modifications du squelettes et activer agenda_alternatives.

IV. Ajouter vos évènements attachés à vos articles.

----------------------------------------------------------------------
Question à trois centimes : Mettre le mini-calendrier à gauche et non à droite...

Dans ce cas, le calendrier serait visible de toutes les pages du site.
Séduisant, mais le cache de SPIP pose problème car votre squelette ne transmet jamais les parametres 'archive' et 'self' à inc-menu.html
Bon, si vous y tenez, alors :

1. Remplacez TOUS les : <INCLURE{fond=inc/inc-menu}{lang} de votre site
	par : <INCLURE{fond=inc/inc-menu}{lang}{archive=#ENV{archive}}{self=#SELF}
(Notez que le dernier chevron est manquant car d'autres paramètres peuvent éventuellement exister)
Dans le squelette de base, il y a 41 remplacements à faire sans compter ceux de : alter-perso/
Seul le fichier 'evenements.html' de ce plugin est prêt à gérer un mini-calendrier à gauche.

2. Pour inc/inc-menu.html, placer le code : 
	<INCLURE{fond=inc/alter_calendrier}{var_date=archives}{date=#ENV{archives,#DATE}}{self=#SELF}{lang}>

	après la ligne : 
	<div class="menu" id="menu-rubriques">
	(vers ligne 15)

----------------------------------------------------------------------
Toutes vos remarques : patrice.vanneufville(!arob!)laposte.net
	