[(#REM)

	Sélection d'un role à attribuer à un document

	Identifiant du champ (name) : « roles »

	Type de champ en fonction du contexte :
	- 1 seul rôle attribuable : hidden
	- < 5 rôles attribuables et sélection unique : radio
	- < 5 rôles attribuables et sélection multiple : checkbox
	- >= 5 rôles attribuables : select

	Paramètres :
		**obligatoire
		*conseillé

		- roles : rôle(s) sélectionné(s)
		- **roles_attribuables : tableau linéaire des rôles possibles
		- multiple : 'oui' pour permettre une sélection de plusieurs rôles
		- readonly : 'oui' pour interdire l'édition
]
#SET{nb_roles, #ENV{roles_attribuables}|count}
#SET{multiple, #ENV{multiple}|=={oui}|?{multiple}}
#SET{readonly, #ENV{readonly}|=={oui}|?{readonly}}

<div class="editer editer-role">


	[(#REM) Cas 1 : un seul rôle attribuable -> input hidden avec label ]
	<BOUCLE_roles_un(CONDITION){si #GET{nb_roles}|<={1}}>
	#SET{role,#ENV{roles_attribuables/0}}
	<label><:roles_documents:champ_role_label:> : [(#GET{role}|role{document})]
	</label>
	<input
		type="hidden"
		id="champ_roles"
		name="roles"
		value="#GET{role}"
	>
	</BOUCLE_roles_un>


	[(#REM) Cas 2 : plusieurs rôles attribuables ]
	<label><:roles_documents:champ_roles_label:></label>


	[(#REM) Cas 2.1 : moins de 5 rôles -> radio ou checkbox ]
	<BOUCLE_roles_peu(DATA)
		{source table, #ENV{roles_attribuables}}
		{si #GET{nb_roles}|<{5}}
	>
	#SET{type,#GET{multiple}|?{checkbox,radio}}
	#SET{checked, #VALEUR|=={#ENV{role}}|ou{#ENV{role}|non|et{#COMPTEUR_BOUCLE|=={1}}}|?{checked}}
	<div class="choix">
		<input
			type="#GET{type}"
			class="#GET{type}"
			id="champ_roles_#COMPTEUR_BOUCLE"
			name="roles"
			value="#VALEUR"
			[checked="(#GET{checked})"]
			[readonly="(#GET{readonly})"]
		>
		<label for="champ_roles_#COMPTEUR_BOUCLE">[(#VALEUR|role{document})]</label>
	</div>
	</BOUCLE_roles_peu>


	[(#REM) Cas 2.2 : plus de 5 rôles -> select ]
	<B_roles_beaucoup>
	<select
		class="select chosen"
		id="champ_roles"
		name="roles[(#GET{multiple}|oui)\[\]]"
		[multiple="(#GET{multiple})"]
	>
		<BOUCLE_roles_beaucoup(DATA)
			{source table, #ENV{roles_attribuables}}
			{si #GET{nb_roles}|>={5}}
		>
		#SET{selected, #VALEUR|=={#ENV{role}}|ou{#ENV{role}|non|et{#COMPTEUR_BOUCLE|=={1}}}|?{selected}}
		<option value="#VALEUR"[ selected="(#GET{selected})"]>[(#VALEUR|role{document})]</option>
		</BOUCLE_roles_beaucoup>
	</select>
	</B_roles_beaucoup>

	<//B_roles_un>

</div>