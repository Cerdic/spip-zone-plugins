[(#REM)
	Modele pour le Flash MEDIA player 4.3  : Playlist below, using mixed media files
	http://www.longtailvideo.com/players/jw-flv-player/
	
	The Flash Media player supports playback of a single media file of any format the Adobe Flash Player can handle (MP3,FLV,SWF,JPG,PNG or GIF).
	
	JW Players are licensed under a Creative Commons license.
	It allows you to use, modify and redistribute the script for noncommercial purposes ONLY.
	For all other use, you should buy a commercial license. 
	For more info and instant ordering, please advance to his online order page!
	http://www.longtailvideo.com/players/order
	
	Modele spip mis au point sur irc a l'initiative d'alexandra
	avec la participation de kent1, cy_altern, marcimat, renato et toggg.
	
Plusieurs methodes d'insertion :

	Methode classique <template><mediaplayer123></template> ou 123 est l'id article fournissant les documents attachés
	Methode par rubrique (on prend les videos parmis les documents de la rubrique) :
	<template><mediaplayer|rubrique=123></template>
	Methode par secteur (on prend les videos parmis les documents du secteur) :
	<template><mediaplayer|secteur=123></template>
	Methode par document unique (on prend un seul document) :
	<template><mediaplayer|document=123></template>
	
	Pour les options, voir http://developer.longtailvideo.com/trac/wiki/FlashVars

	- type : string,'flv|swf|mp3|jpg|png|gif'	Types de fichiers a prendre en compte (filtre les documents dans la playliste)
	- allowfullscreen : boolean true|false true
	- menu: boolean true|false Affiche ou cache le menu du lecteur au clic droit
	- align : left|center|right,center
		
	Définition du Layout
	- controlbar : string bottom|over|none Position des controles
	- width : int px|%,320		Largeur de l'animation flash
	- height : int px|%,240		Hauteur de l'animation flash
	- playlist : string |bottom,over,right,none	Position de la playliste
	- playlistsize : int px|% Taille de la playliste
	
	Définition des couleurs
	- backcolor string couleur héxadécimale
	- frontcolor string couleur héxadécimale
	- lightcolor string couleur héxadécimale
	- screencolor string couleur héxadécimale
	
	Définition du behaviour
	- autostart: bool true|false, false
	- bufferlength: int 1	Nombre de seconde à charger avant lecture
	- displayclick: string play|link|fullscreen|none|mute|next, play	Action lors du click sur le lecteur
	- linktarget: _blank|_self|_parent|_top|framename, _self
	- mute: bool true|false, false
	- quality: bool true|false, true
	- icons: boolean true|false, false
	- jwlogo: string url d'un fichier image
	- repeat: string none|list|allways|single, none 
	- shuffle : boolean true|false,false
	- stretching : string none|exactfit|uniform|fill, uniform
	- volume: int 90 Volume au chargement
	
	Définition des utilisations externes
	- javascriptid: texte,'player' Donne l'id du player pour le javascript
	- creator: du texte
	- prerolllocation: url d'un flv sans son extension
	- prerolllink: url
	- postrolllocation: url d'un flv sans son extension
	- postrolllink: url
	- domaine: url d'un squelette xspf sur un autre site spip
	
]

[(#ENV{objet}|=={site}|oui)
	#SET{objet,site}
]

[(#ENV{donnee}|oui) 
  [(#SET{objet_spip,id_donnee})]
  [(#SET{objet_val,[(#ENV{donnee})]})]
]
[(#ENV{rubrique}|oui) 
  [(#SET{objet_spip,id_rubrique})]
  [(#SET{objet_val,[(#ENV{rubrique})]})]
]
[(#ENV{art_secteur}|oui) 
  [(#SET{objet_spip,art_secteur})]
  [(#SET{objet_val,[(#ENV{art_secteur})]})]
]
[(#ENV{document}|oui) 
  [(#SET{objet_spip,id_document})]
  [(#SET{objet_val,[(#ENV{document})]})]
]
[(#ENV{mot}|oui) 
  [(#SET{objet_spip,id_mot})]
  [(#SET{objet_val,[(#ENV{mot})]})]
]
[(#ENV{breve}|oui) 
  [(#SET{objet_spip,id_breve})]
  [(#SET{objet_val,[(#ENV{breve})]})]
]
[(#ENV{article}|oui) 
  #SET{objet_spip,id_article}
  #SET{objet_val,#ENV{article}}
]
[(#GET{objet_spip}|non) 
	[(#ENV{id_mediaplayer}|oui)
		[(#SET{objet_spip,id_article})]
		[(#SET{objet_val,[(#ENV{id_mediaplayer})]})]
	]
]

[(#SET{align,#ENV{align,center}})]
[(#SET{wmode,#ENV{wmode,#CONFIG{xspf/wmode}|sinon{transparent}}})]
[(#SET{type,#ENV{type,#CONFIG{xspf/mpltypefichier}|sinon{flv|swf|mp3|jpg|png|gif}}})]
[(#SET{allowfullscreen,#ENV{allowfullscreen,#CONFIG{xspf/mplallowfullscreen}|sinon{true}}})]
[(#SET{menu,#ENV{menu,#CONFIG{xspf/mplmenu}|sinon{false}}})]

[(#SET{controlbar,#ENV{controlbar,#CONFIG{xspf/mplcontrolbar,over}}})]
[(#SET{width,#ENV{width,#CONFIG{xspf/mplwidth}|sinon{320}}})]
[(#SET{height,#ENV{height,#CONFIG{xspf/mplheigth}|sinon{240}}})]
[(#SET{playliste,#ENV{playliste,#CONFIG{xspf/mplplayliste,none}}})]
[(#SET{playlistesize,#ENV{playlistesize,#CONFIG{xspf/mplplaylistsize}|sinon{180}}})]
[(#SET{skin,#ENV{skin,#CONFIG{xspf/mplskin}}})]

[(#SET{backcolor,#CONFIG{xspf/mplbackcolor}|replace{#,0x}|sinon{0x000000}})]
[(#SET{frontcolor,#CONFIG{xspf/mplfrontcolor}|replace{#,0x}|sinon{0xCCCCCC}})]
[(#SET{lightcolor,#CONFIG{xspf/mpllightcolor}|replace{#,0x}|sinon{0x996600}})]
[(#SET{screencolor,#CONFIG{xspf/mplscreencolor}|replace{#,0x}|sinon{0x000000}})]

[(#SET{autostart,#ENV{autostart,#CONFIG{xspf/mplautostart}|sinon{false}}})]
[(#SET{bufferlength,#ENV{bufferlength,#CONFIG{xspf/mplbufferlength}|sinon{1}}})]
[(#SET{displayclick,#ENV{displayclick,#CONFIG{xspf/mpldisplayclick}|sinon{play}}})]
[(#SET{icons,#ENV{icons,#CONFIG{xspf/mplicons}|sinon{true}}})]
[(#SET{linktarget,#ENV{linktarget,#CONFIG{xspf/mpllinktarget}}})]
[(#SET{jwlogo,#ENV{jwlogo,#CONFIG{xspf/mpllogo}}})]
[(#SET{mute,#ENV{mute,#CONFIG{xspf/mplmute}|sinon{false}}})]
[(#SET{quality,#ENV{quality,#CONFIG{xspf/mplquality}|sinon{true}}})]
[(#SET{repeat,#ENV{repeat,#CONFIG{xspf/mplrepeat}|sinon{none}}})]
[(#SET{shuffle,#ENV{shuffle,#CONFIG{xspf/mplshuffle}|sinon{false}}})]
[(#SET{stretching,#ENV{stretching,#CONFIG{xspf/mplstretching}|sinon{uniform}}})]
[(#SET{volume,#ENV{volume,#CONFIG{xspf/mplvolume}|sinon{90}}})]

[(#SET{javascriptid,#ENV{javascriptid,#CONFIG{xspf/mpljavascriptid}}})]

[(#SET{prerolllocation,#ENV{prerolllocation,#CONFIG{xspf/mplprerolllocation}}})]
[(#SET{postrolllocation,#ENV{postrolllocation,#CONFIG{xspf/mplpostrolllocation}}})]
[(#SET{prerolllink,#ENV{prerolllink,#CONFIG{xspf/mplprerolllink}}})]
[(#SET{postrolllink,#ENV{postrolllink,#CONFIG{xspf/mplpostrolllink}}})]
[(#SET{creator,#ENV{creator}})]

<noscript><p><:xspf:js_necessaire:></p></noscript>
<!-- alternative texte pour ceux qui ont le js desactive -->

<div id="mediaplayer_container[_(#ENV{id})]_[(#GET{objet_spip})][_(#GET{objet_val})]" class="xspf_player" style="[(#GET{align}|=={center}|?{margin:auto; text-align:center;float:[(#GET{align})]})]">
	<p>
		<:xspf:get_player{url=http://get.adobe.com/fr/flashplayer/}:>
	</p>
</div>

<script type="text/javascript">
// <![CDATA[
	
	var flashvars[_(#ENV{id})][_(#GET{objet_val})] = {};
		flashvars[_(#ENV{id})][_(#GET{objet_val})].file = encodeURIComponent("[(#ENV{domaine,#URL_PAGE{xspf}}|parametre_url{type,#GET{type}}|parametre_url{prerolllocation,[(#GET{prerolllocation})],'&'}|parametre_url{postrolllocation,[(#GET{postrolllocation})],'&'}|parametre_url{objet,#GET{objet},'&'}|parametre_url{prerolllink,[(#GET{prerolllink})],'&'}|parametre_url{postrolllink,[(#GET{postrolllink})],'&'}|parametre_url{creator,[(#ENV{creator})],'&'}|parametre_url{[(#GET{objet_spip,x})],[(#GET{objet_val,x})],'&'}|url_absolue)]");
		
		// Layout
		flashvars[_(#ENV{id})][_(#GET{objet_val})].controlbar ="#GET{controlbar}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].height = "#GET{height}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].width = "#GET{width}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].playlist = "#GET{playliste}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].playlistsize = "#GET{playlistesize}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].skin = "#GET{skin}";
		
		// Colors
		flashvars[_(#ENV{id})][_(#GET{objet_val})].backcolor = "#GET{backcolor}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].frontcolor = "#GET{frontcolor}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].lightcolor = "#GET{lightcolor}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].screencolor = "#GET{screencolor}";
		
		//Behaviour
		flashvars[_(#ENV{id})][_(#GET{objet_val})].autostart = "#GET{autostart}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].bufferlength = "#GET{bufferlength}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].displayclick = "#GET{displayclick}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].fullscreen = "#GET{allowfullscreen}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].icons = "#GET{icons}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].linktarget = "#GET{linktarget}";
		[(#GET{jwlogo}|!={''}|oui)flashvars[_(#ENV{id})][_(#GET{objet_val})].logo = "#GET{jwlogo}";]
		flashvars[_(#ENV{id})][_(#GET{objet_val})].mute = "#GET{mute}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].quality = "#GET{quality}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].repeat = "#GET{repeat}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].shuffle = "#GET{shuffle}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].stretching = "#GET{stretching}";
		flashvars[_(#ENV{id})][_(#GET{objet_val})].volume = "#GET{volume}";
	
	var params[_(#ENV{id})][_(#GET{objet_val})] = {};
  		params[_(#ENV{id})][_(#GET{objet_val})].menu= "#GET{menu}";
		params[_(#ENV{id})][_(#GET{objet_val})].wmode = "#GET{wmode}";
		params[_(#ENV{id})][_(#GET{objet_val})].allowfullscreen = "#GET{allowfullscreen}";

	var attributes[_(#ENV{id})][_(#GET{objet_val})] = {};
  		attributes[_(#ENV{id})][_(#GET{objet_val})].id= "[(#GET{javascriptid,mediaplayer})]_[(#GET{objet_spip})][_(#GET{objet_val})]";
  		attributes[_(#ENV{id})][_(#GET{objet_val})].name= "[(#GET{javascriptid,mediaplayer})]_[(#GET{objet_spip})][_(#GET{objet_val})]";

	$(document).ready(function() {
		swfobject.embedSWF("#CHEMIN{lib/mediaplayer/player.swf}", "mediaplayer_container[_(#ENV{id})]_[(#GET{objet_spip})][_(#GET{objet_val})]", "#GET{width}", "#GET{height}", "9.0.0","#CHEMIN{lib/swfobject/expressInstall.swf}", flashvars[_(#ENV{id})][_(#GET{objet_val})], params[_(#ENV{id})][_(#GET{objet_val})], attributes[_(#ENV{id})][_(#GET{objet_val})]);
	});
// ]]>
</script>

[(#REM)
Assistant wizard pour personnaliser les variables
http://www.longtailvideo.com/support/jw-player-setup-wizard
Toutes les options du mediaplayer des flashvars sont disponibles ici 
http://developer.longtailvideo.com/trac/wiki/FlashVars]
