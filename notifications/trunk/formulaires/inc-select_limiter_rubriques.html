<B_limiter_rubriques>
<ul class='hierarchie'>
<BOUCLE_limiter_rubriques(RUBRIQUES){racine}{par num titre,titre}{tout}{tout_voir}>
	<li[(#ID_RUBRIQUE|in_any{#ENV{limiter_rubriques}})class='checked']>
		<div class='choix'>
			<input type='checkbox' name='limiter_rubriques[]' value='#ID_RUBRIQUE' id='rub#ID_RUBRIQUE' [(#ID_RUBRIQUE|in_any{#ENV{limiter_rubriques}})checked='checked']/>
			<label for='rub#ID_RUBRIQUE'>#TITRE</label>
		</div>
		<B_enfants><ul>
			<BOUCLE_enfants(RUBRIQUES){id_parent}{par num titre,titre}{tout}{tout_voir}>
			<li[(#ID_RUBRIQUE|in_any{#ENV{limiter_rubriques}})class='checked']>
			<div class='choix'>
				<input type='checkbox' name='limiter_rubriques[]' value='#ID_RUBRIQUE' id='rub#ID_RUBRIQUE' [(#ID_RUBRIQUE|in_any{#ENV{limiter_rubriques}})checked='checked']/>
				<label for='rub#ID_RUBRIQUE'>#TITRE</label>
			</div>
			<BOUCLE_rec(BOUCLE_enfants)/>
			</li>
			</BOUCLE_enfants>
		</ul>
		</B_enfants>
	</li>
</BOUCLE_limiter_rubriques>
</ul>
<div class="choix">
<input id="toutselect" type="checkbox" /><label for='toutselect'><:notifications:tout_cocher_label:></label>
</div>
<script type="text/javascript">
jQuery(document).ready(function($)
{
	$('#toutselect').click(function() {
	
	// on cherche les checkbox à l'intérieur de la class  'hierarchie'
	var tout = $(".hierarchie").find(':checkbox'); 
	if(this.checked){ // si 'toutselect' est coché
		tout.prop('checked', true); 
	}else{ // si on décoche 'toutselect'
		tout.prop('checked', false);
	}          
	});
});
</script>
</B_limiter_rubriques>