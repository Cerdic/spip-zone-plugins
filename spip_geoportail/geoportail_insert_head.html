<script type="text/javascript">
	/** Chargement de l'API Geoportail */
	if (window.__Geoportal$timer===undefined) {
            var __Geoportal$timer= null;
        }

	function checkApiLoading(retryClbk,clss) 
	{	if (__Geoportal$timer!=null) 
		{	//clearTimeout: annule le minuteur "__Geoportal$timer" avant sa fin
			window.clearTimeout(__Geoportal$timer);
			__Geoportal$timer= null;
		}

		/**
		 * Il se peut que l'init soit execute avant que l'API ne soit chargee
		 * Ajout d'un code temporisateur qui attend 300 ms avant de relancer l'init
		 */
		var f;
		for (var i=0, l= clss.length; i<l; i++) 
		{	try {
				f= eval(clss[i]);
			} catch (e) {
				f= undefined;
			}
			if (typeof(f)==='undefined') {
				__Geoportal$timer= window.setTimeout(retryClbk, 300);
				return false;
			}
		}
		return true;
	}

	function loadAPI() 
	{	// on attend que les classes soient chargées
		if (checkApiLoading(loadAPI,['OpenLayers','Geoportal','Geoportal.Viewer','Geoportal.Viewer.Default'])===false) {
			return;
		}

		// on charge la configuration de la clef API, puis on charge l'application
		Geoportal.GeoRMHandler.getConfig(['#KEY'], null, null, {
			onContractsComplete: function(){ jQuery.geoportail.initMap();}
		});
	}
</script>

<!--_GEOPORTAIL_HEADER_-->
[<link rel="stylesheet" href="(#CHEMIN{css/jqdialog.css})" type="text/css"  />]
[<link rel="stylesheet" href="(#CHEMIN{css/geoportail.css})" type="text/css" />]
[<link rel="stylesheet" href="(#CHEMIN{css/geoportail_carte.css})" type="text/css" />]
<!-- IE8 compatibility mode pour la version 1.0b4 -->
<!--[if IE 8]>
<meta http-equiv="X-UA-Compatible" content="IE=7"/>
<![endif]-->