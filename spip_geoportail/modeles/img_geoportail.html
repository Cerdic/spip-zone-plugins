[(#REM) 
	Affichage d'un document dans une carte geoportail (sous forme d'une image ou de sa vignette)
	
	Pour afficher le document xx :
	<imgxx|geoportail|id_geoportail=0|taille=20> 
	
	Parametres :
	- id_geoportail : id de la carte ou afficher l'image
	- taille : taille de l'image sur la carte
	- bord : taille du bord (en px)
	- couleur : couleur du bord
	- align : top, left, bottom, right ou combinaison : top-left...
]
<BOUCLE_doc(DOCUMENTS){geoposition}{id_document}>
<script language=javascript>
    var att = { classe:'document', id_document:#ID_DOCUMENT, name:"[(#TITRE|attribut_html)]", extension:"#EXTENSION", taille:"[(#TAILLE|taille_en_octets)]", width:"#LARGEUR", heigth:"#HAUTEUR", img:"[(#LOGO_DOCUMENT||extraire_attribut{src})]", url:"#URL_DOCUMENT", description:"[(#DESCRIPTIF|addslashes|replace{\n,''}|replace{\r,''})]" };
	// Afficher
	[(#SET{largeur,[(#LOGO_DOCUMENT||image_reduire{40}|largeur|plus{[(#ENV{bord,4})]})]})]
	[(#SET{hauteur,[(#LOGO_DOCUMENT||image_reduire{40}|hauteur|plus{[(#ENV{bord,4})]})]})]
	[(#ENV{bord,4}|!={0}|?{
	$.geoportail.addImg ([(#ENV{id_geoportail,0})], #ID_DOCUMENT, "[(#ENV{titre}|sinon{[(#TITRE|attribut_html)]})]", #LON, #LAT, "[(#LOGO_DOCUMENT||image_reduire{40}|image_recadre{#GET{largeur},#GET{hauteur},center,#ENV{couleur,#FFFFFF}}|extraire_attribut{src})]", "[(#ENV{align})]", "[(#ENV{taille,20})]", att);
	,
	$.geoportail.addImg ([(#ENV{id_geoportail,0})], #ID_DOCUMENT, "[(#ENV{titre}|sinon{[(#TITRE|attribut_html)]})]", #LON, #LAT, "[(#LOGO_DOCUMENT||extraire_attribut{src})]", "[(#ENV{align})]", "[(#ENV{taille,20})]", att);
	})]

    if ("[(#ENV{align})]" == "center")
		$.geoportail.onLoad([(#ENV{id_geoportail,0})], function(map,id){ map.getMap().setCenterAtLonLat(#LON, #LAT, #ZOOM); } );
		
</script>
</BOUCLE_doc>
