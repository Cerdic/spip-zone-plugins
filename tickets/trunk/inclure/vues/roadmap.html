<BOUCLE_versions(TICKETS){fusion version}{!par version}{version != ''}>
[(#SET{ouvert,0})][(#SET{resolu,0})][(#SET{ferme,0})][(#SET{redac,0})]
<div class="ajax">
	<B_tickets_versions>
	[<h2 class="h2">(#VERSION|sinon{<:tickets:info_sans_version:>})[ ((#GRAND_TOTAL))]</h2>]
	<BOUCLE_tickets_versions(TICKETS){version = #VERSION**}>
	[(#STATUT|=={ouvert}|oui)[(#SET{ouvert,#GET{ouvert}|plus{1}})]]
	[(#STATUT|=={resolu}|oui)[(#SET{resolu,#GET{resolu}|plus{1}})]]
	[(#STATUT|=={ferme}|oui)[(#SET{ferme,#GET{ferme}|plus{1}})]]
	</BOUCLE_tickets_versions>
	[(#SET{todo,#GRAND_TOTAL|moins{#GET{ferme}}|moins{#GET{resolu}}|div{#GRAND_TOTAL}|mult{100}})]
	[(#SET{percent_done,#VAL{100}|moins{#GET{todo}}})]
	<div class="infos_version">
		<table class="progress" style="width:50%">
			<tbody>
				<tr>
					<td class="closed" style="width:[(#GET{percent_done})%]"></td>
					<td class="todo" style="width:[(#GET{todo})%]"></td>
				</tr>
			</tbody>
		</table>
		<p class="progress">[(#GET{percent_done}|round)%]</p>
		<p class="progress_info">[(#GRAND_TOTAL|singulier_ou_pluriel{tickets:info_demande,tickets:info_demandes})][ - (#GET{resolu}|singulier_ou_pluriel{tickets:info_demande_resolue,tickets:info_demandes_resolues})][ - (#GET{ouvert}|singulier_ou_pluriel{tickets:info_demande_ouverte,tickets:info_demandes_ouvertes})][ - (#GET{ferme}|singulier_ou_pluriel{tickets:info_demande_fermee,tickets:info_demandes_fermees})]</p>
	</div>
	</B_tickets_versions>
	[(#INCLURE{fond=inclure/liste_tickets,env,version=#VERSION**,ajax,tracker="",tri_nom=tickets_version_[(#VERSION|replace{'\.',''})],
		cacher_texte=oui,
		champs_caches=#LISTE{version,maj,date},
		tritickets_version_[(#VERSION|replace{'\.',''})]=statut}|trim)]
</div>
</BOUCLE_versions>
[(#SET{defaut_tri,#ARRAY{
	date,#ENV{date_sens,-1},
	maj,#ENV{date_sens,-1},
	statut,1,
	titre,1,
	tracker,1,
	jalon,1,
	version,1,
	composant,1,
	projet,1,
	severite,1,
	id_ticket,1
}})
][(#SET{hash_pagination,[_tickets_(#ENV{titre}|sinon{pas de chance}|md5|substr{0,4})]})]
#SET{champs_optionnels,#ARRAY}
#SET{champs, #ARRAY{projet,projets,composant,composants,version,versions,jalon,jalons}}
<BOUCLE_champs_optionnels(DATA){source table, #GET{champs}}>
[(#VALEUR|tickets_champ_optionnel_actif|oui)
	#SET{champs_optionnels,#GET{champs_optionnels}|push{#CLE}}
]
</BOUCLE_champs_optionnels>
[(#SET{champs_optionnels,[(#GET{champs_optionnels}|array_diff{#ENV{champs_caches,#LISTE{maj,date}}})]})]
#SET{tout_assignes,#ARRAY}
<BOUCLE_tout_assignes(TICKETS){fusion id_assigne}>#SET{tout_assignes,#GET{tout_assignes}|push{#ID_ASSIGNE}}</BOUCLE_tout_assignes>
#SET{tout_auteurs,#ARRAY}
<BOUCLE_tout_auteurs(TICKETS){fusion id_auteur}>#SET{tout_auteurs,#GET{tout_auteurs}|push{#ID_AUTEUR}}</BOUCLE_tout_auteurs>
#SET{tout_statuts,#ARRAY}
<BOUCLE_statuts(TICKETS){fusion statut}>#SET{tout_statuts,#GET{tout_statuts}|push{#STATUT}}</BOUCLE_statuts>
#SET{tout_trackers,#ARRAY}
<BOUCLE_trackers(TICKETS){fusion tracker}>#SET{tout_trackers,#GET{tout_trackers}|push{#TRACKER}}</BOUCLE_trackers>
#SET{tout_severites,#ARRAY}
<BOUCLE_severites(TICKETS){fusion severite}>#SET{tout_severites,#GET{tout_severites}|push{#SEVERITE}}</BOUCLE_severites>
<B_detaillee>
<div class="tickets[ (#ENV{class})]">
<[(#ENV{niveau_titre,h2}) ]class="#ENV{niveau_titre,h2}"><:tickets:info_sans_version:>[ ((#GRAND_TOTAL))]</[(#ENV{niveau_titre,h2})]>
<div class="ticket"[ id="(#ANCRE_PAGINATION|extraire_attribut{id})"]>
[<p class="pagination">(#PAGINATION)</p>]
[(#COMPTEUR_BOUCLE|>{10}|oui)
<p class="changer_pagination">
	<span class='label'><:tickets:label_paginer_par:></span>
	[(#ENV{pagination_[(#GET{hash_pagination})],#ENV{pagination,10}}|=={10}|?{<strong class='on'>10</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],10}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">10</a>})]
	<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={50}|?{<strong class='on'>50</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],50}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">50</a>})]
	[(#COMPTEUR_BOUCLE|>{50}|oui)<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={100}|?{<strong class='on'>100</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],100}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">100</a>})]]
	[(#COMPTEUR_BOUCLE|>{100}|oui)<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={200}|?{<strong class='on'>200</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],200}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">200</a>})]]
</p>]
<table class="spip tickets">
	<thead>
		<tr>
			<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={statut}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={statut}|non)[(#TRI{statut,#,ajax}|inserer_attribut{rel,nofollow})]]
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={statut}|oui)
					[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,#,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={-1}|oui)[(#TRI{>,#,ajax}|inserer_attribut{rel,nofollow})]]]
			</th>
			<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={id_ticket}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={id_ticket}|non)[(#TRI{id_ticket,#,ajax}|inserer_attribut{rel,nofollow})]]
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={id_ticket}|oui)
					[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,#,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={-1}|oui)[(#TRI{>,#,ajax}|inserer_attribut{rel,nofollow})]]]
			</th>
			<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={titre}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={titre}|non)[(#TRI{titre,<:tickets:champ_titre:>,ajax}|inserer_attribut{rel,nofollow})]]
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={titre}|oui)
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_titre:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_titre:>,ajax}|inserer_attribut{rel,nofollow}|inserer_attribut{rel,nofollow})]]]
			</th>
			[(#ENV{tracker}|non)<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={tracker}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={tracker}|non)[(#TRI{tracker,<:tickets:champ_type:>,ajax}|inserer_attribut{rel,nofollow})]]
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={tracker}|oui)
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_type:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_type:>,ajax}|inserer_attribut{rel,nofollow})]]]
			</th>]
			<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={severite}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={severite}|non)[(#TRI{severite,<:tickets:champ_importance:>,ajax}|inserer_attribut{rel,nofollow})]]
				[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={severite}|oui)
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_importance:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_importance:>,ajax}|inserer_attribut{rel,nofollow})]]]
			</th>
			[(#VAL{projet}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={projet}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={projet}|non)[(#TRI{projet,<:tickets:champ_projet:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={projet}|oui)
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_projet:>,ajax}|inserer_attribut{rel,nofollow})]]
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_projet:>,ajax}|inserer_attribut{rel,nofollow})]]]
				</th>
			]
			[(#VAL{composant}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={composant}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={composant}|non)[(#TRI{composant,<:tickets:champ_composant:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={composant}|oui)
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_composant:>,ajax}|inserer_attribut{rel,nofollow})]]
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_composant:>,ajax}|inserer_attribut{rel,nofollow})]]]
				</th>
			]
			[(#VAL{version}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={version}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={version}|non)[(#TRI{version,<:tickets:champ_version:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={version}|oui)
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_version:>,ajax}|inserer_attribut{rel,nofollow})]]
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_version:>,ajax}|inserer_attribut{rel,nofollow})]]]
				</th>
			]
			[(#VAL{jalon}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<th[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={jalon}|oui)class="tri[(#ENV{sens#ENV{tri_nom,_detaillee},1}|=={1}|?{' asc',' desc'})]"]>
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={jalon}|non)[(#TRI{jalon,<:tickets:champ_jalon:>,ajax}|inserer_attribut{rel,nofollow})]]
					[(#ENV{tri#ENV{tri_nom,_detaillee}}|=={jalon}|oui)
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={1}|ou{#ENV{sens#ENV{tri_nom,_detaillee}}|non}|oui)[(#TRI{<,<:tickets:champ_jalon:>,ajax}|inserer_attribut{rel,nofollow})]]
						[(#ENV{sens#ENV{tri_nom,_detaillee}}|=={-1}|oui)[(#TRI{>,<:tickets:champ_jalon:>,ajax}|inserer_attribut{rel,nofollow})]]]
				</th>]
		</tr>
	</thead>
	<tbody>
	<BOUCLE_detaillee(TICKETS){recherche?}{id_auteur?}{id_auteur IN #ENV{auteurs,#GET{tout_auteurs}}}{id_auteur !IN #ENV{id_auteur_non,#ARRAY{0,999999999999}}}{id_assigne?}{id_assigne IN #ENV{assignes,#GET{tout_assignes}}}{id_assigne !IN #ENV{id_assigne_non,#ARRAY{0,999999999999}}}{statut IN #ENV{statuts,#GET{tout_statuts}}}{tracker?}{tracker IN #ENV{trackers,#GET{tout_trackers}}}{severite?}{severite IN #ENV{severites,#GET{tout_severites}}}{version=''}{tri #ENV{order,date},#GET{defaut_tri},#ENV{tri_nom,detaillee}}{date > #ENV{date_debut,2000-01-01}}{date < #ENV{date_fin,2100-01-01}}{pagination #ENV{pagination_#GET{hash_pagination},#ENV{pagination,10}} #GET{hash_pagination}}>
		<tr class="[(#COMPTEUR_BOUCLE|alterner{odd,even})]">
			<td><a href="[(#SELF|parametre_url{statut,#STATUT})]">[(#STATUT|tickets_icone_statut{true})]</a></td>
			<td><strong class="#EDIT{titre}"><a href="[(#URL_TICKET)]">##ID_TICKET</a></strong></td>
			<td>
				<a href="[(#URL_TICKET)]">#TITRE</a><br />
				[(#ENV{cacher_texte}|!={oui}|oui)[(#TEXTE|couper{#ENV{couper}})]]
			</td>
			[(#REM) Si le tracker est explicite, on ne l'affiche pas ]
			[(#ENV{tracker}|non)<td>[<a href="[(#SELF|parametre_url{tracker,#TRACKER**})]">(#TRACKER|tickets_texte_tracker)</a>]</td>]
			<td>
				[<a href="[(#SELF|parametre_url{severite,#SEVERITE**})]">(#SEVERITE|tickets_icone_severite{true})
				[&nbsp;(#SEVERITE|tickets_texte_severite)]</a>]
			</td>
			[(#VAL{projet}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<td class="#EDIT{projet}"><a href="[(#SELF|parametre_url{projet,#PROJET**})]">[(#PROJET|sinon{-})]</a></td>
			]
			[(#VAL{composant}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<td class="#EDIT{composant}"><a href="[(#SELF|parametre_url{composant,#COMPOSANT**})]">[(#COMPOSANT|sinon{-})]</a></td>
			]
			[(#VAL{version}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<td class="#EDIT{version}"><a href="[(#SELF|parametre_url{version,#VERSION**})]">[(#VERSION|sinon{-})]</a></td>
			]
			[(#VAL{jalon}|in_array{#GET{champs_optionnels,#ARRAY}}|oui)
				<td class="#EDIT{jalon}"><a href="[(#SELF|parametre_url{jalon,#JALON**})]">[(#JALON|sinon{-})]</a></td>
			]
		</tr>
	</BOUCLE_detaillee>
	</tbody>
</table>
[(#COMPTEUR_BOUCLE|>{10}|oui)
<p class="changer_pagination">
	<span class='label'><:tickets:label_paginer_par:></span>
	[(#ENV{pagination_[(#GET{hash_pagination})],#ENV{pagination,10}}|=={10}|?{<strong class='on'>10</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],10}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">10</a>})]
	<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={50}|?{<strong class='on'>50</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],50}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">50</a>})]
	[(#COMPTEUR_BOUCLE|>{50}|oui)<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={100}|?{<strong class='on'>100</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],100}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">100</a>})]]
	[(#COMPTEUR_BOUCLE|>{100}|oui)<span class="sep">|</span>
	[(#ENV{pagination_[(#GET{hash_pagination})]}|=={200}|?{<strong class='on'>200</strong>,<a href="[(#SELF|parametre_url{pagination_[(#GET{hash_pagination})],200}|parametre_url{debut[(#GET{hash_pagination})],''}|ancre_url{pagination[(#GET{hash_pagination})]})]" class="ajax bouton" rel="nofollow">200</a>})]]
</p>]
[<p class="pagination">(#PAGINATION)</p>]
</div>
</div>
</B_detaillee>
<//B_detaillee>
</B_versions>
