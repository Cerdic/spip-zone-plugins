[(#SET{legendes,[(#LISTE{<:tickets:cfg_lgd_autorisation_ecrire:>,<:tickets:cfg_lgd_autorisation_modifier:>,<:tickets:cfg_lgd_autorisation_assigner:>,<:tickets:cfg_lgd_autorisation_assigneretre:>,<:tickets:cfg_lgd_autorisation_commenter:>,<:tickets:cfg_lgd_autorisation_epingler:>})]})]
[(#SET{prefixes,#LISTE{ecrire_,modifier_,assigner_,assigneretre_,commenter_,epingler_}})]
<B_bloc_autorisation>
<[(#DIV|sinon{ul})] class='editer-groupe'>
	<BOUCLE_bloc_autorisation(DATA){source table, #GET{legendes}}>
	#SET{prefixe, #GET{prefixes}|table_valeur{#CLE}}
	<[(#DIV|sinon{li})] class="fieldset">
		<fieldset>
			<h3 class="legend">#VALEUR</h3>
			[(#GET{prefixe}|=={modifier_}|oui)
			<p class="explication">
				<:tickets:explication_autoriser_modifier_base:>
			</p>]
			<[(#DIV|sinon{ul})] class='editer-groupe'>
			[(#GET{prefixe}|in_array{#LISTE{assigner_,commenter_}}|oui)
				[(#SAISIE{case, [(#GET{prefixe})]modifieur,
					label=<:tickets:cfg_lbl_autoriser_modifier:>,
					label_case=<:tickets:cfg_lbl_autoriser_modifier_case:>,
					defaut=on})]
			]
			[(#REM) <!-- Choix de la methode d'autorisation --> ]
				[(#SAISIE{radio, [(#GET{prefixe})]type,
					label=<:tickets:cfg_lbl_type_autorisation:>,
					explication=<:tickets:cfg_inf_type_autorisation:>,
					datas=#ARRAY{
						webmestre,<:tickets:cfg_lbl_autorisation_webmestre:>,
						par_statut,<:tickets:cfg_lbl_autorisation_statuts:>,
						par_auteur,<:tickets:cfg_lbl_autorisation_auteurs:>},
					defaut=par_statut})]
			</[(#DIV|sinon{ul})]>
			[(#REM) <!-- Methode par statut d'auteurs (choix multiple) --> ]
			<[(#DIV|sinon{ul})] id="[(#GET{prefixe})]bloc_par_statut" class="editer-groupe [(#GET{prefixe})]bloc[(#ENV{[(#GET{prefixe})type]}|non) visible]">
				[(#CONFIG{[(#GET{prefixe})type]}|non)
					[(#GET{prefixe}|in_array{#LISTE{ecrire_,assigner_,modifier_,epingler_}}|oui)
						#SET{defaut,#LISTE{0minirezo}}]
					[(#GET{prefixe}|in_array{#LISTE{commenter_}}|oui)
						#SET{defaut,#LISTE{0minirezo,1comite}}]
				]

				[(#SAISIE{statuts_auteurs,[(#GET{prefixe})]statuts,
					label=<:tickets:cfg_lbl_statuts_auteurs:>,
					afficher_tous=oui,
					defaut=#GET{defaut},
					multiple=oui})]
			</[(#DIV|sinon{ul})]>
			[(#REM) <!-- Methode par id d'auteurs (choix multiple) --> ]
			<[(#DIV|sinon{ul})] id="[(#GET{prefixe})]bloc_par_auteur" class="editer-groupe [(#GET{prefixe})]bloc">
				[(#SAISIE{auteurs,[(#GET{prefixe})]auteurs,
					label=<:tickets:cfg_lbl_liste_auteurs:>,
					multiple=oui,
					option_statut=oui})]
			</[(#DIV|sinon{ul})]>
		</fieldset>
		<script type="text/javascript">
		//<![CDATA[
			jQuery(function($) {
				// on cache tous les blocs du meme prefixe
				$(".[(#GET{prefixe})]bloc").not('.visible').hide();
				//on recupere la valeur de celui qui est deja selectionne
				var checked = jQuery("input[name='[(#GET{prefixe})]type']:checked").val();
				// pour l'afficher
				$("#[(#GET{prefixe})]bloc_"+checked).show();
				// si une checkbox change
				$("input[name='[(#GET{prefixe})]type']").change(function() {
					var inputval = $(this).val();
					// on cache tous les blocs du meme prefixe
					$(".[(#GET{prefixe})]bloc").fadeOut('slow',function(){
						// pour afficher celui qui correspond a la checkbox selectionnee
						jQuery("#[(#GET{prefixe})]bloc_"+inputval).fadeIn();
					});
					$(this).blur();
				});
			});
		//]]>
		</script>
	</[(#DIV|sinon{li})]>
	</BOUCLE_bloc_autorisation>
</[(#DIV|sinon{ul})]>
</B_bloc_autorisation>
