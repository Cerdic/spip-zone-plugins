<div class="formulaire_spip formulaire_configurer formulaire_#FORM">

	<h3 class="titrem"><:tickets:cfg_form_tickets_general:></h3>

	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
	<form method="post" action="#ENV{action}"><div>
		#ACTION_FORMULAIRE{#ENV{action}}
		<ul>
			<li class="fieldset">
				<fieldset>
				<h3 class="legend"><:tickets:cfg_lgd_champs_optionnels:></h3>
				<ul>
					[(#PLUGIN{medias}|oui)
						[(#SAISIE{case, joindre_fichiers,
							label=<:tickets:cfg_lbl_joindre_fichiers:>,
							label_case=<:tickets:cfg_lbl_case_joindre_fichiers:>})]
						[(#SAISIE{input, formats_documents_ticket,
							label=<:tickets:cfg_lbl_formats_documents_ticket:>,
							explication=<:tickets:cfg_explication_formats_documents_ticket:>})]
					]
					#SET{tab_groupes, #ARRAY}
					<BOUCLE_groupes(GROUPES_MOTS){tables_liees==#VAL{'(^|,)tickets($|,)'}}{par num titre}>
						#SET{tab_groupes, #GET{tab_groupes}|plus{#ARRAY{#ID_GROUPE,#TITRE}}}
					</BOUCLE_groupes>
						#SET{groupes, #GET{tab_groupes}|implode{', '}}
					</B_groupes>
						#SET{groupes, #VAL{tickets:cfg_lbl_lier_mots_aucun}|_T}
					<//B_groupes>
					#SET{explication, #VAL{tickets:cfg_lbl_lier_mots_explication}|_T{#ARRAY{groupes,#GET{groupes}}}}
					<li>
						<label><:tickets:cfg_lbl_lier_mots:></label>
						<p class="explication">#GET{explication}</p>
					</li>
					#SET{explication, #VAL{tickets:cfg_lbl_colonnes_groupesmots_explication}|_T{#ARRAY{groupes,#GET{groupes}}}}
					[(#SAISIE{radio, colonnes_groupesmots,
						label=<:tickets:cfg_lbl_colonnes_groupesmots:>,
						explication=#GET{explication},
						defaut=aucune,
						datas=[(#ARRAY{
							aucune,<:tickets:cfg_bouton_radio_aucune_colonne:>,
							une_par_groupe,<:tickets:cfg_bouton_radio_une_colonne_par_groupe:>,
							une_par_groupe_important,<:tickets:cfg_bouton_radio_une_colonne_par_groupe_important:>,
							une_pour_tous,<:tickets:cfg_bouton_radio_une_colonne_pour_tous_les_groupes:>,
					})]})]
					[(#SAISIE{selection, id_groupe_versions,
						label=<:tickets:cfg_groupe_versions:>,
						explication=<:tickets:cfg_groupe_versions_explication:>,
						defaut='',
						option_intro=<:tickets:cfg_groupe_versions_aucun:>,
						datas=#GET{tab_groupes}})]
					<li class="editer editer_tickets_associer">
						<label><:tickets:info_tickets_cles_association:></label>
						<INCLURE{fond=formulaires/inc-choisir-tables-liees,selected=#ENV*{tables_liees},name=tables_liees} />
					</li>
				</ul>
				</fieldset>
			</li>
			
			<li class="fieldset">
				<fieldset>
				<h3 class="legend"><:tickets:cfg_lgd_champs_options_autres:></h3>
				<ul>
				[(#PLUGIN{ZPIP}|ou{#PLUGIN{Z}}|oui)
					[(#SAISIE{case, desactiver_public,
						label=<:tickets:cfg_lbl_desactiver_public:>,
						label_case=<:tickets:cfg_explication_desactiver_public:>,
						defaut=''})]
					]
				[(#PLUGIN{ZPIP}|ou{#PLUGIN{Z}}|non)
					<li>
						<label><:tickets:cfg_lbl_desactiver_public:></label>
						<p class="explication"><:tickets:message_zpip_inactif:></p>
					</li>
				]
				[(#SAISIE{case, cacher_moteurs,
					label_case=<:tickets:cfg_explication_cacher_moteurs:>,
					label=<:tickets:cfg_lbl_cacher_moteurs:>,
					defaut=on})]
				[(#PLUGIN{ZPIP}|ou{#PLUGIN{Z}}|oui)
					[(#SAISIE{case, notification_publique,
						label=<:tickets:cfg_lbl_notification_publique:>,
						label_case=<:tickets:cfg_lbl_case_notification_publique:>})]
				]
				[(#PLUGIN{ZPIP}|ou{#PLUGIN{Z}}|non)
					<li>
						<label><:tickets:cfg_lbl_notification_publique:></label>
						<p class="explication"><:tickets:message_zpip_inactif:></p>
					</li>
				]
				[(#SAISIE{radio, forums_publics,
					label=<:tickets:cfg_lbl_forums_publics:>,
					defaut=posteriori,
					datas=[(#ARRAY{
						non,<:tickets:cfg_bouton_radio_desactiver_forum_public:>,
						posteriori,<:forum:bouton_radio_publication_immediate:>,
						priori,<:forum:bouton_radio_moderation_priori:>,
						abo,<:forum:bouton_radio_enregistrement_obligatoire:>,
					})]})]
				[(#EVAL{defined("_TICKETS_AUTORISATION_NOTIFIER")}|non)
					[(#SAISIE{radio,notif_destinataires,
						label=<:tickets:cfg_lbl_notif_destinataires:>,
						defaut=assigne,
						explication=<:tickets:explication_notif_destinataire:>,
						datas=[(#ARRAY{
							assigne,<:tickets:cfg_notif_assigne:>,
							webmestre,<:tickets:cfg_notif_webmestre:>,
							0minirezo,<:tickets:cfg_notif_admin:>,
							1comite,<:tickets:cfg_notif_auteur:>,
							liste,<:tickets:cfg_notif_liste:>,
						})]}
					)]

					[(#SAISIE{auteurs,notif_auteurs,
						label=<:tickets:cfg_notif_liste_auteurs:>,
						multiple=oui,
						option_statut=oui})]
				]
		<script type="text/javascript">
		//<![CDATA[
			jQuery(document).ready(function() {
				// on cache la liste des auteurs
				//jQuery("li.editer_notif_auteurs").not('.visible').hide();
				function verifier_affichage_notif_auteurs(){
					if(jQuery('input[name=notif_destinataires]:checked').val()=='liste'){
						jQuery("li.editer_notif_auteurs").not('.visible').show();
						}
					else{
						jQuery("li.editer_notif_auteurs").not('.visible').hide();
					}
				};
				verifier_affichage_notif_auteurs();
				jQuery("input[name=notif_destinataires]").change(function(){verifier_affichage_notif_auteurs()});
			});
		//]]>
		</script>
				</ul>
				</fieldset>
			</li>
		</ul>
		<input type="hidden" name="_meta_casier" value="tickets/general" />
		<p class="boutons">
			<input type="submit" name="_cfg_ok" class="submit" value="<:bouton_valider:>" />
		</p>
	</div></form>
</div>
