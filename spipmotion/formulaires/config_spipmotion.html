<!-- nom=spipmotion -->
<!-- autoriser=configurer -->
<!-- refus=<:cfg:refus_configuration_administrateur:> -->
#CACHE{0}

<div class="formulaire_spip formulaire_configurer_spipmotion">

[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
[(#CONFIG{spipmotion_casse}|=={oui}|oui)
	#SET{erreur_chemin,true}
	<p class="reponse_formulaire reponse_formulaire_erreur"><:spipmotion:erreur_chemin_ffmpeg:></p>]

[(#REM) un mot pour dire que le script doit etre executable ... ]
[(#SET{script,[(#VAL{#EVAL{_DIR_PLUGIN_SPIPMOTION}script_bash/spipmotion.sh})]})]
[(#SET{scriptperms,[(#VAL{%o}|sprintf{[(#GET{script}|fileperms)]})]})]

<BOUCLE_script_perms(CONDITION){si #GET{scriptperms}|substr{-4}|>={700}|oui}>
<BOUCLE_script_lisible(CONDITION){si #GET{script}|is_readable|oui}>
<form method="post" action="#ENV{action}">
<div>
	#ACTION_FORMULAIRE{#ENV{action}}
	<ul>
		<li class="fieldset">
			<fieldset>
				<h3 class="legend"><:spipmotion:options_config:></h3>
				<ul>
					[(#SAISIE{case,encodage_auto,
						label=<:spipmotion:label_encodage_auto:>,
						label_case=<:spipmotion:choix_encodage_auto:>})]
					[(#SAISIE{case,debug_mode,
						label=<:spipmotion:label_debug_mode:>,
						label_case=<:spipmotion:choix_debug_mode:>})]
					<li class="editer editer_chemin[(#ENV{erreur}|table_valeur{chemin}|ou{#GET{erreur_chemin}}|oui)erreur]">
						<label for="champ_chemin"><:spipmotion:chemin_executable:></label>
						<input type="text" name="chemin" value="#ENV{chemin}" id="champ_chemin" class="text" />
					</li>
				</ul>
			</fieldset>
		</li>
		<li class="fieldset">
			<fieldset>
				<h3 class="legend"><:spipmotion:gestion_format_entree:></h3>
				<ul>
					<li>
						<label><:spipmotion:label_extensions_prises_en_charge:></label>
						<div class="explication"><:spipmotion:explications_extensions_prises_en_charge:></div>
						#SET{extensions,#ARRAY}
						<p class="explications"><:spipmotion:extensions_audio:></p>
						<select name="fichiers_audios[]" multiple="multiple">
							<BOUCLE_sons(TYPES_DOCUMENTS){mime_type LIKE audio/%}{extension !IN #GET{extensions}}>
								<option value="#EXTENSION"[(#EXTENSION|in_any{#ENV{fichiers_audios}}|oui) selected="selected"]>#EXTENSION - #MIME_TYPE</option>
								#SET{extensions,#GET{extensions}|push{#EXTENSION}}
							</BOUCLE_sons>
						</select>
						<p><a href="#" class="select_all"><:spipmotion:select_all:></a> <a href="#" class="unselect_all"><:spipmotion:unselect_all:></a></p>

						#SET{videos,#ARRAY|push{mp4}|push{m4v}}
						<BOUCLE_videos(TYPES_DOCUMENTS){mime_type LIKE video/%}{extension !IN #GET{extensions}}>
						#SET{videos,#GET{videos}|push{#EXTENSION}}
						</BOUCLE_videos>
						<p class="explications"><:spipmotion:extensions_video:></p>
						<select name="fichiers_videos[]" multiple="multiple">
							<BOUCLE_videos1(TYPES_DOCUMENTS){extension IN #GET{videos}}>
								#SET{extensions,#GET{extensions}|push{#EXTENSION}}
								<option value="#EXTENSION"[(#EXTENSION|in_any{#ENV{fichiers_videos}}|oui) selected="selected"]>#EXTENSION - #MIME_TYPE</option>
							</BOUCLE_videos1>
						</select>
						<p><a href="#" class="select_all"><:spipmotion:select_all:></a> <a href="#" class="unselect_all"><:spipmotion:unselect_all:></a></p>
					</li>
					<li>
						<label><:spipmotion:label_extensions_prises_en_charge_encodage:></label>
						<div class="explication"><:spipmotion:explications_extensions_prises_en_charge_encodage:></div>
						<p class="explications"><:spipmotion:extensions_audio:></p>
						<B_sons_encodage>
						<select name="fichiers_audios_encodage[]" multiple="multiple">
							<BOUCLE_sons_encodage(TYPES_DOCUMENTS){extension IN #CONFIG{spipmotion/fichiers_audios}}>
								<option value="#EXTENSION"[(#EXTENSION|in_any{#CONFIG{spipmotion/fichiers_audios_encodage}}|oui) selected="selected"]>#EXTENSION - #MIME_TYPE</option>
							</BOUCLE_sons_encodage>
						</select>
						<p><a href="#" class="select_all"><:spipmotion:select_all:></a> <a href="#" class="unselect_all"><:spipmotion:unselect_all:></a></p>
						</B_sons_encodage>

						<p class="explications"><:spipmotion:extensions_video:></p>
						<B_videos1_encodage>
						<select name="fichiers_videos_encodage[]" multiple="multiple">
							<BOUCLE_videos1_encodage(TYPES_DOCUMENTS){extension IN #CONFIG{spipmotion/fichiers_videos}}>
								<option value="#EXTENSION"[(#EXTENSION|in_any{#CONFIG{spipmotion/fichiers_videos_encodage}}|oui) selected="selected"]>#EXTENSION - #MIME_TYPE</option>
							</BOUCLE_videos1_encodage>
						</select>
						<p><a href="#" class="select_all"><:spipmotion:select_all:></a> <a href="#" class="unselect_all"><:spipmotion:unselect_all:></a></p>
						</B_videos1_encodage>
					</li>
				</ul>
			</fieldset>
		</li>
		[(#CONFIG{spipmotion/fichiers_audios_encodage,#ARRAY}|array_merge{#CONFIG{spipmotion/fichiers_videos_encodage,#ARRAY}}|count|>{0}|oui)
			<INCLURE{fond=formulaires/spipmotion_sortie}{env}>
		]
		<B_profils_son>
		<li class="fieldset">
			<fieldset>
				<h3 class="legend"><:spipmotion:profils_encodage_son:></h3>
				<BOUCLE_profils_son(POUR){tableau #CONFIG{spipmotion/fichiers_audios_sortie}}>
					<INCLURE{fond=formulaires/spipmotion_encodage_son}{valeur=#VALEUR}{env}>
				</BOUCLE_profils_son>
			</fieldset>
		</li>
		</B_profils_son>
		<B_profils_video>
		<li class="fieldset">
			<fieldset>
				<h3 class="legend"><:spipmotion:profils_encodage_video:></h3>
				<BOUCLE_profils_video(POUR){tableau #CONFIG{spipmotion/fichiers_videos_sortie}}>
					<INCLURE{fond=formulaires/spipmotion_encodage_video}{valeur=#VALEUR}{env}>
				</BOUCLE_profils_video>
			</fieldset>
		</li>
		</B_profils_video>
	</ul>
	<p class="boutons">
		<input type="submit" name="_cfg_ok" value="<:bouton_valider:>" class="submit" />
		<input type="reset" value="<:cfg:bouton_effacer:>" class="submit" />
	</p>
</div>
</form>
</div>
<script type="text/javascript"><!--
jQuery(document).ready(function(){
	jQuery('a.select_all').click(function(){
		jQuery(this).parent().prev('select').find('option').attr('selected', true);
		return false;
	});
	jQuery('a.unselect_all').click(function(){
		jQuery(this).parent().prev('select').find('option').attr('selected', false);
		return false;
	});
});
// --></script>
</BOUCLE_script_lisible>
<p class="reponse_formulaire reponse_formulaire_erreur"><:spipmotion:verifier_droits:></p>
<//B_script_lisible>
</BOUCLE_script_perms>
<p class="reponse_formulaire reponse_formulaire_erreur"><:spipmotion:verifier_droits:></p>
<//B_script_perms>