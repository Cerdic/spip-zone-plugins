<h4><:spipmotion:profil_encodage{format=#ENV{valeur}}:></h4>
<ul>
	[(#SAISIE{input,width_#ENV{valeur},
		label=<:spipmotion:width_video:>,
		defaut=480,
		size=4})]

	[(#SAISIE{input,height_#ENV{valeur},
		label=<:spipmotion:height_video:>,
		defaut=320,
		size=4})]

	[(#SAISIE{input,bitrate_#ENV{valeur},
		label=<:spipmotion:bitrate:>,
		defaut=418,
		size=4})]

	[(#SAISIE{input,fps_#ENV{valeur},
		label=<:spipmotion:framerate:>,
		defaut=15,
		size=4})]

	<BOUCLE_ogg(CONDITION){si #ENV{valeur}|in_array{#ARRAY|push{ogg}|push{ogv}}|oui}>
		#SET{acodecs_possibles,#ARRAY|push{vorbis}|push{libvorbis}|push{libspeex}|push{flac}}
		#SET{vcodecs_possibles,#ARRAY|push{libtheora}|push{libdirac}}
	</BOUCLE_ogg>
	<BOUCLE_flv(CONDITION){si #ENV{valeur}|=={flv}|oui}>
		[(#REM)
			Voir http://en.wikipedia.org/wiki/Flv#Codec_support
			On ne met pas adpcm car il n'est pas compatible avec le H264
			et ca évite trop de tests
		]
		#SET{acodecs_possibles,#ARRAY|push{libmp3lame}|push{aac}|push{libfaac}|push{libspeex}}
		#SET{vcodecs_possibles,#ARRAY|push{flv}|push{libx264}}
	</BOUCLE_flv>
	<BOUCLE_mp4(CONDITION){si #ENV{valeur}|in_array{#ARRAY|push{mov}|push{mp4}}|oui}>
		#SET{acodecs_possibles,#ARRAY|push{libmp3lame}|push{aac}|push{libfaac}}
		#SET{vcodecs_possibles,#ARRAY|push{libx264}|push{libxvid}|push{mpeg4}|}
	</BOUCLE_mp4>
	<//B_flv>
	<//B_ogg>

	[(#REM)
		On récupère les codecs disponibles dans FFMPEG que l'on a mis dans les métas
	]
	#SET{acodecs_existants,#EVAL{$GLOBALS['meta']['spipmotion_codecs_audio_encode']}}
	#SET{vcodecs_existants,#EVAL{$GLOBALS['meta']['spipmotion_codecs_video_encode']}}

	[(#REM)
		On récupère l'intersection des codecs disponibles avec les codecs possibles
	]
	#SET{acodecs,#GET{acodecs_possibles,#ARRAY}|array_intersect{#GET{acodecs_existants,#ARRAY}|unserialize}}
	#SET{vcodecs,#GET{vcodecs_possibles,#ARRAY}|array_intersect{#GET{vcodecs_existants,#ARRAY}|unserialize}}
	#SET{acodec_defaut,#GET{acodec}|table_valeur{0}}
	#SET{vcodec_defaut,#GET{vcodec}|table_valeur{0}}

	[(#GET{vcodecs}|count|>{0}|oui)
		[(#SAISIE{selection_valeur,vcodec_#ENV{valeur},
			label=<:spipmotion:label_codec_video:>,
			cacher_option_intro=oui,
			defaut=#GET{vcodec_defaut},
			datas=#GET{vcodecs}})]
	]

	[(#GET{acodecs}|count|>{0}|oui)
		[(#SAISIE{selection_valeur,acodec_#ENV{valeur},
			label=<:spipmotion:label_codec_son:>,
			cacher_option_intro=oui,
			defaut=#GET{acodec_defaut},
			datas=#GET{acodecs}})]

		[(#SAISIE{selection,frequence_audio_#ENV{valeur},
			label=<:spipmotion:frequence_audio:>,
			defaut=22050,
			cacher_option_intro=oui,
			datas=#ARRAY{
				11025,11025 Hz,
				22050,22050 Hz,
				44100,44100 Hz,
				48000,48000 Hz}})]

		[(#SAISIE{selection,bitrate_audio_#ENV{valeur},
			label=<:spipmotion:bitrate_audio:>,
			defaut=64,
			cacher_option_intro=oui,
			datas=#ARRAY{
				32,32 kbps,
				64,64 kbps,
				96,96 kbps,
				128,128 kbps,
				192,192 kbps,
				256,256 kbps}})]
	]
</ul>