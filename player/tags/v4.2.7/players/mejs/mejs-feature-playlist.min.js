(function(d){d.extend(mejs.MepDefaults,{loopText:"Repeat On/Off",shuffleText:"Shuffle On/Off",nextText:"Next Track",prevText:"Previous Track",playlistText:"Show/Hide Playlist"});d.extend(MediaElementPlayer.prototype,{buildloop:function(a,b,g,e){var c=this,f=d('<div class="mejs__button mejs__loop-button '+(a.options.loop?c.options.classPrefix+"loop-on":c.options.classPrefix+"loop-off")+'"><button type="button" aria-controls="'+a.id+'" title="'+a.options.loopText+'"></button></div>').appendTo(b).click(function(b){a.options.loop=
!a.options.loop;d(e).trigger("mep-looptoggle",[a.options.loop]);a.options.loop?f.removeClass(c.options.classPrefix+"loop-off").addClass(c.options.classPrefix+"loop-on"):f.removeClass(c.options.classPrefix+"loop-on").addClass(c.options.classPrefix+"loop-off")});c.loopToggle=d(c.controls).find("."+c.options.classPrefix+"loop-button")},loopToggleClick:function(){this.loopToggle.trigger("click")},buildshuffle:function(a,b,g,e){var c=this,f=d('<div class="mejs__button mejs__shuffle-button '+(a.options.shuffle?
c.options.classPrefix+"shuffle-on":c.options.classPrefix+"shuffle-off")+'"><button type="button" aria-controls="'+a.id+'" title="'+a.options.shuffleText+'"></button></div>').appendTo(b).click(function(b){a.options.shuffle=!a.options.shuffle;d(e).trigger("mep-shuffletoggle",[a.options.shuffle]);a.options.shuffle?f.removeClass(c.options.classPrefix+"shuffle-off").addClass(c.options.classPrefix+"shuffle-on"):f.removeClass(c.options.classPrefix+"shuffle-on").addClass(c.options.classPrefix+"shuffle-off")});
c.shuffleToggle=d(c.controls).find("."+c.options.classPrefix+"shuffle-button")},shuffleToggleClick:function(){this.shuffleToggle.trigger("click")},buildprevtrack:function(a,b,g,e){d('<div class="mejs__button mejs__prevtrack-button mejs__prevtrack"><button type="button" aria-controls="'+a.id+'" title="'+a.options.prevText+'"></button></div>').appendTo(b).click(function(c){d(e).trigger("mep-playprevtrack");a.playPrevTrack()});this.prevTrack=d(this.controls).find("."+this.options.classPrefix+"prevtrack-button")},
prevTrackClick:function(){this.prevTrack.trigger("click")},buildnexttrack:function(a,b,g,e){d('<div class="mejs__button mejs__nexttrack-button mejs__nexttrack"><button type="button" aria-controls="'+a.id+'" title="'+a.options.nextText+'"></button></div>').appendTo(b).click(function(c){d(e).trigger("mep-playnexttrack");a.playNextTrack()});this.nextTrack=d(this.controls).find("."+this.options.classPrefix+"nexttrack-button")},nextTrackClick:function(){this.nextTrack.trigger("click")},buildplaylist:function(a,
b,g,e){var c=this;a.options.playlist=d(a.options.playlistSelector).is(":visible");var f=d('<div class="mejs__button mejs__playlist-button '+(a.options.playlist?c.options.classPrefix+"hide-playlist":c.options.classPrefix+"show-playlist")+'"><button type="button" aria-controls="'+a.id+'" title="'+a.options.playlistText+'"></button></div>').appendTo(b).click(function(b){a.options.playlist=!a.options.playlist;d(e).trigger("mep-playlisttoggle",[a.options.playlist]);a.options.playlist?(d(a.options.playlistSelector).show("fast"),
f.removeClass(c.options.classPrefix+"show-playlist").addClass(c.options.classPrefix+"hide-playlist")):(d(a.options.playlistSelector).hide("fast"),f.removeClass(c.options.classPrefix+"hide-playlist").addClass(c.options.classPrefix+"show-playlist"))});c.playlistToggle=d(c.controls).find("."+c.options.classPrefix+"playlist-button")},playlistToggleClick:function(){this.playlistToggle.trigger("click")},playlist_tracks:{},buildplaylistfeature:function(a,b,g,e){var c=this,f=function(a){a=a.split("/");return 0<
a.length?decodeURIComponent(a[a.length-1]):""};this.playlist_tracks=d(a.options.playlistSelector).find(".track[data-url]");this.playlist_tracks.each(function(b,g){var h=d(this);d.trim(h.attr("title"))||h.attr("title",f(h.attr("data-url")));h.attr("data-index",b);d('<div class="mejs__controls"><div class="mejs__button mejs__playpause-button mejs__play" ><button type="button" aria-controls="'+c.id+'" title="'+c.options.playpauseText+'" aria-label="'+c.options.playpauseText+'"></button></div></div>').prependTo(h).click(function(b){b.preventDefault();
b=d(this).closest(".track");b.hasClass("current")?e.paused?(e.play(),b.addClass("playing").removeClass("paused"),d("."+c.options.classPrefix+"play",this).addClass(c.options.classPrefix+"pause").removeClass(c.options.classPrefix+"play")):(e.pause(),b.addClass("paused").removeClass("playing"),d("."+c.options.classPrefix+"pause",this).addClass(c.options.classPrefix+"play").removeClass(c.options.classPrefix+"pause")):(b.addClass("played"),a.playTrack(b));d(this).find("button").focus();return!1});d(this).prepend()});
c.playlist_tracks.eq(0).addClass("current played").siblings().removeClass("current");e.addEventListener("ended",function(a){c.playNextTrack()},!1);e.addEventListener("play",function(a){c.playlist_tracks.filter(".current").find("."+c.options.classPrefix+"play").addClass(c.options.classPrefix+"pause").removeClass(c.options.classPrefix+"play")},!1);e.addEventListener("pause",function(a){c.playlist_tracks.filter(".current").find("."+c.options.classPrefix+"pause").addClass(c.options.classPrefix+"play").removeClass(c.options.classPrefix+
"pause")},!1);a.options.keyActions.push({keys:[34],action:function(a,b){c.playNextTrack()}});a.options.keyActions.push({keys:[33],action:function(a,b){c.playPrevTrack()}})},playNextTrack:function(){var a=this.playlist_tracks.filter(".current"),b=this.playlist_tracks.not(".played");1>b.length&&(this.playlist_tracks.removeClass("played"),b=this.playlist_tracks.not(".current"));this.options.shuffle?a=b.eq(Math.floor(Math.random()*b.length)):(a=parseInt(a.attr("data-index"))+1,a=this.playlist_tracks.eq(a),
1>a.length&&this.options.loop&&(a=this.playlist_tracks.eq(0)));1==a.length&&(a.addClass("played"),this.playTrack(a))},playPrevTrack:function(){var a=this.playlist_tracks.filter(".current"),b=this.playlist_tracks.filter(".played").not(".current");1>b.length&&(this.playlist_tracks.removeClass("played"),b=this.playlist_tracks.not(".current"));this.options.shuffle?b=b.eq(Math.floor(Math.random()*b.length)):(b=parseInt(a.attr("data-index"))-1,b=this.playlist_tracks.eq(b),1>b.length&&this.options.loop&&
(b=this.playlist_tracks.last()));1==b.length&&(a.removeClass("played"),this.playTrack(b))},playTrack:function(a){var b=this;b.options.duration=0;b.pause();b.setSrc(a.attr("data-url"));b.load();setTimeout(function(){b.media.play()},10);a.addClass("current playing").siblings().removeClass("current").removeClass("playing").removeClass("paused");b.playlist_tracks.find("."+b.options.classPrefix+"pause").addClass(b.options.classPrefix+"play").removeClass(b.options.classPrefix+"pause");d("."+b.options.classPrefix+
"play",a).addClass(b.options.classPrefix+"pause").removeClass(b.options.classPrefix+"play")},playTrackURL:function(a){a=this.playlist_tracks.filter('[data-url="'+a+'"]');this.playTrack(a)}})})(mejs.$);