[(#SET{legendes,[(#ARRAY{0,<:feuillederoute:cfg_lgd_autorisation_modifier:>,1,<:feuillederoute:cfg_lgd_autorisation_lire:>})]})]
#SET{prefixes,#ARRAY{0,modifier_,1,lire_}}
<B_bloc_autorisation>
<ul>
	<BOUCLE_bloc_autorisation(DATA){source table, #GET{legendes}}>
	#SET{prefixe, #GET{prefixes}|table_valeur{#CLE}}
	<li class="fieldset">
		<fieldset>
			<h3 class="legend">#VALEUR</h3>
			<ul id="[(#GET{prefixe})]bloc_par_type">
				<li class="editer editer_#GET{prefixe}">
					<label><:feuillederoute:cfg_lbl_type_autorisation:></label>
					<p class="explication"><:feuillederoute:cfg_inf_type_autorisation:></p>
					<div class="choix choix_webmestre">
						<input type='radio' class='radio' name='#GET{prefixe}type' id='#GET{prefixe}_1'[(#ENV{#GET{prefixe}type}|=={webmestre}|oui)checked="checked" ]value="webmestre" />
						<label for="#GET{prefixe}_1"><:feuillederoute:autoriser_uniquement_les_webmestres:></label>
					</div>
					<div class="choix choix_par_statut">
						<input type='radio' class='radio' name='#GET{prefixe}type' id='#GET{prefixe}_2'[(#ENV{#GET{prefixe}type}|=={par_statut}|oui)checked="checked" ]value="par_statut" />
						<label for="#GET{prefixe}_2"><:feuillederoute:autoriser_par_statut_d_auteur:></label>
					</div>
					<div class="choix choix_par_auteur">
						<input type='radio' class='radio' name='#GET{prefixe}type' id='#GET{prefixe}_3'[(#ENV{#GET{prefixe}type}|=={par_auteur}|oui)checked="checked" ]value="par_auteur" />
						<label for="#GET{prefixe}_3"><:feuillederoute:autoriser_par_auteur:></label>
					</div>
				</li>
			</ul>
			[(#REM) <!-- Methode par statut d'auteurs (choix multiple) --> ]
			<ul id="[(#GET{prefixe})]bloc_par_statut" class="[(#GET{prefixe})]bloc[(#ENV{[(#GET{prefixe})type]}|non) visible]">
				[(#CONFIG{[(#GET{prefixe})type]}|non)
					[(#GET{prefixe}|=={modifier_}|oui)
						#SET{defaut,#ARRAY{0,0minirezo}}]
					[(#GET{prefixe}|=={lire_}|oui)
						#SET{defaut,#ARRAY{0,0minirezo,1,1comite}}]
				]

				<li class="editer editer_[(#GET{prefixe})]statuts">
					<label for="champ_modifier_statuts"><:feuillederoute:statuts_possibles:></label>
					<select size="3" multiple="multiple" id="champ_[(#GET{prefixe})]statuts" name="[(#GET{prefixe})]statuts[]">
						<option[(#VAL{0minirezo}|in_any{#ENV{#GET{prefixe}statuts}}|oui) selected="selected"] value="0minirezo">Administrateurs</option>
						<option[(#VAL{1comite}|in_any{#ENV{#GET{prefixe}statuts}}|oui) selected="selected"] value="1comite">RÃ©dacteurs</option>
						<option[(#VAL{6forum}|in_any{#ENV{#GET{prefixe}statuts}}|oui) selected="selected"] value="6forum">Visiteurs</option>
					</select>
				</li>
			</ul>
			<B_auteurs>[(#REM) <!-- Methode par id d'auteurs (choix multiple) --> ]
			<ul id="[(#GET{prefixe})]bloc_par_auteur" class="[(#GET{prefixe})]bloc">
				<li class="editer editer_[(#GET{prefixe})]auteurs">
					<label><:feuillederoute:cfg_lbl_liste_auteurs:></label>
					<select size="10" multiple="multiple" id="champ_[(#GET{prefixe})]auteurs" name="[(#GET{prefixe})]auteurs[]">
						<BOUCLE_auteurs(AUTEURS){par nom}{tout}>
						<option[(#VAL{#ID_AUTEUR}|in_any{#ENV{#GET{prefixe}auteurs}}|oui) selected="selected"] value="#ID_AUTEUR">#NOM</option>
						</BOUCLE_auteurs>
					</select>
				</li>
			</ul></B_auteurs>
		</fieldset>
		<script type="text/javascript">
		//<![CDATA[
			jQuery(document).ready(function() {
				// on cache tous les blocs du meme prefixe
				jQuery(".[(#GET{prefixe})]bloc").not('.visible').hide();
				//on recupere la valeur de celui qui est deja selectionne
				var checked = jQuery("input[name='[(#GET{prefixe})]type']:checked").val();
				// pour l'afficher
				jQuery("#[(#GET{prefixe})]bloc_"+checked).show();
				// si une checkbox change
				jQuery("input[name='[(#GET{prefixe})]type']").change(function() {
					var inputval = $(this).val();
					// on cache tous les blocs du meme prefixe
					jQuery(".[(#GET{prefixe})]bloc").fadeOut('fast',function(){
						// pour afficher celui qui correspond a la checkbox selectionnee
						jQuery("#[(#GET{prefixe})]bloc_"+inputval).fadeIn();
					});
					jQuery(this).blur();
				});
			});
		//]]>
		</script>
	</li>
	</BOUCLE_bloc_autorisation>
</ul>
</B_bloc_autorisation>
