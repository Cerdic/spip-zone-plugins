<div class="formulaire_spip formulaire_configurer formulaire_#FORM">
	<h3 class="titrem"><:facteur:titre_configurer_facteur:></h3>

	[<div class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</div>]
	[<div class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</div>]

	<form method="post" action="#ENV{action}"><div>
		#ACTION_FORMULAIRE{#ENV{action}}

		<fieldset>
			<legend><:facteur:configuration_adresse_envoi:></legend>
			<div class="editer-groupe">
				<div class="editer pleine_largeur editer_facteur_adresse_envoi [ (#ENV**{erreurs}|table_valeur{facteur_adresse_envoi}|oui)erreur]">
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_adresse_envoi})</span>]
					<div class="choix">
						<input type="radio" name="facteur_adresse_envoi" class="radio" value="non" id="facteur_adresse_envoi_non"[(#ENV{facteur_adresse_envoi,'non'}|=={non}|oui)checked="checked"]/>
						<label for="facteur_adresse_envoi_non"><:facteur:utiliser_reglages_site{from=#ENV{_from_defaut}}:></label>
					</div>
					<div class="choix">
						<input type="radio" name="facteur_adresse_envoi" class="radio" value="oui" id="facteur_adresse_envoi_oui"[(#ENV{facteur_adresse_envoi,'non'}|=={oui}|oui)checked="checked"]/>
						<label for="facteur_adresse_envoi_oui"><:facteur:personnaliser:></label>
						<div class="suite editer-groupe"[(#ENV{facteur_adresse_envoi,'non'}|=={non}|oui)style='display:none;']>
							<div class="editer editer_facteur_adresse_envoi_perso editer_facteur_adresse_envoi_nom [ (#ENV**{erreurs}|table_valeur{facteur_adresse_envoi_nom}|oui)erreur]">
								<label for="facteur_adresse_envoi_nom"><:facteur:facteur_adresse_envoi_nom:></label>[
								<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_adresse_envoi_nom})</span>]
								<input type="text" name="facteur_adresse_envoi_nom" class="text" value="#ENV**{facteur_adresse_envoi_nom}" id="facteur_adresse_envoi_nom" />
							</div>
							<div class="editer editer_facteur_adresse_envoi_perso editer_facteur_adresse_envoi_email [ (#ENV**{erreurs}|table_valeur{facteur_adresse_envoi_email}|oui)erreur]">
								<label for="facteur_adresse_envoi_email"><:facteur:facteur_adresse_envoi_email:></label>[
								<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_adresse_envoi_email})</span>]
								<input type="text" name="facteur_adresse_envoi_email" class="text" value="#ENV**{facteur_adresse_envoi_email}" id="facteur_adresse_envoi_email" />
							</div>
						</div>
					</div>
				</div>
				#SET{name,facteur_forcer_from}#SET{obli,''}#SET{defaut,''}#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
				<div class="editer pleine_largeur editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">[
					<span class='erreur_message'>(#GET{erreurs})</span>
					]
					<div class="choix">
						#SET{val,non}
						<input type="hidden" name="#GET{name}" value="#GET{val}" />
						#SET{val,oui}
						<input type="checkbox" name="#GET{name}" class="checkbox" id="#GET{name}_#GET{val}" value="#GET{val}"[(#ENV{#GET{name},#GET{defaut}}|=={#GET{val}}|oui)checked="checked"] />
						<label for="#GET{name}_#GET{val}"><:facteur:label_facteur_forcer_from:></label>
					</div>
				</div>
			</div>
		</fieldset>
		<fieldset>
			<legend><:facteur:configuration_mailer:></legend>
			<p class="explication"><:facteur:configuration_smtp_descriptif:></p>
			<div class="editer-groupe">
				<div class="editer pleine_largeur editer_facteur_smtp [ (#ENV**{erreurs}|table_valeur{facteur_smtp}|oui)erreur]">
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp})</span>]
					<div class="choix">
						<input type="radio" name="facteur_smtp" class="radio" value="non" id="facteur_smtp_non"[(#ENV{facteur_smtp,'non'}|=={non}|oui)checked="checked"]/>
						<label for="facteur_smtp_non"><:facteur:utiliser_mail:></label>
					</div>
					<div class="choix">
						<input type="radio" name="facteur_smtp" class="radio" value="oui" id="facteur_smtp_oui"[(#ENV{facteur_smtp,'non'}|=={oui}|oui)checked="checked"]/>
						<label for="facteur_smtp_oui"><:facteur:utiliser_smtp:></label>

						<div class="suite editer-groupe editer_facteur_smtp_param" [(#ENV{facteur_smtp,'non'}|=={non}|oui)style='display:none;']>
							<div class="editer editer_facteur_smtp_host [ (#ENV**{erreurs}|table_valeur{facteur_smtp_host}|oui)erreur]">
								<label for="facteur_smtp_host"><:facteur:facteur_smtp_host:></label>[
								<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_host})</span>]
								<input type="text" name="facteur_smtp_host" class="text" value="#ENV**{facteur_smtp_host}" id="facteur_smtp_host" />
							</div>
							<div class="editer editer_facteur_smtp_port [ (#ENV**{erreurs}|table_valeur{facteur_smtp_port}|oui)erreur]">
								<label for="facteur_smtp_port"><:facteur:facteur_smtp_port:></label>[
								<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_port})</span>]
								<input type="text" name="facteur_smtp_port" class="text" value="#ENV**{facteur_smtp_port}" id="facteur_smtp_port" />
							</div>
							<div class="editer editer_facteur_smtp_auth [ (#ENV**{erreurs}|table_valeur{facteur_smtp_auth}|oui)erreur]">
								<label><:facteur:facteur_smtp_auth:></label>
								[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_auth})</span>]
								<div class="choix">
									<input type="radio" name="facteur_smtp_auth" class="radio" value="non" id="facteur_smtp_auth_non"[(#ENV{facteur_smtp_auth,'non'}|=={non}|oui)checked="checked"]/>
									<label for="facteur_smtp_auth_non"><:facteur:facteur_smtp_auth_non:></label>
								</div>
								<div class="choix">
									<input type="radio" name="facteur_smtp_auth" class="radio" value="oui" id="facteur_smtp_auth_oui"[(#ENV{facteur_smtp_auth,'non'}|=={oui}|oui)checked="checked"]/>
									<label for="facteur_smtp_auth_oui"><:facteur:facteur_smtp_auth_oui:></label>
									<div class="suite editer-groupe" [(#ENV{facteur_smtp_auth,'non'}|=={non}|oui)style='display:none;']>
										<div class="editer editer_facteur_smtp_username [ (#ENV**{erreurs}|table_valeur{facteur_smtp_username}|oui)erreur]">
											<label for="facteur_smtp_username"><:facteur:facteur_smtp_username:></label>[
											<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_username})</span>]
											<input type="text" name="facteur_smtp_username" class="text" value="#ENV**{facteur_smtp_username}" id="facteur_smtp_username" />
										</div>
										<div class="editer editer_facteur_smtp_password [ (#ENV**{erreurs}|table_valeur{facteur_smtp_password}|oui)erreur]">
											<label for="facteur_smtp_password"><:facteur:facteur_smtp_password:></label>[
											<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_password})</span>]
											<input type="password" name="facteur_smtp_password" class="text" value="#ENV**{facteur_smtp_password}" id="facteur_smtp_password"
											[placeholder="(#ENV**{_facteur_smtp_password}|facteur_affiche_password_masque|attribut_html)"] />
										</div>
									</div>
								</div>
							</div>
							<div class="editer editer_facteur_smtp_secure [ (#ENV**{erreurs}|table_valeur{facteur_smtp_secure}|oui)erreur]">
								<label><:facteur:facteur_smtp_secure:></label>
								[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_secure})</span>]
								<div class="choix">
									<input type="radio" name="facteur_smtp_secure" class="radio" value="non" id="facteur_smtp_secure_non"[(#ENV{facteur_smtp_secure,'non'}|=={non}|oui)checked="checked"]/>
									<label for="facteur_smtp_secure_non"><:facteur:facteur_smtp_secure_non:></label>
								</div>
								<div class="choix">
									<input type="radio" name="facteur_smtp_secure" class="radio" value="tls" id="facteur_smtp_secure_tls"[(#ENV{facteur_smtp_secure,'non'}|=={tls}|oui)checked="checked"]/>
									<label for="facteur_smtp_secure_tls"><:facteur:facteur_smtp_secure_tls:></label>
								</div>
								<div class="choix">
									<input type="radio" name="facteur_smtp_secure" class="radio" value="ssl" id="facteur_smtp_secure_ssl"[(#ENV{facteur_smtp_secure,'non'}|=={ssl}|oui)checked="checked"]/>
									<label for="facteur_smtp_secure_ssl"><:facteur:facteur_smtp_secure_ssl:></label>
								</div>
							</div>
						</div>

					</div>
				</div>
				<div class="editer editer_facteur_smtp_tls_allow_self_signed [ (#ENV**{erreurs}|table_valeur{facteur_smtp_tls_allow_self_signed}|oui)erreur]">
					<label><:facteur:configuration_facteur_smtp_tls_allow_self_signed:></label>
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_tls_allow_self_signed})</span>]
					<div class="choix">
						<input type="radio" name="facteur_smtp_tls_allow_self_signed" class="radio" value="non" id="facteur_smtp_tls_allow_self_signed_non"[(#ENV{facteur_smtp_tls_allow_self_signed,'non'}|=={non}|oui)checked="checked"]/>
						<label for="facteur_smtp_tls_allow_self_signed_non"><:facteur:facteur_smtp_tls_allow_self_signed_non:></label>
					</div>
					<div class="choix">
						<input type="radio" name="facteur_smtp_tls_allow_self_signed" class="radio" value="oui" id="facteur_smtp_tls_allow_self_signed_oui"[(#ENV{facteur_smtp_tls_allow_self_signed,'non'}|=={oui}|oui)checked="checked"]/>
						<label for="facteur_smtp_tls_allow_self_signed_oui"><:facteur:facteur_smtp_tls_allow_self_signed_oui:></label>
					</div>
				</div>
				<div class="editer editer_facteur_smtp_sender [ (#ENV**{erreurs}|table_valeur{facteur_smtp_sender}|oui)erreur]">
					<label for="facteur_smtp_sender"><:facteur:facteur_smtp_sender:></label>[
					<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_sender})</span>]
					<p class="explication"><:facteur:facteur_smtp_sender_descriptif:></p>
					<input type="text" name="facteur_smtp_sender" class="text" value="#ENV**{facteur_smtp_sender}" id="facteur_smtp_sender" />
				</div>
			</div>
		</fieldset>

		<fieldset>
			<legend><:facteur:facteur_filtres:></legend>
			<div class="editer-groupe">
				<div class="editer pleine_largeur editer_facteur_filtres[ (#ENV**{erreurs}|table_valeur{facteur_filtres}|oui)erreur]">
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_smtp_secure})</span>]
					<p class="explication"><:facteur:facteur_filtres_descriptif:></p>
					<div class="choix">
						<input type="checkbox" name="facteur_filtre_images" class="checkbox" value="1" id="facteur_filtre_images"[(#ENV{facteur_filtre_images,''}|=={1}|oui)checked="checked"]/>
						<label for="facteur_filtre_images"><:facteur:facteur_filtre_images:></label>
					</div>
					<div class="choix">
						<input type="checkbox" name="facteur_filtre_iso_8859" class="checkbox" value="1" id="facteur_filtre_iso_8859"[(#ENV{facteur_filtre_iso_8859,''}|=={1}|oui)checked="checked"]/>
						<label for="facteur_filtre_iso_8859"><:facteur:facteur_filtre_iso_8859:></label>
					</div>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<legend><:facteur:facteur_copies:></legend>
			<p class="explication"><:facteur:facteur_copies_descriptif:></p>
			<div class="editer-groupe">
				<div class="editer editer_facteur_copies editer_facteur_cc [ (#ENV**{erreurs}|table_valeur{facteur_cc}|oui)erreur]">
					<label for="facteur_cc"><:facteur:facteur_cc:></label>
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_cc})</span>]
					<input type="text" name="facteur_cc" class="text" value="#ENV**{facteur_cc}" id="facteur_cc" />
				</div>
				<div class="editer editer_facteur_copies editer_facteur_bcc [ (#ENV**{erreurs}|table_valeur{facteur_bcc}|oui)erreur]">
					<label for="facteur_bcc"><:facteur:facteur_bcc:></label>
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{facteur_bcc})</span>]
					<input type="text" name="facteur_bcc" class="text" value="#ENV**{facteur_bcc}" id="facteur_bcc" />
				</div>
			</div>
		</fieldset>

		<p class="boutons">
			<input type="submit" name="valider" class="submit" value="<:bouton_valider:>" />
		</p>
	</div></form>
</div>
<script type="text/javascript">
jQuery(function(){
	jQuery('.choix>.suite').each(function(){
		var $suite = jQuery(this);
		var $input = $suite.siblings('input.radio').eq(0);
		var name = $input.attr('name');
		jQuery('input[name='+name+']').change(function() {
			if ($input.prop('checked')) {
				$suite.show('fast');
			}
			else {
				$suite.hide('fast');
			}
		});
	});
})
</script>
