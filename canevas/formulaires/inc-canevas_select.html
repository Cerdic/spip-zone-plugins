<li class="editer_canevas fieldset">
	<fieldset>
		<h3 class="legend"><:canevas:titre_bloc_canevas:></h3>
		<ul>
			<li class="canevas_liste">
				<label for="select_canevas"><:canevas:label_select_canevas:></label>
				<select size="5" class="selecteur_canevas" name="select_canevas" id="select_canevas">
					<B_vos_canevas>
					<optgroup label="<:canevas:label_vos_canevas|attribut_html:>">
					<BOUCLE_vos_canevas(CANEVAS){id_auteur=#SESSION{id_auteur}}{!par id_canevas}{doublons}>
					<option class="item[ (#COMPTEUR_BOUCLE|alterner{'','odd'})]" value="#ID_CANEVAS">#TITRE</option>
					</BOUCLE_vos_canevas>
					</optgroup>
					</B_vos_canevas>
					<B_autres_canevas>
					<optgroup label="<:canevas:label_autres_canevas|attribut_html:>">
					<BOUCLE_autres_canevas(CANEVAS){!par id_canevas}{statut=public}{doublons}>
					<option class="item[ (#COMPTEUR_BOUCLE|alterner{'','odd'})]" value="#ID_CANEVAS">#TITRE</option>
					</BOUCLE_autres_canevas>
					</optgroup>
					</B_autres_canevas>
				</select>
			</li>
			<li class="canevas_previsu">
				<div id="texte_previsu" name="texte_previsu"><:canevas:label_previsu_canevas:></div>
			</li>
		</ul>
		<p class='boutons'>
			&#91;<a href="#" id="inserer_canevas"><:canevas:inserer_texte:></a>&#93;
		</p>
	</fieldset>
	<script type="text/javascript">
	(function($){
	$(function(){
		$('input.check').click(function(){
			$(this).parent().toggleClass('nomplugin_on');
		});
		$('#select_canevas option').click(function(){
			var id = $(this).attr('value');
			$('#texte_previsu').html('')
				.prepend(ajax_image_searching)
				.load('[(#URL_ECRIRE|parametre_url{action,canevas_previsu})]',{'id_canevas':id});
			return false;
		});
		$('#inserer_canevas').click(function(){
			var id = $('#select_canevas option:selected').attr('value');
			$('#text_area').prepend(ajax_image_searching)
				.val(function(index, texte){
					$.ajax({
						type: 'POST',
						async: false,
						url: '[(#URL_ECRIRE|parametre_url{action,canevas_previsu})]',
						data: ({'id_canevas':id,'brut':'oui'}),
						success: function(data){
							texte = texte + '\n\n' + data;
						}
					});
					return texte;
				});
				
			return false;
		});
	});
	})(jQuery);
	</script>
</li>