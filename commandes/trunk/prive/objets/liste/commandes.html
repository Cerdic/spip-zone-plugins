[(#REM)
	param√®tres d'affichage :
		titre_dehors (bool): true pour afficher le titre en dehors du tableau
		cacher_tri (bool): true pour cacher le tri
][
(#SET{defaut_tri,#ARRAY{
	date,-1,
	date_paiement,-1,
	reference,1
	id_auteur,1
	prix,1
}})
]<B_liste_commandes>
#ANCRE_PAGINATION
[(#ENV{titre_dehors}|oui)[<h2>(#ENV*{titre,#TOTAL_BOUCLE|singulier_ou_pluriel{commandes:info_1_commande,commandes:info_nb_commandes}})</h2>]]
<div class="liste-objets commandes">
	[(#ENV{cacher_tri}|non)
	<div class='pagination tri'>
		[(#TRI{'>',#CHEMIN_IMAGE{tri-asc-16.png}|balise_img{<:par_tri_croissant:>}})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{'<',#CHEMIN_IMAGE{tri-desc-16.png}|balise_img{<:par_tri_decroissant:>}})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{id_commande,<:info_numero_abbreviation:>,ajax})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{reference,<:commandes:reference:>,ajax})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{statut,<:commandes:etat:>,ajax})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{date,<:commandes:commande_date:>,ajax})][
		<span class="sep">&nbsp;|&nbsp;</span>(#TRI{date_paiement,<:commandes:commande_date_paiement:>,ajax})]
	</div>
	]
	[<div class="pagination">(#PAGINATION{prive})</div>]
	<table class='spip liste'>
		[(#ENV{titre_dehors}|non)[<caption><strong class="caption">(#ENV*{titre,#TOTAL_BOUCLE|singulier_ou_pluriel{commandes:info_1_commande,commandes:info_nb_commandes}})</strong></caption>]]
		<thead>
			<tr class='first_row'>
				<th class='etat' scope='col'><:commandes:etat:></th>
				<th class='reference' scope='col'><:commandes:reference:></th>
				<th class='dates' scope='col'><:commandes:label_commande_dates:></th>
				<th class='descriptif' scope='col'><:commandes:contenu:></th>
				<th class='montant' scope='col'><:commandes:montant:></th>
				[(#ENV{simuler}|=={1}|oui)<th scope='col'><:commandes:simuler:></th>]
			</tr>
		</thead>
		<tbody>
		<BOUCLE_liste_commandes(COMMANDES)
			{id_auteur?}{id_commande?}{where?}{statut?}{annee?}{mois?}
			{tri #ENV{order,date},#GET{defaut_tri}}
			{pagination #ENV{nb,20}}>
			<tr class="[(#COMPTEUR_BOUCLE|alterner{row_odd,row_even})][ (#STATUT)]">
				<td class='etat'>[(#STATUT|puce_statut{commande,#ID_COMMANDE})&nbsp;][(#STATUT|commandes_lister_statuts)]</td>
				<td class='infos'>
					<div class='id'>
						<a href="#URL_ECRIRE{commande,id_commande=#ID_COMMANDE}">
							[<:commandes:commande_titre:>&nbsp;<:info_numero_abbreviation:>(#ID_COMMANDE)]
						</a>
					</div>
					<div class='reference'>
						<strong>#REFERENCE</strong>
					</div>
					<div class='qui'>
						[(#ID_AUTEUR|>{0}|?{
							<a href="[(#ID_AUTEUR|generer_url_entite{auteur})]">[
								(#INFO_PRENOM{auteur, #ID_AUTEUR}) ][(#INFO_NOM{auteur, #ID_AUTEUR})
							]</a>,
							<em><:info_aucun_auteur:></em>}
						)]
					</div>
				</td>
				<td class='dates'>
					<ul>
						[<li class="date">
							<span class="label"><:commandes:label_passee_le:>:</span><br>
							(#DATE|affdate_jourcourt)[&nbsp;(#DATE|affdate{H:i})]
						</li>]
						[(#DATE_PAIEMENT|intval|oui)
						<li class="date paiement">
							<span class="label"><:commandes:label_payee_le:>:</span><br>
							[(#DATE_PAIEMENT|affdate_jourcourt)][&nbsp;(#DATE_PAIEMENT|affdate{H:i})]
						</li>
						]
				</td>
				<td class='descriptif'>
					<B_detail_commande>
					<table class="simple">
						<BOUCLE_detail_commande(COMMANDES_DETAILS){id_commande}{par id_commandes_detail}>
						<tr>
							<td class="titre">[(#DESCRIPTIF*|typo|supprimer_numero)]</td>
							[<td class="montant">(#TOTAL_BOUCLE|>{1}|oui)[<small>(#PRIX)</small>]</td>]
						</td>
						</tr>
						</BOUCLE_detail_commande>
					</table>
					</B_detail_commande>
				</td>
				<td class='montant'>#PRIX</td>
				[(#ENV{simuler}|=={1}|oui)
				<td class='simuler'>
				[(#BOUTON_ACTION{
					<:commandes:statut_encours:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-encours,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_attente:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-attente,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_partiel:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-partiel,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_paye:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-paye,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_envoye:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-envoye,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_retour:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-retour,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_retour_partiel:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-retour_partiel,#SELF})]})]
				[(#BOUTON_ACTION{
					<:commandes:statut_erreur:>,
					[(#URL_ACTION_AUTEUR{instituer_commande,#ID_COMMANDE-erreur,#SELF})]})]
				</td>
				]
			</tr>
		</BOUCLE_liste_commandes>
		</tbody>
	</table>
	[<p class='pagination'>(#PAGINATION{prive})</p>]
</div>
</B_liste_commandes>[
<div class="liste-elements commandes"><strong class="caption">(#ENV*{sinon,''})</strong></div>
]<//B_liste_commandes>
