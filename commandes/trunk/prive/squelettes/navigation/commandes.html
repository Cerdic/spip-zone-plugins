#BOITE_OUVRIR{'','simple commandes navigation'}

[(#REM) filtrer les modes de reglement ]
[(#REM) au moins une commande a le mode complété]
#SET{is_mode_paiement,false}<BOUCLE_is_mode_paiement(COMMANDES){mode!=""}{0,1}>#SET{is_mode_paiement,true}</BOUCLE_is_mode_paiement>
<BOUCLE_condition_mode_paiement(CONDITION){si #GET{is_mode_paiement}|=={true}|oui}>		
	<div class="liste mode_paiements">
		<h4><:commandes:label_filtre_paiement:></h4>
		<ul class='liste-items'>
	
			#SET{actif, #ENV{mode}|=={''}|?{'oui',''}}
			[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{mode,''}|lien_ou_expose{
				<:commandes:label_filtre_tous_mode_paiements:>,
				#GET{actif},
				'ajax', '', '',
				[(#VAL{onclick="ajaxReload('commandes',\{args:\{mode:''\}\})"})]
			})</li>]
	
			[(#REM) mode_paiement ]
			<BOUCLE_mode_paiement(COMMANDES){tout}{fusion mode}>
			#SET{actif, #ENV{mode}|=={#MODE}|?{'oui',''}}
			[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{mode,#MODE}|lien_ou_expose{
				[(#LISTER_VALEURS{mode})],
				#GET{actif},
				'ajax', '', '',
				[(#VAL{onclick="ajaxReload('commandes',\{args:\{mode:'#MODE'\}\})"})]
			})</li>]	
			</BOUCLE_mode_paiement>
			
		</ul>
	</div>
</BOUCLE_condition_mode_paiement>

[(#REM) filtrer les statuts ]
<div class="liste statuts">
	<h4><:commandes:label_filtre_etats:></h4>
	<ul class='liste-items'>

		[(#REM) tous les statuts ]
		#SET{actif, #ENV{statut}|=={''}|?{'oui',''}}
		[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{statut,''}|lien_ou_expose{
			<:commandes:label_filtre_tous_statuts:>,
			#GET{actif},
			'ajax', '', '',
			[(#VAL{onclick="ajaxReload('commandes',\{args:\{statut:''\}\})"})]
		})</li>]

		[(#REM) statuts ]
		<BOUCLE_statuts(COMMANDES){tout}{fusion statut}>
		#SET{actif, #ENV{statut}|=={#STATUT}|?{'oui',''}}
		[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{statut,#STATUT}|lien_ou_expose{
			[(#CHEMIN_IMAGE{#VAL{commande}|objet_info{statut_images}|table_valeur{#STATUT}}|balise_img)&nbsp;][(#STATUT|commandes_lister_statuts)],
			#GET{actif},
			'ajax', '', '',
			[(#VAL{onclick="ajaxReload('commandes',\{args:\{statut:'#STATUT'\}\})"})]
		})</li>]
		</BOUCLE_statuts>
		
	</ul>
</div>

[(#REM) filtrer les dates ]
<div class="liste annees">
	<h4><:commandes:label_filtre_dates:></h4>
	<ul class='liste-items'>

		[(#REM) toutes les dates ]
		#SET{actif, #ENV{annee}|=={''}|et{#ENV{mois}|=={''}}|?{'oui',''}}
		[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{annee,''}|parametre_url{mois,''}|lien_ou_expose{
			<:commandes:label_filtre_toutes_dates:>,
			#GET{actif},
			'ajax', '', '',
			[(#VAL{onclick="ajaxReload('commandes',\{args:\{annee:'',mois:''\}\})"})]
		})</li>]

		[(#REM) années/mois ]
		<B_annees>
		#ANCRE_PAGINATION
		<li><table class="simple">
		<BOUCLE_annees(COMMANDES){tout}{!par date}{fusion YEAR(date)}{pagination 5}>
		<tr>
			<td class="annee">
				#SET{actif, #ENV{annee}|=={#DATE|annee}|?{'oui',''}}
				[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{annee,#DATE|annee}|parametre_url{mois,''}|lien_ou_expose{
					[(#DATE|annee)],
					#GET{actif},
					ajax,'', '',
					[(#VAL{onclick="ajaxReload('commandes',\{args:\{annee:'[(#DATE|annee)]',mois:''\}\})"})]
				})</li>]
			</td>
			<td class="mois">
				<ul>
					<BOUCLE_mois(COMMANDES){tout}{annee=#DATE|annee}{!par date}{fusion MONTH(date)}>
					#SET{actif, #ENV{mois}|=={#DATE|mois}|et{#ENV{annee}|=={#DATE|annee}}|?{'oui',''}}
					[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{annee,#DATE|annee}|parametre_url{mois,#DATE|mois}|lien_ou_expose{
						[(#DATE|affdate{nom_mois})],
						#GET{actif},
						'ajax', '', '',
						[(#VAL{onclick="ajaxReload('commandes',\{args:\{annee:'[(#DATE|annee)]',mois:'[(#DATE|mois)]'\}\})"})]
					})</li>]
					</BOUCLE_mois>
				</ul>
			</td>
		</tr>
		</BOUCLE_annees>
		</table></li>
		[<li class='pagination simple'>(#PAGINATION{page})</li>]
		</B_annees>

	</ul>
</div>

[(#REM) filtrer les clients ]
<div class="liste clients">
	<h4><:commandes:label_filtre_clients:></h4>
	<ul class='liste-items'>

		[(#REM) tous les clients ]
		#SET{actif, #ENV{id_auteur}|=={''}|?{'oui',''}}
		[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{id_auteur,''}|lien_ou_expose{
			<:commandes:label_filtre_tous_clients:>,
			#GET{actif},
			'ajax', '', '',
			[(#VAL{onclick="ajaxReload('commandes',\{args:\{id_auteur:''\}\})"})]
		})</li>]

		<B_clients>
		#ANCRE_PAGINATION
		<BOUCLE_clients(COMMANDES){tout}{fusion id_auteur}{pagination 20}>
		#SET{actif, #ENV{id_auteur}|=={#ID_AUTEUR}|?{'oui',''}}
		[<li[ (#GET{actif}|?{class="on"})]>(#SELF|parametre_url{id_auteur,#ID_AUTEUR}|lien_ou_expose{
			[(#INFO_NOM{auteur, #ID_AUTEUR})],
			#GET{actif},
			'ajax', '', '',
			[(#VAL{onclick="ajaxReload('commandes',\{args:\{id_auteur:'#ID_AUTEUR'\}\})"})]
		})</li>]
		</BOUCLE_clients>
		[<li class='pagination simple'>(#PAGINATION{page})</li>]
		</B_clients>

	</ul>
</div>

#BOITE_FERMER
