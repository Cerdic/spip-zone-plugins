[(#REM)
	Contenu détaillé d'une commande :
	articles, quantités, prix total...
][(#REM)
	Inclus dans prive/objet/contenu/commande.html
	Parametres :
		id_commande    identifiant de la commande
		commande       tableau contenant le detail de la commande
]
<BOUCLE_commande(COMMANDES){id_commande}{tout}{statut?}>

[(#REM)
	stocker le contenu de la commande dans la variable "details"
	on utilise \#ENV{id_commande}, sinon \#ENV{commande}
]
#SET{details, #ARRAY}
<BOUCLE_commande_details(COMMANDES_DETAILS){id_commande}{par id_commandes_detail}>
#SET{details, #GET{details}|push{#ARRAY{
	objet,#OBJET,
	id_objet,#ID_OBJET,
	descriptif, #QUANTITE|>{1}|?{#QUANTITE &times;}|concat{#DESCRIPTIF*|supprimer_numero},
	quantite, #QUANTITE,
	prix, #PRIX*}}}
</BOUCLE_commande_details>
#SET{commande, #ARRAY{details, #GET{details}}}
</BOUCLE_commande>
#SET{commande,#ENV{commande}}
<//B_commande>

[(#REM) Affichage du detail dans une table ]
<BOUCLE_test(CONDITION){si #GET{commande}|et{#GET{commande}|is_array}}>

<table class="liste-objets contenu-commande">
	<thead>
		<tr class="first">
			<th scope="col" class="objet"><:commandes:label_objet:></th>
			<th scope="col" class="description"><:commandes:designation:></th>
			<th scope="col" class="montant"><:commandes:montant:></th>
		</tr>
	</thead>
	<tbody>
		#SET{total,0}
		<BOUCLE_details(POUR){tableau #GET{commande/details}}>
		<tr class="detail[ (#ALTERNER{odd,even})][ (#VALEUR{quantite}|>{0}|?{avec_quantite,sans_quantite})]">
			<td class="objet">
				<a href="[(#VALEUR{id_objet}|generer_url_entite{#VALEUR{objet}})]">
					[(#INCLURE{fond=prive/squelettes/inclure/logo_objet_commande, objet=#VALEUR{objet}, id_objet=#VALEUR{id_objet}})]
					[(#VALEUR{objet}|objet_info{texte_objet}|_T)][ <:info_numero_abbreviation:>(#VALEUR{id_objet})]
				</a>
			</td>
			<td class="description">
				<a href="[(#VALEUR{id_objet}|generer_url_entite{#VALEUR{objet}})]">
					[<strong>(#VALEUR{descriptif})</strong>]
				</a>
			</td>
			<td class="montant">[(#VALEUR{prix}|prix_formater)]</td>
		</tr>
		#SET{total,#GET{total}|plus{#VALEUR{prix}}}
		</BOUCLE_details>
	</tbody>
	<tfoot>
		<tr class="total_ttc">
			<td colspan="2" class="descriptif"><:prix:label_total_ttc:></td>
			<td class="montant">[(#GET{total}|prix_formater)]</td>
		</tr>
		[(#CHEMIN{inclure/commande_frais_de_port.html}|oui)
		[<tr class="total_ttc">
			<td colspan="3" class="frais_de_port">(#INCLURE{fond=inclure/commande_frais_de_port, id_commande})</td>
		</tr>]
		]
	</tfoot>
</table>
</BOUCLE_test>
