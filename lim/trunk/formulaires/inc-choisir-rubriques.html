[(#REM) Récupérer les objets sélectionnés. ex. spip_articles -> article ]

#SET{objets,#ARRAY}
<BOUCLE_objets_selectionnes(DATA){liste #CONFIG{lim_objets}}>#SET{objets,#GET{objets}|push{#VALEUR}} #SET{nbre_col,#TOTAL_BOUCLE|moins{1}}</BOUCLE_objets_selectionnes>
#SET{objets,#GET{objets}|array_flip}

[(#REM) multilinguisme : pour les objets sélectionnés, récupérer le nom traduit et les afficher dans l'ordre alphabétique ]
#SET{traductions,#ARRAY}<BOUCLE_objets(DATA){source tableau,#REM|lister_tables_objets_sql}>[(#EDITABLE|oui)
[(#SET{traductions,#GET{traductions}|array_merge{#ARRAY{#CLE,#TEXTE_OBJETS|_T}}})]
]</BOUCLE_objets>
[(#SET{traductions,#GET{traductions}|array_intersect_key{#GET{objets}}})]

[(#REM) Récupérer le type des objets sélectionnés. ex. spip_articles -> article ]
#SET{type, #ARRAY}
[(#SET{type, #GET{traductions}|lim_type})]

<style>
input[type=checkbox].lim_hidden {display:none; }
	span.entete { font-weight: bold; }
	span.center { text-align: center; }
	span.tab.rubrique {display:inline-block; width:390px; font-weight:bold; }
	.sousrub span.tab.rubrique { margin-left:10px; width:380px; font-weight:normal; }
	.sousrub .sousrub span.tab.rubrique { margin-left:20px; width:370px;}
	.sousrub .sousrub .sousrub span.tab.rubrique { margin-left:30px; width:360px;}
	span.check {display:inline-block; width:[(#VAL{55}|div{#GET{nbre_col}})%]; text-align: center;}

	#SET{left,#ENV{ltr}|choixsiegal{left,left,right}}
	#SET{right,#ENV{ltr}|choixsiegal{left,right,left}}

	.formulaire_spip.formulaire_configurer_lim_logos,
	.formulaire_spip.formulaire_configurer_lim_rubriques .choix label { vertical-align:middle; }
	.formulaire_spip.formulaire_configurer_lim_rubriques div.secteur 	{ margin:0; padding:0; padding:5px 10px; border:1px solid #ddd; border-radius:5px; background-color:#fff; }
	.formulaire_spip.formulaire_configurer_lim_rubriques div div		{ margin-bottom:5px; border-#ENV{left}:1px solid #ddd; }
	.formulaire_spip.formulaire_configurer_lim_rubriques div div div	{ margin-bottom:0; border-#ENV{left}:1px solid #ddd; }
	.formulaire_spip.formulaire_configurer_lim_rubriques div div		{ border:0; border-radius:0;}
	.formulaire_spip.formulaire_configurer_lim_rubriques div.secteur 	{ margin-bottom:10px; }
	.formulaire_spip.formulaire_configurer_lim_rubriques div.choix 				{ padding: 4px 10px; border:0; border-radius:0;}
	.formulaire_spip.formulaire_configurer_lim_rubriques div.choix input[type='checkbox'] { margin:1px 0.3ex; vertical-align:middle; border:0;}
	img.info_logo_site, img.forbidden 	{ vertical-align:middle; }
</style>

<div>
	<div>
		<span class="tab rubrique entete"></span>
		<BOUCLE_entete(DATA){source tableau,#GET{traductions}}{par valeur}>
			<span class="check entete center">#VALEUR</span>
		</BOUCLE_entete>
	</div>
	<div>
		<BOUCLE_titre_rubrique(RUBRIQUES){racine}{par num titre,titre}{tout}>
			<div class='secteur'>
				<span class="tab rubrique">#TITRE</span>
				<BOUCLE_par_traduction1(DATA){source tableau,#GET{type}}{par valeur}>
					[(#INCLURE{fond=formulaires/inc-input-rub,env,name=#VALEUR}{#VALEUR=#ENV{#VALEUR}}{id_rubrique=#ID_RUBRIQUE})]
				</BOUCLE_par_traduction1>
			<B_enfants_rubriques>
			<div class='sousrub'>
			<BOUCLE_enfants_rubriques(RUBRIQUES){id_parent}{par num titre,titre}{tout}{si #JUSTE_SECTEUR|!={oui}}>
			<div class=''>
				<span class="tab rubrique">#TITRE</span><BOUCLE_par_traduction2(DATA){source tableau,#GET{type}}{par valeur}>
				[(#INCLURE{fond=formulaires/inc-input-rub,env,name=#VALEUR}{#VALEUR=#ENV{#VALEUR}}{id_rubrique=#ID_RUBRIQUE})]
				</BOUCLE_par_traduction2><BOUCLE_rec(BOUCLE_enfants_rubriques)/>
			</div>
			</BOUCLE_enfants_rubriques>
			</div>
			</B_enfants_rubriques>
		</div>
		</BOUCLE_titre_rubrique>

	</div>
</div>


<script type="text/javascript">/*<![CDATA[*/
// jQuery("span.icon-on").on('click', function(){
// 	jQuery(this).removeClass('icon-on').addClass('icon-off');
// });
// jQuery("span.icon-off").on('click',function(){
// 	jQuery(this).removeClass('icon-off').addClass('icon-on');
// });

jQuery("span.lim_icon").on('click', function(){
	if (jQuery(this).hasClass('icon-on')) {
		jQuery(this).removeClass('icon-on').addClass('icon-off');
	}
	else if (jQuery(this).hasClass('icon-off'))
		jQuery(this).removeClass('icon-off').addClass('icon-on');

});
/*]]>*/</script>



