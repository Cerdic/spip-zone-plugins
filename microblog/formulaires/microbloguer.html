[(#REM)

  formulaire microbloguer
  (c) 2009-2010 Cerdic
  Distribue sous licence GPL

]
[<div class='ajax'>
<div class="formulaire_spip formulaire_#FORM">
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
	(#ENV{editable})
	<form method='post' action='#ENV{action}' enctype='multipart/form-data'><div>
		[(#REM) declarer les hidden qui declencheront le service du formulaire
		parametre : url d'action ]
		#ACTION_FORMULAIRE{#ENV{action}}
	  <ul>
			#SET{fl,microblog}
	  	#SET{name,status}#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}#SET{obli,'obligatoire'}
	    <li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">[
				<span class='erreur_message'>(#GET{erreurs})</span>
				]<label for="#GET{name}"><em>[(#VAL{140}|moins{#ENV{status}|strlen})]</em>[(#GET{fl}|concat{':label_',#GET{name}}|_T)]</label>
				<textarea name="#GET{name}" id="#GET{name}" rows="3" cols="25">#ENV{status}</textarea>
	    </li>
	  </ul>
	  [(#REM) ajouter les saisies supplementaires : extra et autre, a cet endroit ]
	  <!--extra-->
	  <p class='boutons'><span class='image_loading'></span><input type='submit' class='submit' value='<:microblog:bouton_envoyer:>' /></p>
	</div></form>
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
</div></div>]
<script type="text/javascript">
function status_length_count(){
	jQuery('#status').keyup(function(){
		var maxlen = 140;
		var l = maxlen-jQuery(this).val().length;
		jQuery(this).parent().find('label>em').html(l).removeClass(l>=0?'nok':'ok').addClass(l>=0?'ok':'nok');
	});
}
jQuery('document').ready(status_length_count);
onAjaxLoad(status_length_count);
</script>
<style type="text/css">
	.formulaire_microbloguer .editer_status label em {font-style:normal;display:block;float:right;color:#aaa;}
	.formulaire_microbloguer .editer_status label em.nok {color:red;}
</style>