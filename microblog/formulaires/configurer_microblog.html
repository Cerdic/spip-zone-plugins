<!-- nom=microblog -->
#CACHE{0}
<div class="formulaire_spip formulaire_editer formulaire_cfg">
	<h2 class="titrem">Microblog</h2>
	[<p class='reponse_formulaire reponse_formulaire_erreur'>(#ENV*{message_erreur})</p>]
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
	<form method="post" action="#ENV{action}"><div>
		#ACTION_FORMULAIRE{SELF}
		<ul>
			<li class="fieldset">
				<fieldset>
					<legend><:microblog:compte_defaut:> <code><tt>microblog()</tt></code></legend>
					<p class="explication"><:microblog:creer_compte_services:>&nbsp;:</p>

					<ul>
						<li>
							<label>laconi.ca</label>
							<a href="http://spip.org/main/register">http://spip.org/main/register</a>, <:microblog:presentation_spipo:><br />
							<a href="http://identi.ca/main/register">http://identi.ca/main/register</a>, <:microblog:presentation_laconica:>
						</li>
						<li>
							<label>Twitter</label>
							<a href="https://twitter.com/signup">https://twitter.com/signup</a>, twitter.com
						</li>
					</ul>

					<ul class="compte">
						<li class="editer_service">
							<label for="service"><:microblog:service:></label>
							<p class="explication"><:microblog:compte_tests:> :
							<br />supertweet | spipotest spipotest2
							</p>
							<select name="service" id="service">
								<option value="">(<:microblog:choisir:>)</option>
								<option value="" disabled="disabled">- laconica -</option>
								<option value="spipo"[
									(#ENV{service}|=={spipo}|?{selected="selected"})]>SPIP.org (spipo)</option>
								<option value="identica"[
									(#ENV{service}|=={identica}|?{selected="selected"})]>Identi.ca (identica)</option>
								<option value="" disabled="disabled"></option>
								<option value="" disabled="disabled">- twitter -</option>
								<option value="twitter"[
									(#ENV{service}|=={twitter}|?{selected="selected"})]>Twitter.com</option>
								<option value="supertweet"[
									(#ENV{service}|=={supertweet}|?{selected="selected"})]>Supertweet.net</option>
							</select>
						</li>
						<li class="editer_user">
							<label for="user"><:microblog:label_username:></label>
							<input type="text" name="user" value="[(#ENV{user})]" id="user" class="text" />
						</li>
						<li class="editer_pass">
							<label for="pass"><:entree_mot_passe:></label>
							<input type="password" name="pass" value="[(#ENV{pass})]" id="pass" class="text" />
						</li>
						<li class="editer_twitter_consumer_key twitter_conf">
							<label for="twitter_consumer_key"><:microblog:label_twitter_consumer_key:></label>
							<p class="explication"><:microblog:explication_twitter_api_oauth:></p>
							<input type="text" name="twitter_consumer_key" value="[(#ENV{twitter_consumer_key})]" id="twitter_consumer_key" class="text" />
						</li>
						<li class="editer_twitter_consumer_secret twitter_conf">
							<label for="twitter_consumer_secret"><:microblog:label_twitter_consumer_secret:></label>
							<input type="password" name="twitter_consumer_secret" value="[(#ENV{twitter_consumer_secret})]" id="twitter_consumer_secret" class="text" />
						</li>
						[(#ENV{service}|=={twitter}|oui)
						[(#ENV{twitter_consumer_key}|strlen|et{#ENV{twitter_consumer_key}|strlen}|oui)
						<li class="associer_twitter_compte twitter_conf">
							[(#SET{infos_compte,[(#VAL{account/verify_credentials}|microblog_twitter_api)]})]
							[(#SET{name,#GET{infos_compte}|table_valeur{screen_name}})]
							[(#SET{url,#VAL{http://twitter.com/}|concat{#GET{name}}})]
							[(#GET{name}|oui)
								<a href='[(#URL_ACTION_AUTEUR{twitter_oauth_request,'-1',#SELF})]'><:microblog:label_dissocier_compte_twitter{nom=#GET{name},url=#GET{url}}:></a>	
							]
							[(#GET{name}|non)
								<a href='[(#URL_ACTION_AUTEUR{twitter_oauth_request,'',#SELF})]'><:microblog:label_associer_compte_twitter:></a>	
							]
						</li>]]
					</ul>
					<script type="text/javascript">
						jQuery(document).ready(function(){
							[(#ENV{service}|=={twitter}|oui)
								jQuery('ul.compte li').not('.twitter_conf').not('.editer_service').hide();
							]
							[(#ENV{service}|=={twitter}|non)
								jQuery('ul.compte li.twitter_conf').hide();
							]
							jQuery('.editer_service select').change(function(){
								if(jQuery(this).val() == 'twitter'){
									jQuery('ul.compte li.twitter_conf').slideDown('slow',function(){
										jQuery('ul.compte li').not('.twitter_conf').not('.editer_service').slideUp();
									});
								}else{
									jQuery('ul.compte li').not('.twitter_conf').not('.editer_service').slideDown('slow',function(){
										jQuery('ul.compte li.twitter_conf').slideUp();
									});
								}
							});
						});
					</script>
				</fieldset>
			</li>
			<li class="fieldset">
				<fieldset>
					<legend><:microblog:invite:></legend>
					<ul>
						<li>
							<label><:microblog:invite_statut:></label>
							<p class="explication"><:microblog:invite_statut_explications:></p>
							<div class="choix">
								<input type="checkbox" name="invite"[
									(#ENV{invite}|?{checked="checked"})] id="invite" />
								<label for="invite"><:microblog:invite_afficher:></label>
							</div>
						</li>
					</ul>
				</fieldset>
			</li>
			<li class="fieldset">
				<fieldset>
					<legend><:microblog:notifications:></legend>
					<ul>
						<li>
							<label><:microblog:notifications_publiques:></label>
							<p class="explication"><:microblog:elements_signaler:> :</p>
							<div class="choix">
								<input type="checkbox" name="evt_forumposte"[
									(#ENV{evt_forumposte}|?{checked="checked"})] id="evt_forumposte" />
								<label for="evt_forumposte"><:microblog:poster_forums:></label>
							</div>
							<div class="choix">
								<input type="checkbox" name="evt_proposerarticles"[
									(#ENV{evt_proposerarticles}|?{checked="checked"})] id="evt_proposerarticles" />
								<label for="evt_proposerarticles"><:microblog:proposer_articles:></label>
							</div>
							<hr />
							<div class="choix">
								<input type="checkbox" name="evt_publierarticles"[
									(#ENV{evt_publierarticles}|?{checked="checked"})] id="evt_publierarticles" />
								<label for="evt_publierarticles"><:microblog:publier_articles:></label>
								<div id="evt_publierarticles_options"[(#ENV{evt_publierarticles}|non)style="display:none;"]>
								[(#CONFIG{post_dates}|=={non}|oui)
									<div class="choix">
										<input type="radio" name="evt_publierarticlesfutur" id="evt_publierarticlesfutur_validation" value="validation"[
											(#ENV{evt_publierarticlesfutur}|=={publication}|?{'',checked="checked"})] />
										<label for="evt_publierarticlesfutur_validation"><:microblog:publier_articles_futurs_immediatement:></label>
									</div>
									<div class="choix">
										<input type="radio" name="evt_publierarticlesfutur" id="evt_publierarticlesfutur_publication" value="publication"[
											(#ENV{evt_publierarticlesfutur}|=={publication}|?{checked="checked"})] />
										<label for="evt_publierarticlesfutur_publication"><:microblog:publier_articles_futurs_visibles:></label>
									</div>
								]
									<div class="choix">
										<input type="checkbox" name="short_url" id="short_url" value="1"[
											(#ENV{short_url,''}|oui)checked="checked"] />
										<label for="short_url"><:microblog:publier_articles_shorturl:></label>
									</div>

									<div class="choix">
										<input type="text" name="attente" id="attente" value="[(#ENV{attente}|sinon{1})]" size="2" />
										<label for="attente"><:microblog:publier_articles_attente:>
										<small>(n&#233;cessite job_queue)</small>
										</label>
									</div>


								</div>
								<script type="text/javascript">
									function affiche_bloc_synchro(){
										if (jQuery("#evt_publierarticles").attr("checked"))
											jQuery("#evt_publierarticles_options").show('fast');
										else
											jQuery("#evt_publierarticles_options").hide('fast');
									}
									jQuery(document).ready(function(){
										jQuery("#evt_publierarticles").click(affiche_bloc_synchro);
									});
								</script>
							</div>
						</li>
					</ul>
				</fieldset>
			</li>
		</ul>
		<p class="boutons">
			<input type="submit" name="_cfg_ok" value="<:ok:>" class="submit" />
<!--
			<input type="reset" value="<:reset:>" class="submit" />
			<input type="submit" name="_cfg_delete" value="<:supprimer:>" class="submit" />
-->
		</p>
	</div></form>
</div>