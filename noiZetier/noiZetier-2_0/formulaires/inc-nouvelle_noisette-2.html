#SET{noisette, (#ENV{erreurs}|table_valeur{noisette})}
#SET{infos, (#ENV{erreurs}|table_valeur{infos_#GET{noisette}})}
<fieldset>
<legend>
	[(#ENV{id_noisette}|non)
		[(#GET{infos}|table_valeur{icon}|image_reduire{24})]
	]
	[<span style="vertical-align:middle;">(#GET{infos}|table_valeur{nom})</span>]
</legend>
[<div class="explication">(#GET{infos}|table_valeur{description})</div>]
<B_parametres>
<ul class="parametres_noisette">
	<BOUCLE_parametres(POUR){tableau #GET{infos}|table_valeur{parametres}}>
	[(#SET{erreurs,[(#ENV**{erreurs}|table_valeur{parametres}|table_valeur{#CLE})]})]
	<li class="editer_texte[ (#GET{erreurs}|oui)erreur]">
		[<span class='erreur_message'>(#GET{erreurs})</span>]
		<BOUCLE_test_saisies(CONDITION){si #PLUGIN{'saisies'}}>
			#SET{label,(#_parametres:VALEUR|table_valeur{label})}
			#SET{saisie,(#_parametres:VALEUR|table_valeur{saisie}|sinon{input})}
			#SET{defaut,(#ENV{parametres}|table_valeur{#CLE}|sinon{#ENV{erreurs}|table_valeur{#CLE}})}
			#SET{obligatoire,(#_parametres:VALEUR|table_valeur{obligatoire}|?{'oui','non'})}
			
			#SAISIE{#GET{saisie},parametres[#CLE],label=#GET{label},defaut=#GET{defaut},obligatoire=#GET{obligatoire}}
		</BOUCLE_test_saisies>
			<label for="#CLE">[(#VALEUR|table_valeur{label})] [(#VALEUR|table_valeur{obligatoire}|oui)&#91;<:noizetier:formulaire_obligatoire:>&#93;]</label>
			[(#_parametres:VALEUR|table_valeur{saisie}|=={'oui_non'}|oui)<div class="explication"><:noizetier:formulaire_explication_oui_non:></div>]
			<input type="text" class="text" name="parametres[#CLE]" value="[(#ENV{parametres}|table_valeur{#CLE}|sinon{#ENV{erreurs}|table_valeur{#CLE}})]" />
		<//B_test_saisies>
	</li>
	</BOUCLE_parametres>
</ul>
</B_parametres>
	<div class="explication"><:noizetier:formulaire_noisette_sans_parametre:></div>
<//B_parametres>

<p class='boutons'>
	<span class='image_loading'></span>
	[(#ENV{bloc_page_nouvelle_noisette}|oui)
		<input type="hidden" name="bloc_page_nouvelle_noisette" value="#ENV{bloc_page_nouvelle_noisette}" />
		<input type="hidden" name="rang" value="#ENV{rang_suivant}" />
	]
	[(#ENV{id_noisette}|oui)
		<input type="hidden" name="id_noisette" value="#ENV{id_noisette}" />
	]
	<input type="hidden" name="noisette" value="#GET{noisette}" />
	<input type="submit" class="submit link" value="<:bouton_annuler:>" />
	<input type="submit" class="submit" name="enregistrer" value="<:bouton_enregistrer:>" />
</p>
</fieldset>