<div class="formulaire_spip formulaire_editer [formulaire_(#ENV{form})]">
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]

	<BOUCLE_editable(CONDITION){si #ENV{editable}}>
		<form method='post' action='#ENV{action}' enctype='multipart/form-data'><div>
			[(#REM) declarer les hidden qui declencheront le service du formulaire
			parametre : url d'action ]
			#ACTION_FORMULAIRE{#ENV{action}}
			#SET{yaml,#ENV**{erreurs}|table_valeur{yaml}}
			#SET{code_yaml,#ENV**{erreurs}|table_valeur{code_yaml}}
			<BOUCLE_test(CONDITION){si (#GET{yaml}|non)}>
			<ul>
				<li class="fieldset">
					<fieldset>
						<h3 class="legend"><:noizetier:formulaire_choix_fichier:></h3>
						<ul>
							#SET{name,import}
							#SET{obli,'obligatoire'}
							#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
							<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
								<label for="#GET{name}"><:noizetier:formulaire_importer:></label>
								<div class="explication"><:noizetier:formulaire_importer_explication:></div>
								[<span class='erreur_message'>(#GET{erreurs})</span>]
								<input type="file" class="file" name="#GET{name}" id="#GET{name}" size="20" value="#ENV{#GET{name}}" />
							</li>
							
							<B_fichiers_locaux>
							#SET{name,import_local}
							#SET{obli,'obligatoire'}
							#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
							<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
								<label for="#GET{name}"><:noizetier:formulaire_import_local:></label>
								<div class="explication"><:noizetier:formulaire_import_local_explication:></div>
								[<span class='erreur_message'>(#GET{erreurs})</span>]
								<select class="select" name="#GET{name}" id="#GET{name}">
								<BOUCLE_fichiers_locaux(POUR){tableau #NOIZETIER_LISTE_CONFIG}{par cle}>
									<option value="#CLE">#VALEUR</option>
								</BOUCLE_fichiers_locaux>
								</select>
							</li>
							</B_fichiers_locaux>
						</ul>
						<p class='boutons'>
							<input type='submit' class='submit' value='<:noizetier:formulaire_bouton_importer:>' />
						</p>
					</fieldset>
				</li>
			</ul>
			</BOUCLE_test>
			
			<div style="padding:5px;">
			<p><strong><:noizetier:formulaire_fichier_config:></strong> [(#ENV**{erreurs}|table_valeur{fichier})]</p>
			<B_pages>
			<p><:noizetier:formulaire_liste_pages_config:></p>
			<ul>
			<BOUCLE_pages(POUR){tableau #GET{yaml}|table_valeur{noisettes}}>
				[<li style="padding:0 0 0 10px; border:none;">• (#VALEUR|table_valeur{type}|concat{[-(#VALEUR|table_valeur{composition})]}|unique)</li>]
			</BOUCLE_pages>
			</ul>
			</B_pages>
			<B_types_compos>
			<p><:noizetier:formulaire_liste_compos_config:></p>
			<ul>
			<BOUCLE_types_compos(POUR){tableau #GET{yaml}|table_valeur{noizetier_compositions}}>
				<BOUCLE_compos(POUR){tableau #VALEUR}>
				[<li style="padding:0 0 0 10px; border:none;">• (#_types_compos:CLE|concat{'-',#CLE})</li>]
				</BOUCLE_compos>
			</BOUCLE_types_compos>
			</ul>
			</B_types_compos>
			</div>
			<ul>
				<li class="fieldset">
					<fieldset>
						<h3 class="legend"><:noizetier:formulaire_options_importation:></h3>
						<ul>
							[<textarea name="code_yaml" id="code_yaml" style="display:none;">(#GET{code_yaml})</textarea>]
							#SET{name,type_import}
							#SET{obli,'obligatoire'}
							#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
							<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
								<label for="#GET{name}"><:noizetier:formulaire_type_import:></label>
								<div class="explication"><:noizetier:formulaire_type_import_explication:></div>
								[<span class='erreur_message'>(#GET{erreurs})</span>]
								<select class="select" name="#GET{name}" id="#GET{name}">
									<option value="fusion"><:noizetier:formulaire_import_fusion:></option>
									<option value="remplacer"><:noizetier:formulaire_import_remplacer:></option>
								</select>
							</li>
							
							#SET{name,import_compos}
							#SET{obli,'obligatoire'}
							#SET{erreurs,#ENV**{erreurs}|table_valeur{#GET{name}}}
							[(#GET{yaml}|table_valeur{noizetier_compositions}|oui)
							<li class="editer_[(#GET{name})][ (#GET{obli})][ (#GET{erreurs}|oui)erreur]">
								<label for="#GET{name}"><:noizetier:formulaire_import_compos:></label>
								[<span class='erreur_message'>(#GET{erreurs})</span>]
								<select class="select" name="#GET{name}" id="#GET{name}">
									<option value="oui"><:noizetier:oui:></option>
									<option value="non"><:noizetier:non:></option>
								</select>
							</li>
							]
							[(#GET{yaml}|table_valeur{noizetier_compositions}|non)
							<input type="hidden" name="import_compos" id="import_compos" value="non" />
							]
						</ul>
						<p class='boutons'>
							<input type="submit" class="submit link" name="annuler" value="<:bouton_annuler:>" />
							<input type='submit' class='submit' name="importer" value='<:noizetier:formulaire_bouton_importer:>' />
						</p>
					</fieldset>
				</li>
			</ul>
			<//B_test>
		</div></form>
	</BOUCLE_editable>
</div>