#SET{rang_suivant,1}
<ul id="bloc-#ENV{bloc}" class="noisettes">
	<BOUCLE_noisettes(NOISETTES){type}{composition}{bloc}{par rang}>
	<li class="noisette"[ style="background-image:url((#NOIZETIER_LISTE_NOISETTES|table_valeur{#NOISETTE}|table_valeur{icon}|image_reduire{24}|extraire_attribut{src}))"]>
		<BOUCLE_test_modifier(CONDITION){si #ENV{id_noisette}|=={#ID_NOISETTE}|non}>
		<div class="ligne">
			<div class="description arial2">
				[(#REM) On teste que la noisette est toujours accessible]
				[(#NOIZETIER_LISTE_NOISETTES|table_valeur{#NOISETTE}|non)
					<img src="#CHEMIN{images/warning.gif}" alt="WARNING"/>
					<strong style="color:red"><:noizetier:warning_noisette_plus_disponible:></strong>
					<p><:noizetier:warning_noisette_plus_disponible_details{squelette=noisette/#NOISETTE.html}:></p>
				]
				<div class="titre">[(#NOIZETIER_LISTE_NOISETTES|table_valeur{#NOISETTE}|table_valeur{nom}|sinon{#NOISETTE})]</div>
					<div class="infos">
					<BOUCLE_parametres(POUR){tableau #PARAMETRES|unserialize}>
					[<span class="nom_param">(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{label}|sinon{#CLE})</span>]
					[(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{saisie}|=={'oui_non'}|oui)
						[(#VALEUR|oui) <:item_oui:>][(#VALEUR|non) <:item_non:>]
					]
					[(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{saisie}|=={'textarea'}|oui)
						[(#VALEUR**|propre)]
						[<div class="notes">(#NOTES)</div>]
					]
					[(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{saisie}|=={'oui_non'}|non)
						[(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{saisie}|=={'textarea'}|non)
							[(#NOIZETIER_PARAMS_NOISETTE{#NOISETTE}|table_valeur{#CLE}|table_valeur{datas}|table_valeur{#VALEUR}|sinon{#VALEUR})]
						]
					]
					
					<br />
					</BOUCLE_parametres>
					</div>
			</div>
			[(#AUTORISER{configurer,noizetier}|oui)
			<div class="actions">
				[(#NOIZETIER_LISTE_NOISETTES|table_valeur{#NOISETTE}|oui)
				<button name="modifier_noisette" value="#ID_NOISETTE" title="<:noizetier:formulaire_modifier_noisette:>">
					[<img height="24" width="24" src="(#CHEMIN{img/noizetier_action_modifier.png})" />]
				</button>
				]
				<button name="supprimer_noisette" value="#ID_NOISETTE" title="<:noizetier:formulaire_supprimer_noisette:>">
					[<img height="24" width="24" src="(#CHEMIN{img/noizetier_action_supprimer.png})" />]
				</button>
				<button name="deplacer_noisette" value="#ID_NOISETTE-bas" title="<:noizetier:formulaire_deplacer_bas:>">
					[<img height="24" width="24" src="(#CHEMIN{img/noizetier_action_bas.png})" />]
				</button>
				<button name="deplacer_noisette" value="#ID_NOISETTE-haut" title="<:noizetier:formulaire_deplacer_haut:>">
					[<img height="24" width="24" src="(#CHEMIN{img/noizetier_action_haut.png})" />]
				</button>
			</div>
			]
			<div class="nettoyeur"></div>
		</div>
		</BOUCLE_test_modifier>
		#INCLURE{fond=formulaires/inc-nouvelle_noisette-2, env, id_noisette=#ID_NOISETTE}
		<//B_test_modifier>
		
	</li>
	#SET{rang_suivant,(#RANG|plus{1})}
	</BOUCLE_noisettes>
	<li class="editer_noisette fieldset">
		<BOUCLE_pas_demande_noisette(CONDITION){si #ENV{bloc_page_nouvelle_noisette}|=={#ENV{bloc_page}}|non}>
			[(#AUTORISER{configurer,noizetier}|oui)
			<div class="boutons">
			<button type="submit" class="submit" name="demander_nouvelle_noisette" value="#ENV{bloc_page}">
				[<img src="(#CHEMIN{img/noizetier_action_ajouter.png})" />]
				<:noizetier:formulaire_ajouter_noisette:>
			</button>
			</div>
			]
		</BOUCLE_pas_demande_noisette>
			[(#ENV{noisette}|non)
				#INCLURE{fond=formulaires/inc-nouvelle_noisette-1, env, bloc_page_nouvelle_noisette=#ENV{bloc_page_nouvelle_noisette}}
			]
			[(#ENV{noisette}|oui)
				#INCLURE{fond=formulaires/inc-nouvelle_noisette-2, env, bloc_page_nouvelle_noisette=#ENV{bloc_page_nouvelle_noisette}, rang_suivant=#GET{rang_suivant}}
			]
		<//B_pas_demande_noisette>
	</li>
</ul>
