[(#SET{id_rubrique, #ENV{id_rubrique}|intval})]
[(#SET{niveau_max_txt, #ENV{niveau}|intval|?{#ENV{niveau},infini}})]
[(#SET{niveau_max, #ENV{niveau}|intval|?{#ENV{niveau},1000}})]
[(#SET{sousrub_cond, #ENV{sousrub_cond}|=={oui}|?{'on',''}})]
[(#SET{tri_num, #ENV{tri_num}|ou{#ENV{tri_alpha}}|?{#ENV{tri_num},'titre'}})]
[(#SET{tri_alpha, #ENV{tri_num}|ou{#ENV{tri_alpha}}|?{#ENV{tri_alpha},'titre'}})]
[(#ENV{appel_formulaire}|oui)
	[(#SET{titre, #GET{id_rubrique}|?{#INFO_TITRE{rubrique, #GET{id_rubrique}}, <:info_racine_site:>}})]
	<div class="titre">#GET{titre}</div>
	<div class="infos">
		[(#GET{niveau_max_txt}|=={infini}|non)
			<:menus:entree_sur_n_niveaux{n=#GET{niveau_max_txt}}:>
		]
		[(#GET{niveau_max_txt}|=={infini}|oui)
			<:menus:entree_infini:>
		]
		[(#GET{sousrub_cond}|oui)
			<br /><:menus:info_sousrub_cond:>
		]
		<br /><:menus:info_tri:> [(#GET{tri_num}) <:menus:info_tri_num:>][(#GET{tri_num}|et{GET{tri_alpha}}), ][(#GET{tri_alpha}) <:menus:info_tri_alpha:>]
	</div>
]
<BOUCLE_appel(CONDITION){si #ENV{appel_menu}|oui}>
	<BOUCLE_rubriques(RUBRIQUES){id_parent=#GET{id_rubrique}}{par num #GET{tri_num}}{par #GET{tri_alpha}}>
		
		#SET{niveau_actuel,#EVAL{1}|intval}
		<li class="menu-entree[ (#ID_RUBRIQUE|menus_exposer{rubrique,#ENV*{env}})]">
			<a href="#URL_RUBRIQUE" title="[(#TITRE|attribut_html)]">#TITRE</a>
			[(#SET{cond,#GET{niveau_max}|>{#GET{niveau_actuel}}|et{#GET{sousrub_cond}|?{#ID_RUBRIQUE|menus_exposer{rubrique,#ENV*{env}},'on'}}})]
			<BOUCLE_test_niveau(CONDITION){si #GET{cond}}>
			<B_sous_rubriques>
			<ul class="menu-liste">
				<BOUCLE_sous_rubriques(RUBRIQUES){id_parent}{par num #GET{tri_num}}{par #GET{tri_alpha}}>
				#SET{niveau_actuel,#GET{niveau_actuel}|plus{1}}
				

				
				<li class="menu-entree[ (#ID_RUBRIQUE|menus_exposer{rubrique,#ENV*{env}})]">
					<a href="#URL_RUBRIQUE" title="[(#TITRE|attribut_html)]">#TITRE</a>
					[(#SET{cond,#GET{niveau_max}|>{#GET{niveau_actuel}}|et{#GET{sousrub_cond}|?{#ID_RUBRIQUE|menus_exposer{rubrique,#ENV*{env}},'on'}}})]
					<BOUCLE_test_niveau2(CONDITION){si #GET{cond}}>
					<BOUCLE_sous_sous(BOUCLE_sous_rubriques)></BOUCLE_sous_sous>
					</BOUCLE_test_niveau2>
				</li>
				</BOUCLE_sous_rubriques>
			[(#SET{sous_rubrique#ID_RUBRIQUE,oui})]
			</B_sous_rubriques>
			<B_articles>
			[(#GET{sous_rubrique#ID_RUBRIQUE}|non)
				<ul class="menu-liste">
			]
				<BOUCLE_articles(ARTICLES){id_rubrique} {par num #GET{tri_num}}{par #GET{tri_alpha}}>
						<li class="menu-entree [ (#ID_ARTICLE|menus_exposer{article,#ENV*{env}})]">
							<a href="#URL_ARTICLE" title="[(#TITRE|attribut_html)]">#TITRE</a>
						</li>
				</BOUCLE_articles>
			</ul>
			</B_articles>
			[(#GET{sous_rubrique#ID_RUBRIQUE}|oui)
				</ul>
			]
			<//B_articles>
			</BOUCLE_test_niveau>
		</li>
	</BOUCLE_rubriques>
	<BOUCLE_articles2(ARTICLES){id_rubrique=#GET{id_rubrique}} {par num #GET{tri_num}}{par #GET{tri_alpha}}>
		<li class="menu-entree [ (#ID_ARTICLE|menus_exposer{article,#ENV*{env}})]">
			<a href="#URL_ARTICLE" title="[(#TITRE|attribut_html)]">#TITRE</a>
		</li>
	</BOUCLE_articles2>
	
</BOUCLE_appel>
