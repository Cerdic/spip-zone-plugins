[(#REM)

	/!\ Cette saisie n√©cessite du javascript pour fonctionner correctement toute seule.
		En absence de JS, il faut gerer soit meme les 3 champs postes.
	
	Cette saisie cree 3 champs a partir d'une date au format datetime mysql.
	Lorsqu'on passe un nom de saisie, les 3 champs se suffixent de _jour, _mois et _annee.
	A chaque modification, un champ cache est modifie, contenant la date au format datetime.

	Options :
	- label_(jour|mois|annee)
	- size_(jour|mois|annee)
	- maxlength_(jour|mois|annee)
	
	[(#SAISIE{date_naissance, date_jour_mois_annee,
		label=Date de naissance
	})]
]
#SET{valeur,#ENV{valeur,#ENV{defaut}}}
<input type='hidden' name="#ENV{nom}" [ value="(#GET{valeur})"] class='datetime' />
<div class="choix">
	[<label for="champ_#ENV{nom}_jour">(#ENV{label_jour,<:saisies:label_jour:>})</label>]
	<input type="text" name="#ENV{nom}_jour" class="text date_jour[ (#ENV{class})]" id="champ_#ENV{nom}_jour"[ value="(#GET{valeur}|journum)"][ size="(#ENV{size_jour, 2})"][ maxlength="(#ENV{maxlength_jour, 2})"][ disabled="(#ENV{disable})"][ readonly="(#ENV{readonly})"][(#ENV{obligatoire}|et{#HTML5}|oui) required="required"] onChange='changer_la_date(this);' />
</div>
<div class="choix">
	[<label for="champ_#ENV{nom}_mois">(#ENV{label_mois,<:saisies:label_mois:>})</label>]
	<input type="text" name="#ENV{nom}_mois" class="text date_mois[ (#ENV{class})]" id="champ_#ENV{nom}_mois"[ value="(#GET{valeur}|mois)"][ size="(#ENV{size_mois, 2})"][ maxlength="(#ENV{maxlength_mois, 2})"][ disabled="(#ENV{disable})"][ readonly="(#ENV{readonly})"][(#ENV{obligatoire}|et{#HTML5}|oui) required="required"] onChange='changer_la_date(this);' />
</div>
<div class="choix">
	[<label for="champ_#ENV{nom}_annee">(#ENV{label_annee,<:saisies:label_annee:>})</label>]
	<input type="text" name="#ENV{nom}_annee" class="text date_annee[ (#ENV{class})]" id="champ_#ENV{nom}_annee"[ value="(#GET{valeur}|annee)"][ size="(#ENV{size_annee, 4})"][ maxlength="(#ENV{maxlength_annee, 4})"][ disabled="(#ENV{disable})"][ readonly="(#ENV{readonly})"][(#ENV{obligatoire}|et{#HTML5}|oui) required="required"] onChange='changer_la_date(this);' />
</div>
<script type='text/javascript'>
function changer_la_date(me) {
	li = $(me).parent().parent();
	jour = li.find('.date_jour').attr('value').trim();
	mois = li.find('.date_mois').attr('value').trim();
	annee = li.find('.date_annee').attr('value').trim();
	date = li.find('.datetime').attr('value').trim();
	while(jour.lengh < 2) {jour = '0' + jour;}
	while(mois.length < 2) {mois = '0' + mois;}
	while(annee.length < 4) {annee = '0' + annee;}
	date = annee + '-' + mois + '-' + jour + date.substring(10);
	li.find('.datetime').attr('value',date);
}
</script>
