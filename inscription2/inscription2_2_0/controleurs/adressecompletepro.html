[(#REM)

	Controleur pour le crayon 'adressecompletepro', uniquement html
	Validation JS pour les champs spécifiés obligatoires
	Si les champs ne sont pas activés dans le CFG, ils n'apparaissent pas...

]
#CACHE{0}
<BOUCLE_a(AUTEURS_ELARGIS){id_auteur=#ENV{id_auteurs_elargi}}{tout}>
[<script type="text/javascript" src="(#URL_PAGE{crayons_validation.js}|parametre_url{lang,#ENV{lang}})"></script>]
<script type="text/javascript">

	var me = cQuery(".auteurs_elargi-adressecompletepro-#ID_AUTEUR");
	var id = me.crayon().find('form');

	function validation(){
		var me = cQuery(".auteurs_elargi-adressecomplete-#ID_AUTEUR");
		var id = me.crayon().find('form');
		var validator = cQuery(id).validate({
			onkeyup:function(){
				validation();
			},
			showErrors: function(errors, errorList) {
				crayon_affiche_submit(me,id);
				validator.defaultShowErrors();
			},
			success: function(label){
				label.parents('li.erreur').removeClass('erreur');
				label.remove();
				crayon_affiche_submit(me,id)
			}
		});
		//On test le formulaire pour chercher les potentielles erreurs
		validator.form();
		crayon_affiche_submit(me,id);
	}
	//On ajoute l'asterisque qui signale qu'un champ est obligatoire
	id.find('.obligatoire label').not('.error').append('*');
	setTimeout('validation()',500);
</script>
	<fieldset[ style="(#ENV{style})"]>
		<legend><:inscription2:votre_adresse_pro:></legend>
		<ul>
			[(#CONFIG{inscription2/adresse_pro_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/adresse_pro_obligatoire}|=={on}|oui)#SET{adresse_pro_obl,true}]
			[(#GET{adresse_pro_obl}|?{<li class="obligatoire">,<li>})]
			<label><:inscription2:adresse_pro:></label>
			<textarea class="crayon-active text adresse[(#GET{adresse_pro_obl}|oui) obligatoire]" name="#ENV{name_adresse_pro}" style="width:#ENV{largeur}px;">[(#ADRESSE_PRO**|entites_html)]</textarea><br />
			</li>]

			[(#CONFIG{inscription2/code_postal_pro_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/code_postal_pro_obligatoire}|=={on}|oui)#SET{code_postal_pro_obl,true}]
			[(#GET{code_postal_pro_obl}|?{<li class="obligatoire">,<li>})]
			<label><:inscription2:code_postal_pro:></label>
			<input class="crayon-active text cp[(#GET{code_postal_pro_obl}|oui) obligatoire]" name="#ENV{name_code_postal_pro}" style="width:#ENV{largeur}px;" value="[(#CODE_POSTAL_PRO**|entites_html)]" />
			</li>]

			[(#CONFIG{inscription2/ville_pro_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/ville_pro_obligatoire}|=={on}|oui)#SET{ville_pro_obl,true}]
			[(#GET{ville_pro_obligatoire}|?{<li class="obligatoire">,<li>})]
			<label><:inscription2:ville_pro:></label>
			<input class="crayon-active text ville[(#GET{ville_pro_obligatoire}|oui) obligatoire]" name="#ENV{name_ville_pro}" style="width:#ENV{largeur}px;" value="[(#VILLE_PRO**|entites_html)]" />
			</li>]

			[(#CONFIG{inscription2/pays_pro_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/pays_pro_obl}|=={on}|oui) #SET{pays_pro_obl,true}]
			[(#GET{pays_pro_obligatoire}|?{<li class="obligatoire">,<li>})]
			<label><:inscription2:pays_pro:></label>
			#SET{id,#PAYS_PRO}
			<select class="crayon-active text[(#GET{pays_pro_obligatoire}|oui) obligatoire]" name="#ENV{name_pays_pro}" onchange="validation()">
				[(#INCLURE{fond=prive/listes/select_pays}{id=#GET{id}})]
			</select>
			</li>]
		</ul>
	</fieldset>
</BOUCLE_a>
<//B_a>