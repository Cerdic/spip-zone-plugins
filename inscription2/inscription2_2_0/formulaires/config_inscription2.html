<!-- autoriser=webmestre -->
<!-- refus=<:cfg:refus_configuration_webmestre:> -->
<!-- nom=inscription2 -->

<div class="formulaire_spip formulaire_config formulaire_config_inscription2">
[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]

<form method="post" action="#ENV{action}">
	<div>
		#ACTION_FORMULAIRE{#ENV{action}}

		<fieldset>
			<ul>
				<li class="fieldset">
					<fieldset>
						<h3 class="legend"><:inscription2:legend_affordance_form:></h3>
						<ul>
							<li>
								[(#SAISIE{radio, affordance_form,
									label=<:inscription2:label_affordance_form:>,
									explication=<:inscription2:explication_affordance_form:>,
									defaut=#ARRAY{0,login},
									datas=#ARRAY{
										login,<:inscription2:choix_affordance_login:>,
										email,<:inscription2:choix_affordance_email:>,
										login_et_email,<:inscription2:choix_affordance_login_email:>}})]
							</li>
						</ul>
					</fieldset>
				</li>
				<li class="fieldset">
					<fieldset>
						<h3 class="legend"><:inscription2:info_defaut:></h3>
						<ul>
							<li>
								<div class="explication">
									<p><:inscription2:info_defaut_desc:></p>
									<small id="legend">
										<strong><:inscription2:form:></strong><:inscription2:form_expl:><br />
										<strong><span style="color:red">*</span></strong><:inscription2:form_oblig_expl:><br />
										<strong><:inscription2:fiche_mod:></strong><:inscription2:fiche_mod_expl:><br />
										<strong><:inscription2:fiche:></strong><:inscription2:fiche_expl:><br />
										<strong><:inscription2:table:></strong><:inscription2:table_expl:><br />
									</small>
								</div>
							</li>
							<li>
								<table>
									<thead>
										<tr>
											<th class="label"> </th>
											<th style="width:140px"><:inscription2:form:></th>
											<th style="width:70px"><:inscription2:fiche_mod:></th>
											<th style="width:70px"><:inscription2:fiche:></th>
											<th style="width:70px"><:inscription2:table:></th>
										</tr>
									</thead>
									<tr>
										<td class="label">
											<label><:inscription2:nom:></label>
										</td>
										<td>
											<input type="checkbox" name="nom" [checked="(#ENV{nom}?{checked})"] onclick="showoblig(this)" id="nom" />
											<div style="[(#CONFIG{inscription2/nom}|=={on}|?{display: block;, display:none;})]">
												<input type="checkbox" name="nom_obligatoire" [checked="(#CONFIG{inscription2/nom_obligatoire}?{checked})"] id="nom_obligatoire" />
												<span style="color:red">*</span>
											</div>
										</td>
										<td>
											<input type="checkbox" name="nom_fiche_mod" onclick="enadis(this,nom_fiche)" [checked="(#ENV{nom_fiche_mod}?{checked})"] id="nom_fiche_mod" />
										</td>
										<td>
											<input type="checkbox" name="nom_fiche" [checked="(#ENV{nom_fiche}?{checked})"] id="nom_fiche" [disabled ="(#ENV{nom_fiche_mod}?{disabled})"] />
										</td>
										<td>
											<input type="checkbox" name="nom_table" [checked="(#ENV{nom_table}?{checked})"] id="nom_table" />
										</td>
									</tr>
									<tr>
										<td class="label"><label><:inscription2:email:></label></td>
										<td>
											<input type="checkbox" name="email" checked="checked" id="email" onclick="alert('<:inscription2:par_defaut:>');return false;"/>
											<div style="display:none;">
												<input type="checkbox" name="email_obligatoire" checked="checked" id="email_obligatoire" />
											</div>
										</td>
										<td>
											<input type="checkbox" name="email_fiche_mod" onclick = "enadis(this,email_fiche)" [checked="(#ENV{email_fiche_mod}?{checked})"] id="email_fiche_mod" />
										</td>
										<td>
											<input type="checkbox" name="email_fiche" [checked="(#ENV{email_fiche}?{checked})"] id="email_fiche" [disabled ="(#ENV{email_fiche_mod}?{disabled})"] />
										</td>
										<td>
											<input type="checkbox" name="email_table" [checked="(#ENV{email_table}?{checked})"] id="email_table" />
										</td>
									</tr>
									<tr>
										<td class="label"><label><:inscription2:pass:></label></td>
										<td>
											<input type="checkbox" name="pass"[(#ENV{pass}|=={on}|oui) checked="checked"] id="pass" onclick="showoblig(this)" />
											<div style="[(#CONFIG{inscription2/pass}|=={on}|?{display: block;, display:none;})]">
												<input type="checkbox" name="pass_obligatoire" [checked="(#CONFIG{inscription2/pass_obligatoire}?{checked})"] id="pass_obligatoire" />
												<span style="color:red">*</span>
											</div>
										</td>
										<td>
											<input type="checkbox" name="pass_fiche_mod" onclick="enadis(this,pass_fiche)" [checked="(#ENV{pass_fiche_mod}?{checked})"] id="pass_fiche_mod" />
										</td>
										<td>
											<input type="checkbox" name="pass_fiche" disabled="disabled" id="pass_fiche" />
										</td>
										<td>
											<input type="checkbox" name="pass_table" disabled="disabled" id="pass_table" />
										</td>
									</tr>
								</table>
							</li>
						</ul>
					</fieldset>
				</li>

		[(#REM) ------------------------ INFORMATIONS PERSONNELLES? ------------------------ ]
		<INCLURE{fond=fonds/inscription2_infos_persos}>

		[(#REM) ------------------------ INFORMATIONS PROFESSIONNELLES? ------------------------ ]
		<INCLURE{fond=fonds/inscription2_infos_pros}>

		[(#REM) ------------------------ GREFFONS
		    geomap
		    echoppe
		    spiplistes
		    association
		    accesrestreint
		    abonnement
		    ...
		------------------------ ]
		#PIPELINE{i2_cfg_form}

		[(#REM) ------------------------ OPTIONS DES AUTEURS ------------------------ ]
		<li class="fieldset" id="option">
			<fieldset>
			<h3 class="legend"><:inscription2:info_gener:></h3>
			<ul>
				<li>
					<p class="explication">
						<:inscription2:info_gener_desc:>
					</p>
				</li>

				[(#SAISIE{case,divers}
					{label=<:inscription2:publication:>}
					{explication=<:inscription2:exp_publication:>})]

			</ul>
			</fieldset>
		</li>

		<li class="fieldset">
			<fieldset>
			<h3 class="legend"><:inscription2:info_internes:></h3>
			<ul>
				<li>
					<p class="explication">
						<:inscription2:info_internes_desc:>
					</p>
				</li>

				[(#SAISIE{case,divers}
					{label=<:inscription2:divers:>}
					{explication=<:inscription2:exp_divers:>})]

				<li>
					<label><:inscription2:statut:></label>
					<p class="explication"><:inscription2:exp_statut:></p>
					<select name="statut_nouveau" id="statut_nouveau">
						<option value='6forum' [selected="(#ENV{statut_nouveau}|=={6forum}|oui)selected"]><:inscription2:visiteur:></option>
						<option value='1comite' [selected="(#ENV{statut_nouveau}|=={1comite}|oui)selected"]><:inscription2:auteur:></option>
					</select>
				</li>

				[(#SAISIE{case,creation}
					{label=<:inscription2:creation:>})]

				<li>
					<label><:inscription2:statut_rel:></label>
					<p class="explication"><:inscription2:exp_statut_rel:></p>
					<input type="checkbox" name="statut_int" onclick="showhide(this, '#statut_interne')" [checked="(#ENV{statut_int}?{checked})"] id="statut_int" />
					<input type="text" name="statut_interne" id="statut_interne" style="[(#ENV{statut_int}|=={on}|?{display: block;, display:none;})]" value="#ENV{statut_interne}" />
				</li>
			</ul>
			</fieldset>
		</li>
	</ul>
	<p class="boutons">
		<input type="submit" name="_cfg_ok" class="submit" value="<:valider:>" />
		<input type="submit" name="_cfg_delete" class="reset" value="<:effacer:>" />
	</p>
		</fieldset>
	</div>
</form>

[(#REM) Code jQuery plier/deplier les listes ]
<script type="text/javascript"><!--
function showhide(boxName, boxNom) {
	if(boxName.checked){
		$(boxNom).slideDown('slow');
	}
	else
		$(boxNom).slideUp('slow');
}

function showoblig(boxName) {
	if (boxName.checked) {
		$(boxName).parent().find('div').slideDown('slow');
	}
	else {
		$(boxName).parent().find('div').slideUp('slow');
		$(boxName).parent().find('div').find('input[type=checkbox]').eq(0).attr({
			checked: ''
		});
	}
}

function enadis(boxName, boxNom) {
	if(boxName.checked){
		boxNom.disabled = true;
		boxNom.checked = false;
	}else
		boxNom.disabled = false;
}
// --></script>

</div>
