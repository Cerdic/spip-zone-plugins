[(#REM)

	Controleur pour le crayon 'nom-complet', uniquement html
	Validation JS pour les champs spécifiés obligatoires
	Si les champs ne sont pas activés dans le CFG, ils n'apparaissent pas...

]
#CACHE{0}
<BOUCLE_b(AUTEURS_ELARGIS){id_auteur=#ENV{id_auteurs_elargi}}{tout}>
[<script type="text/javascript" src="(#URL_PAGE{crayons_validation.js}|parametre_url{lang,#ENV{lang}})"></script>]
<script type="text/javascript">
	if (typeof cQuery.fn.validate == "function") {
		var me = cQuery(".auteurs_elargi-nomcomplet-#ID_AUTEUR");
		var id = me.crayon().find('form');

		function validation(){
			var validator = cQuery(id).validate({
				onkeyup:function(){
					validation();
				},
				showErrors: function(errors, errorList) {
					crayon_affiche_submit(me,id);
					validator.defaultShowErrors();
				},
				success: function(label){
					label.parents('li.erreur').removeClass('erreur');
					label.remove();
					crayon_affiche_submit(me,id)
				},
				rules: {
					#ENV{name_nom_famille}: {
						chaine:true,
						rangelength:[2,30]
					},
					#ENV{name_prenom}: {
						chaine:true,
						rangelength:[2,20]
					}
				},
				messages: {
					#ENV{name_nom_famille}: {
						chaine:"<:inscription2:chaine_valide:> <:inscription2:chainelettre:>"
					},
					#ENV{name_prenom}: {
						chaine:"<:inscription2:chaine_valide:> <:inscription2:chainelettre:>"
					}
				}
			});
			//On test le formulaire pour chercher les potentielles erreurs
			validator.form();
			crayon_affiche_submit(me,id);
		}
		//On ajoute l'asterisque qui signale qu'un champ est obligatoire
		id.find('.obligatoire label').append('*');
		setTimeout('validation()',500);
	}
</script>
	<fieldset[ style="(#ENV{style})"]>
		<legend><:inscription2:votre_nom_complet:></legend>
		<ul>
			[(#CONFIG{inscription2/nom_famille_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/nom_famille_obligatoire}|=={on}|oui)#SET{nom_famille_obl,true}]
			[(#GET{nom_famille_obl}|?{<li class="obligatoire">,<li>})]
				<label><:inscription2:nom_famille:></label>
				<input class="crayon-active text[(#GET{nom_famille_obl}|oui) obligatoire]" name="#ENV{name_nom_famille}" style="width:#ENV{largeur}px;" value="[(#NOM_FAMILLE**|entites_html)]" />
			</li>]

			[(#CONFIG{inscription2/prenom_fiche_mod}|=={on}|oui)
			[(#CONFIG{inscription2/prenom_obligatoire}|=={on}|oui)#SET{prenom_obl,true}]
			[(#GET{prenom_obl}|=={true}|?{<li class="obligatoire">,<li>})]
				<label><:inscription2:prenom:></label>
				<input class="crayon-active text[(#GET{prenom_obl}|oui) obligatoire]" name="#ENV{name_prenom}" style="width:#ENV{largeur}px;" value="[(#PRENOM**|entites_html)]" />
			</li>]
		</ul>
	</fieldset>
</BOUCLE_b>
<//B_b>