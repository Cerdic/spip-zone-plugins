<BOUCLE_form(FORMS){id_form=#ENV{id_form}}>
<div [style='(#ENV{style,''})']>
#SET{fieldset,#ENV{champ,''}|?{0,1}} #SET{need_fieldset,1} #SET{date-picker,0}

[(#REM) sondage ---------------------------------------]
[(#ENV{affiche_sondage})
<fieldset><legend>#TITRE</legend>
<:forms:sondage_deja_repondu:>
[(#PUBLIC|=={oui}|?{' '})#RESULTATS_SONDAGE]
</fieldset>
]
[(#REM) /sondage --------------------------------------]
<ul>
<BOUCLE_champs(FORMS_CHAMPS){id_form}{champ?}{tout}{type!=joint}{saisie!=non}{par rang}>
[(#ENV{affiche_sondage}|non)
	[(#GET{fieldset}|oui)
		[ [(#GET{need_fieldset}|non)</ul></fieldset></li>]<li class='fieldset'><fieldset class='#CHAMP'><legend>(#TYPE|=={separateur}|?{#TITRE,''})</legend><ul> #SET{need_fieldset,0}]
		[(#GET{need_fieldset}|oui)<li class='fieldset'><fieldset><legend>#_form:TITRE</legend><ul> #SET{need_fieldset,0}]
	]
	[(#TYPE|=={separateur}|non)
		<li class='saisie_#CHAMP[ (#ENV*{erreurs}|table_valeur{#CHAMP}|oui)erreur][ (#OBLIGATOIRE|=={oui}|?{obligatoire})]'>
			[(#TYPE|=={textestatique}|?{#TITRE,''})]
			[(#TYPE|=={textestatique}|non)
				#SET{type,#TYPE}
				[(#GET{type}|=={select}|et{#EXTRA_INFO|=={liste}|non}) #SET{type,radio}]
				#SET{afficher,1} #SET{ischeck,#GET{type}|match{^(radio|multiple|mot)}}
				#SET{label,#TITRE}
				[(#OBLIGATOIRE|=={oui}|oui)
				#SET{label,#GET{label}|concat{'<span class="label_obligatoire"> ',#VAL{forms:info_obligatoire_02}|_T{},'</span>'}}
				]
				[(#GET{ischeck}|non)[<label for="input-#ID_FORM-#CHAMP">(#GET{label})</label>]]
				[(#GET{ischeck}|oui)[<span class='label'>(#GET{label})</span>]]
				[<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{#CHAMP})</span>]
				[<span class="formInfo"><a href="#URL_PAGE{forms_tip,id_form=#ID_FORM&champ=#CHAMP&width=200}" class="jTip" id='aide-#ID_FORM-#CHAMP'>(#AIDE|?{'?'})</a></span>]
				[<div class='explication'>(#TYPE|forms_label_details)</div>]
				[(#GET{type}|=={select}|oui) #SET{afficher,0}
					<INCLURE{fond=formulaires/forms_champ_select}{id_form}{champ}{name=#ENV{name_#CHAMP,#CHAMP}}{env}>
				]
				[(#GET{type}|=={multiple}|oui) #SET{afficher,0}
					<INCLURE{fond=formulaires/forms_champ_case_choix}{type=checkbox}{id_form}{champ}{name=#ENV{name_#CHAMP,#CHAMP}}{env}>
				]
				[(#GET{type}|=={radio}|oui) #SET{afficher,0}
					<INCLURE{fond=formulaires/forms_champ_case_choix}{type=radio}{id_form}{champ}{name=#ENV{name_#CHAMP,#CHAMP}}{env}>
				]
				[(#TYPE|=={mot}|oui) #SET{afficher,0}
					<INCLURE{fond=formulaires/forms_select_mot}{id_form}{id_groupe=#EXTRA_INFO}{champ}{valeur=#ENV**{valeurs}}{name=#ENV{name_#CHAMP,#CHAMP}}{crayon_active=#ENV{crayon_active,''}}>
				]
				[(#TYPE|=={articles_mot}|oui) #SET{afficher,0}
					<INCLURE{fond=formulaires/forms_select_article_mot}{id_form}{id_mot=#EXTRA_INFO}{champ}{valeur=#ENV**{valeurs}}{name=#ENV{name_#CHAMP,#CHAMP}}{crayon_active=#ENV{crayon_active,''}}>
				]
				#SET{type,text}
				#SET{class,''}
				[(#TYPE|=={date}|oui) #SET{class,date-picker} #SET{date-picker,1}]
				[(#TYPE|=={password}|oui) #SET{type,password} #SET{afficher,0}]
				[(#TYPE|=={texte}|oui) #SET{afficher,0}
					[(#ENV{#CHAMP,''}|forms_textarea{10,80,#ENV{name_#CHAMP,#CHAMP},input-#ID_FORM-#CHAMP,[(#OBLIGATOIRE|=={oui}|?{forml,formo}|concat{' ',#ENV{crayon_active,''},' ',#ENV**{erreur}|table_valeur{#CHAMP}|?{champ_obli_oubli}})],'',#EXTRA_INFO})]
				]
				[(#TYPE|=={fichier}|oui) #SET{afficher,0}
					<input type='file' name='#ENV{name_#CHAMP,#CHAMP}' id='input-#ID_FORM-#CHAMP'
						class='file[ (#ENV{crayon_active,''})][ (#TYPE)]' 
						size='40' />
					#ENV{#CHAMP,''}
				]
				[(#REM) tous les autres types sont affiches ici]
				[(#GET{afficher}|oui)
				[(#SET{input,
					<input type="[(#GET{type})]" name='[(#ENV{name_#CHAMP,#CHAMP})]' id='input-#ID_FORM-#CHAMP' value="[(#ENV{#CHAMP,''})]" 
						class='[(#GET{type})][ (#GET{class})][ (#ENV{crayon_active,''})][ (#TYPE)]' 
						size='40' />
				})]
				[(#GET{input}|forms_input_champs{#ID_FORM,#TYPE,#CHAMP,#EXTRA_INFO,#OBLIGATOIRE,#ENV**})]
				]
				[(#TYPE|=={password}|oui)
					<input type="[(#GET{type})]" name='[(#ENV{name_#CHAMP,#CHAMP})]' id='input-#ID_FORM-#CHAMP' value=""
						class='[(#GET{type})][ (#GET{class})][ (#ENV{crayon_active,''})][ (#TYPE)]' 
						size='40' />
					[(#EXTRA_INFO|strlen|oui)
					<li>#SET{label,#EXTRA_INFO|typo}[
					(#OBLIGATOIRE|=={oui}|oui)
					#SET{label,#GET{label}|concat{'<span class="label_obligatoire">',#VAL{forms:info_obligatoire_02}|_T,'</span>'}}
					]<li class='saisie_#CHAMP[ (#ENV*{erreurs}|table_valeur{#CHAMP}|oui)erreur][ (#OBLIGATOIRE|=={oui}|?{obligatoire})]'>
					<label for="input-#ID_FORM-#CHAMP-confirm">(#GET{label})</label>
					[<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{#CHAMP})</span>]
					<input type="[(#GET{type})]" name='[(#ENV{name_#CHAMP,#CHAMP})]_confirm' id='input-#ID_FORM-#CHAMP-confirm' value="" 
						class='[(#GET{type})][ (#GET{class})][ (#ENV{crayon_active,''})][ (#TYPE)]' 
						size='40' />
					]
				]
			]
		</li>
	]
]
</BOUCLE_champs>
[(#GET{fieldset}|oui|et{#GET{need_fieldset}|non})</ul></fieldset></li>]
[(#ENV{champ,''}|non|et{#ENV{affiche_sondage}|non})
	[(#REM) Piege a robots spammeurs ]
	<li style='display:none;'><label for="nobotnobot-#ID_FORM"><:antispam_champ_vide:></label>
	<input type="text" name="nobotnobot" id="nobotnobot-#ID_FORM" value="#ENV{nobotnobot}" size="10" /></li>
]
</ul>
[(#ENV{champ,''}|non|et{#ENV{affiche_sondage}|non})
	
	[(#ENV{affiche_bouton,1}|oui)
		<p class="boutons">[<input
		 (#CONFIG{forms_et_tables}|table_valeur{bouton_image}|non) type="submit" class='submit' name='Valider' 
		 value="<:bouton_valider:>" />][<input (#CONFIG{forms_et_tables}|table_valeur{bouton_image}|oui) class='image'
		 type="image" src='[(#CHEMIN{img_pack/bt-forms_bouton_valider.gif}|sinon{#CHEMIN{img_pack/bt-forms_bouton_valider.png}})]' alt="<:bouton_valider:>" />]
		</p>
	]
]
<script src="[(#CHEMIN{javascript/jtip.js}|url_absolue)]" type="text/javascript"></script>
[(#GET{date-picker}|?{' '})
<script src="[(#CHEMIN{javascript/jquery-dom.js}|url_absolue)]" type="text/javascript"></script>
<script src="[(#CHEMIN{javascript/datePicker.js}|url_absolue)]" type="text/javascript"></script>
]
<script type="text/javascript"><!--
jQuery('div.spip_forms input.formo').bind('focus',function(){jQuery(this).addClass('formo-focus');});
jQuery('div.spip_forms input.formo').bind('blur',function(){jQuery(this).removeClass('formo-focus');});
jQuery('div.spip_forms input.forml').bind('focus',function(){jQuery(this).addClass('forml-focus');});
jQuery('div.spip_forms input.forml').bind('blur',function(){jQuery(this).removeClass('forml-focus');});
[(#GET{date-picker}|?{' '})
	$.datePicker.setDateFormat('dmy','/');
	[(#INCLURE{fond=formulaires/date_picker_init}|charset2unicode{html}|unicode2charset)]
	$('input.date-picker').datePicker({startDate:'01/01/1900'});
]
//--></script>
</div>
</BOUCLE_form>
