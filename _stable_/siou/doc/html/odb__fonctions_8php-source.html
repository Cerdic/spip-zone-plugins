<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Siou:  Fichier source de siou_spip/odb_fonctions.php</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
    <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    <li><a href="dirs.html"><span>Répertoires</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;Rechercher&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_29c010956b06ed77ca68e3bf63b90184.html">siou_spip</a></div>
<h1>odb_fonctions.php</h1><a href="odb__fonctions_8php.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00003"></a><a class="code" href="odb__fonctions_8php.html#0fd3051074cae7ad391c8535edd07f39">00003</a> function <a class="code" href="odb__fonctions_8php.html#0fd3051074cae7ad391c8535edd07f39">siou_spip_candidat</a>($id_saisie, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00004"></a>00004    <a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a> = <span class="stringliteral">"SELECT sex.sexe, pre.prefixe, nom,  prenoms"</span>
<a name="l00005"></a>00005           . <span class="stringliteral">" FROM odb_candidats can"</span>
<a name="l00006"></a>00006           . <span class="stringliteral">" LEFT JOIN odb_ref_prefixe pre on pre.id=can.prefixe"</span>
<a name="l00007"></a>00007           . <span class="stringliteral">" LEFT JOIN odb_ref_sexe sex on sex.id=can.sexe"</span>
<a name="l00008"></a>00008           . <span class="stringliteral">" WHERE id_saisie=$id_saisie AND annee=$annee"</span>
<a name="l00009"></a>00009           ;
<a name="l00010"></a>00010    <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = spip_query(<a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a>);
<a name="l00011"></a>00011    <span class="keywordflow">if</span> ($row = spip_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00012"></a>00012       $sexe = $row['sexe'];
<a name="l00013"></a>00013       $sexe=$sexe==<span class="charliteral">'M'</span>?'M.<span class="charliteral">':'</span>Mlle';
<a name="l00014"></a>00014       <a class="code" href="inc-pdf-convocation_8php.html#a1d1a8c13dd23a13326547e2fb40b700">$prefixe</a> = stripslashes($row['prefixe']);
<a name="l00015"></a>00015       <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>=stripslashes($row['nom']);
<a name="l00016"></a>00016       $prenoms=stripslashes($row['prenoms']);
<a name="l00017"></a>00017       <span class="keywordflow">return</span> <span class="stringliteral">"$sexe $prefixe &lt;b&gt;$nom&lt;/b&gt; $prenoms"</span>;
<a name="l00018"></a>00018    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="stringliteral">"Aucun candidat ne correspond"</span>;
<a name="l00019"></a>00019 }
<a name="l00020"></a>00020 
<a name="l00021"></a><a class="code" href="odb__fonctions_8php.html#8a9c49a0943e6204dd89cef1e2295a15">00021</a> function <a class="code" href="odb__fonctions_8php.html#8a9c49a0943e6204dd89cef1e2295a15">balise_CANDIDAT</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00022"></a>00022    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00023"></a>00023    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00024"></a>00024         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_candidat($id_saisie, $annee)"</span>;
<a name="l00025"></a>00025         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00026"></a>00026         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00027"></a>00027 }
<a name="l00028"></a>00028 
<a name="l00030"></a><a class="code" href="odb__fonctions_8php.html#0aa8749d56a8b83444bedb76a430e1c2">00030</a> function <a class="code" href="odb__fonctions_8php.html#0aa8749d56a8b83444bedb76a430e1c2">siou_spip_dldn</a>($id_saisie, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00031"></a>00031    <a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a> = <span class="stringliteral">"SELECT ldn, ne_en, ne_le, ne_vers FROM odb_candidats"</span>
<a name="l00032"></a>00032           . <span class="stringliteral">" WHERE id_saisie=$id_saisie AND annee=$annee"</span>
<a name="l00033"></a>00033           ;
<a name="l00034"></a>00034    <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = spip_query(<a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a>);
<a name="l00035"></a>00035    <span class="keywordflow">if</span> ($row = spip_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00036"></a>00036       $ne_en = $row['ne_en'];
<a name="l00037"></a>00037       $ne_le = $row['ne_le'];
<a name="l00038"></a>00038       $ne_vers = $row['ne_vers'];
<a name="l00039"></a>00039       $ldn = stripslashes($row['ldn']);
<a name="l00040"></a>00040       <span class="keywordflow">if</span>($ne_en&gt;0) $ddn=<span class="stringliteral">"En $ne_en"</span>;
<a name="l00041"></a>00041       elseif($ne_vers&gt;0) $ddn=<span class="stringliteral">"Vers $ne_vers"</span>;
<a name="l00042"></a>00042       <span class="keywordflow">else</span> {
<a name="l00043"></a>00043          <a class="code" href="inc-pdf-convocation_8php.html#6fd2de6056734aba5417b97d6d7a24bc">$tDate</a>=explode(<span class="charliteral">'-'</span>,$ne_le);
<a name="l00044"></a>00044          <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=<a class="code" href="inc-pdf-convocation_8php.html#6fd2de6056734aba5417b97d6d7a24bc">$tDate</a>[0];
<a name="l00045"></a>00045          <a class="code" href="inc-pdf-attestations_8php.html#c3dd350c90be7c45f992a6efde984c66">$mois</a>=<a class="code" href="inc-pdf-convocation_8php.html#6fd2de6056734aba5417b97d6d7a24bc">$tDate</a>[1];
<a name="l00046"></a>00046          <a class="code" href="inc-pdf-attestations_8php.html#477477d68b3781b42c7fb933b20288af">$jour</a>=<a class="code" href="inc-pdf-convocation_8php.html#6fd2de6056734aba5417b97d6d7a24bc">$tDate</a>[2];
<a name="l00047"></a>00047          $ddn=<span class="stringliteral">"$jour/$mois/$annee"</span>;
<a name="l00048"></a>00048       }
<a name="l00049"></a>00049       $ddn=<span class="stringliteral">"&lt;b&gt;$ddn&lt;/b&gt; $ldn"</span>;
<a name="l00050"></a>00050       <span class="keywordflow">return</span> $ddn;
<a name="l00051"></a>00051    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="stringliteral">"DLDN introuvable"</span>;
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="odb__fonctions_8php.html#b0e879a21f4e810b57895d2d96fbfaac">00054</a> function <a class="code" href="odb__fonctions_8php.html#b0e879a21f4e810b57895d2d96fbfaac">balise_DLDN</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00055"></a>00055    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00056"></a>00056    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00057"></a>00057         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_dldn($id_saisie, $annee)"</span>;
<a name="l00058"></a>00058         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00059"></a>00059         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00063"></a><a class="code" href="odb__fonctions_8php.html#def6bf819c254baf42b6127d2af1d8d5">00063</a> function <a class="code" href="odb__fonctions_8php.html#def6bf819c254baf42b6127d2af1d8d5">siou_spip_centre</a>($id_saisie, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00064"></a>00064    <a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a> = <span class="stringliteral">"SELECT cen.etablissement centre"</span>
<a name="l00065"></a>00065           . <span class="stringliteral">" FROM odb_candidats can, odb_repartition rep, odb_ref_etablissement cen"</span>
<a name="l00066"></a>00066           . <span class="stringliteral">" WHERE can.id_saisie=$id_saisie AND can.id_table=rep.id_table AND can.annee=$annee and rep.annee=$annee"</span>
<a name="l00067"></a>00067           . <span class="stringliteral">" AND rep.id_etablissement=cen.id"</span>
<a name="l00068"></a>00068           ;
<a name="l00069"></a>00069    <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = spip_query(<a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a>);
<a name="l00070"></a>00070    <span class="keywordflow">if</span> ($row = spip_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00071"></a>00071       <span class="keywordflow">return</span> stripslashes($row['centre']);
<a name="l00072"></a>00072    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="stringliteral">"Information indisponible"</span>;
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="odb__fonctions_8php.html#4e9c7bff04eaf5173e73c409e8fe3af8">00075</a> function <a class="code" href="odb__fonctions_8php.html#4e9c7bff04eaf5173e73c409e8fe3af8">balise_CENTRE</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00076"></a>00076    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00077"></a>00077    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00078"></a>00078         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_centre($id_saisie, $annee)"</span>;
<a name="l00079"></a>00079         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00080"></a>00080         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00081"></a>00081 }
<a name="l00082"></a>00082 
<a name="l00084"></a><a class="code" href="odb__fonctions_8php.html#4fd6e7502a5d2eb7c560951ae235ef99">00084</a> function <a class="code" href="odb__fonctions_8php.html#4fd6e7502a5d2eb7c560951ae235ef99">siou_spip_ref</a>($champ, $ref, $id_saisie, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00085"></a>00085    <a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a> = <span class="stringliteral">"SELECT $ref.$ref"</span>
<a name="l00086"></a>00086           . <span class="stringliteral">" FROM odb_candidats can, odb_ref_$ref $ref"</span>
<a name="l00087"></a>00087           . <span class="stringliteral">" WHERE id_saisie=$id_saisie AND annee=$annee AND $ref.id=can.$champ"</span>
<a name="l00088"></a>00088           ;
<a name="l00089"></a>00089    <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = spip_query(<a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a>);
<a name="l00090"></a>00090    <span class="keywordflow">while</span> ($row = spip_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00091"></a>00091        $ret = stripslashes($row[$ref]);
<a name="l00092"></a>00092        <span class="keywordflow">return</span> $ret;
<a name="l00093"></a>00093    }
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 
<a name="l00097"></a><a class="code" href="odb__fonctions_8php.html#3b627417dbe10b1cd235039fb4a8f48d">00097</a> function <a class="code" href="odb__fonctions_8php.html#3b627417dbe10b1cd235039fb4a8f48d">balise_EPS</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00098"></a>00098    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00099"></a>00099    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00100"></a>00100         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('eps', 'eps', $id_saisie, $annee)"</span>;
<a name="l00101"></a>00101         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00102"></a>00102         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00106"></a><a class="code" href="odb__fonctions_8php.html#9152ce8a49f2383bd6fdcb7b9159eb42">00106</a> function <a class="code" href="odb__fonctions_8php.html#9152ce8a49f2383bd6fdcb7b9159eb42">balise_LV1</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00107"></a>00107    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00108"></a>00108    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00109"></a>00109         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('lv1','lv', $id_saisie, $annee)"</span>;
<a name="l00110"></a>00110         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00111"></a>00111         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="odb__fonctions_8php.html#af25d3147b1d7616efb5b82341ddb3f6">00115</a> function <a class="code" href="odb__fonctions_8php.html#af25d3147b1d7616efb5b82341ddb3f6">balise_LV2</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00116"></a>00116    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00117"></a>00117    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00118"></a>00118         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('lv2','lv', $id_saisie, $annee)"</span>;
<a name="l00119"></a>00119         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00120"></a>00120         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00124"></a><a class="code" href="odb__fonctions_8php.html#0340ac094a22496e7d167e1d3f3fe94e">00124</a> function <a class="code" href="odb__fonctions_8php.html#0340ac094a22496e7d167e1d3f3fe94e">balise_EPF1</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00125"></a>00125    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00126"></a>00126    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00127"></a>00127         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('ef1','ef', $id_saisie, $annee)"</span>;
<a name="l00128"></a>00128         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00129"></a>00129         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 
<a name="l00133"></a><a class="code" href="odb__fonctions_8php.html#0f11a5e329c9da03160bbb2f19f2ba48">00133</a> function <a class="code" href="odb__fonctions_8php.html#0f11a5e329c9da03160bbb2f19f2ba48">balise_EPF2</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00134"></a>00134    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00135"></a>00135    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00136"></a>00136         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('ef2','ef', $id_saisie, $annee)"</span>;
<a name="l00137"></a>00137         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00138"></a>00138         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00142"></a><a class="code" href="odb__fonctions_8php.html#fafe29fa4d8461eaed1bc8ae7ef5a7d4">00142</a> function <a class="code" href="odb__fonctions_8php.html#fafe29fa4d8461eaed1bc8ae7ef5a7d4">balise_ETABLISSEMENT_ORIGINE</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00143"></a>00143    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00144"></a>00144    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00145"></a>00145         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('etablissement','etablissement', $id_saisie, $annee)"</span>;
<a name="l00146"></a>00146         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00147"></a>00147         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00151"></a><a class="code" href="odb__fonctions_8php.html#bd7ebc1fa2900662978b33ba1e57dc63">00151</a> function <a class="code" href="odb__fonctions_8php.html#bd7ebc1fa2900662978b33ba1e57dc63">balise_SERIE_TXT</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00152"></a>00152    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00153"></a>00153    $id_saisie=champ_sql('id_saisie',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00154"></a>00154         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_ref('serie','serie', $id_saisie, $annee)"</span>;
<a name="l00155"></a>00155         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00156"></a>00156         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00160"></a><a class="code" href="odb__fonctions_8php.html#7bb7fac8c19b8e9ba239c7d3cbe120d8">00160</a> function <a class="code" href="odb__fonctions_8php.html#7bb7fac8c19b8e9ba239c7d3cbe120d8">siou_spip_resultat</a>(<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00161"></a>00161    <a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a> = <span class="stringliteral">"SELECT delib1, delib2, delib3"</span>
<a name="l00162"></a>00162           . <span class="stringliteral">" FROM odb_decisions decis"</span>
<a name="l00163"></a>00163           . <span class="stringliteral">" WHERE id_table='$id_table' AND annee=$annee"</span>
<a name="l00164"></a>00164           ;
<a name="l00165"></a>00165    <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = spip_query(<a class="code" href="inc-ezpdf_8php.html#f59a5f7cd609e592c41dc3643efd3c98">$query</a>);
<a name="l00166"></a>00166    <span class="keywordflow">if</span> ($row = spip_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00167"></a>00167       <span class="keywordflow">foreach</span>(array('delib1<span class="charliteral">','</span>delib2<span class="charliteral">','</span>delib3') as $col) $$col=$row[$col];
<a name="l00168"></a>00168       <span class="keywordflow">if</span>($delib3=='Passable' || $delib3=='Reserve') <a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>=$delib3;
<a name="l00169"></a>00169       elseif(in_array(strtolower($delib2),array('passable<span class="charliteral">','</span>abien<span class="charliteral">','</span>bien<span class="charliteral">','</span>tbien'))) <a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>=$delib2;
<a name="l00170"></a>00170       <span class="keywordflow">else</span> <a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>=$delib1;
<a name="l00171"></a>00171       <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>=='Reserve') <a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>=<span class="stringliteral">"&lt;b&gt;$delib&lt;/b&gt;"</span>;
<a name="l00172"></a>00172       <span class="keywordflow">return</span> <a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>;
<a name="l00173"></a>00173    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="stringliteral">"En cours"</span>;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="odb__fonctions_8php.html#a6aa3244f36479ca3aeb3d40e4cd0f49">00176</a> function <a class="code" href="odb__fonctions_8php.html#a6aa3244f36479ca3aeb3d40e4cd0f49">balise_RESULTAT</a>(<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>) {
<a name="l00177"></a>00177    <a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>=champ_sql('id_table',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00178"></a>00178    <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=champ_sql('annee',<a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>);
<a name="l00179"></a>00179    <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;code = <span class="stringliteral">"siou_spip_resultat($id_table, $annee)"</span>;
<a name="l00180"></a>00180         <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>-&gt;statut = 'html';
<a name="l00181"></a>00181         <span class="keywordflow">return</span> <a class="code" href="inc-odb__import_8php.html#b0ed46ece3f8d301125a0f2728d90d7b" title="Installation du bouton de gestion.">$p</a>;
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 ?&gt;
</pre></div><hr size="1"><address style="text-align: right;"><small>Généré le Mon Mar 17 22:53:01 2008 pour Siou par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
