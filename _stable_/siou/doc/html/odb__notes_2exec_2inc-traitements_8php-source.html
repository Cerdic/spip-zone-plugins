<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Siou:  Fichier source de odb_notes/exec/inc-traitements.php</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
    <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    <li><a href="dirs.html"><span>Répertoires</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;Rechercher&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_8304c97eecfdedd1018accbc24201d58.html">odb_notes</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_944f8b8909d831464407f99f29c5403f.html">exec</a></div>
<h1>inc-traitements.php</h1><a href="odb__notes_2exec_2inc-traitements_8php.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00013"></a><a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#33a267718e90ba67c7a694d64441663b">00013</a> function <a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#33a267718e90ba67c7a694d64441663b" title="Affiche les notes d&amp;#39;un candidat.">afficherNotes</a>(<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>, $id_serie, <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=0, <a class="code" href="inc-pdf-attestations_8php.html#d4a3e16ae571f7498eedad9de246faf7">$where</a>='', <a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>=1, $isVoiler=<span class="keyword">false</span>,$iPrecision=1) {
<a name="l00014"></a>00014         include_once(<a class="code" href="odb__affiche__csv_8php.html#c24ff0f08fb134ed2d43c99826787bc2">DIR_ODB_COMMUN</a>.'inc-html.php');
<a name="l00015"></a>00015         global <a class="code" href="odb__notes_8php.html#08287d6c1cec513971047d1fcf674a86">$PDF_A3_PAYSAGE</a>, <a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00016"></a>00016         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>==0) <a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>=isset($_REQUEST['annee'])?$_REQUEST['annee']:date(<span class="charliteral">'Y'</span>);
<a name="l00017"></a>00017         <span class="keywordflow">if</span>($serie=='') {
<a name="l00018"></a>00018                 $tRefSerie=<a class="code" href="inc-referentiel_8php.html#8da6b5d71b8b85a4443092e825841479">getReferentiel</a>('serie');
<a name="l00019"></a>00019                 $serie=$tRefSerie[$id_serie];
<a name="l00020"></a>00020         }
<a name="l00021"></a>00021         
<a name="l00022"></a>00022         $identifiant='notes.id_table';
<a name="l00023"></a>00023         $nbCanTotal=<a class="code" href="odb__notes_2exec_2inc-bdd_8php.html#000899dd9da7cf04c35abc6e440d6ed3" title="Recupere le nombre de candidats selon divers criteres.">getNbCandidats</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>);
<a name="l00024"></a>00024         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>==2) {
<a name="l00025"></a>00025                 <a class="code" href="inc-pdf-attestations_8php.html#d4a3e16ae571f7498eedad9de246faf7">$where</a>.=<span class="stringliteral">" and rep.id_table in (select id_table from odb_decisions where annee=$annee and delib1='Admissible')"</span>;
<a name="l00026"></a>00026         }
<a name="l00027"></a>00027         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>==3) {
<a name="l00028"></a>00028         <a class="code" href="inc-pdf-attestations_8php.html#d4a3e16ae571f7498eedad9de246faf7">$where</a>.=<span class="stringliteral">" and rep.id_table in (select id_table from odb_decisions where annee=$annee and delib1='Admissible' and (delib2='Oral' or delib2='Reserve'))"</span>;
<a name="l00029"></a>00029         }
<a name="l00030"></a>00030         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a> = <span class="stringliteral">"SELECT dep.departement, eta.etablissement centre, rep.jury, pre.prefixe, can.nom, can.prenoms, can.serie, $identifiant id_candidat, id_matiere, matiere, note, coeff, type"</span>
<a name="l00031"></a>00031         . <span class="stringliteral">" FROM $from odb_notes notes, odb_ref_matiere mat, odb_ref_serie ser, odb_repartition rep, odb_ref_departement dep, odb_ref_etablissement eta, odb_candidats can"</span>
<a name="l00032"></a>00032         . ' LEFT JOIN odb_ref_prefixe pre on can.prefixe=pre.id'
<a name="l00033"></a>00033         . <span class="stringliteral">" where mat.id=notes.id_matiere and notes.annee=$annee and can.annee=$annee and rep.annee=$annee and notes.id_table=can.id_table and notes.id_table=rep.id_table and ser.id=can.serie "</span>
<a name="l00034"></a>00034         . <span class="stringliteral">" $where and can.serie=$id_serie and eta.id=rep.id_etablissement and dep.id=eta.id_departement "</span>
<a name="l00035"></a>00035         . ' ORDER BY id_candidat';
<a name="l00036"></a>00036         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>==1)
<a name="l00037"></a>00037                 <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT id_anonyme id_candidat, id_matiere, matiere, note, coeff, type\n FROM odb_notes notes, odb_ref_matiere mat\n"</span>
<a name="l00038"></a>00038                    . <span class="stringliteral">" WHERE annee=$annee and jury=$jury and id_serie=$id_serie and mat.id=notes.id_matiere and note is not null\n ORDER BY id_candidat"</span>
<a name="l00039"></a>00039                    ;
<a name="l00040"></a>00040         <span class="keywordflow">else</span> {
<a name="l00041"></a>00041                 $sql2=<span class="stringliteral">"SELECT count(*) FROM odb_notes where annee=$annee and jury=$jury and id_anonyme=id_table"</span>;
<a name="l00042"></a>00042                 <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>($sql2,__FILE__,__LINE__);
<a name="l00043"></a>00043                 $nb=mysql_result(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>,0,0);
<a name="l00044"></a>00044                 <span class="keywordflow">if</span>($nb&gt;0) {
<a name="l00045"></a>00045                         $sql2=<span class="stringliteral">"UPDATE odb_notes notes,odb_repartition rep SET notes.id_table=rep.id_table\n"</span>
<a name="l00046"></a>00046                                 .<span class="stringliteral">" WHERE notes.annee=$annee and rep.annee=$annee and rep.jury=$jury"</span>
<a name="l00047"></a>00047                                 .<span class="stringliteral">" AND notes.id_anonyme=DECODE(rep.id_anonyme,'"</span>.<a class="code" href="inc-odb_8php.html#43f6ce2d81c74dfbf4c8ea6c54cf321b" title="Recupere les parametres ODB.">getParametresODB</a>('code').<span class="stringliteral">"')"</span>;
<a name="l00048"></a>00048                         <a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>($sql2,__FILE__,__LINE__);
<a name="l00049"></a>00049                         echo <a class="code" href="odb__ref_8php.html#509f04652b5e1b2d2b9e6bc121a87e50">OK</a>.<span class="stringliteral">" - Anonymat lev&amp;eacute; pour le jury $jury"</span>;
<a name="l00050"></a>00050                         <a class="code" href="inc-referentiel_8php.html#38c3065b99469bad788c627a7b70360b" title="Met les decisions a jour.">odb_maj_decisions</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>);<span class="comment">//maj des decisions pour deliberation 1</span>
<a name="l00051"></a>00051                 }
<a name="l00052"></a>00052         }
<a name="l00053"></a>00053         echo <span class="stringliteral">"deliberation $deliberation : $sql"</span>;
<a name="l00054"></a>00054         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00055"></a>00055         <span class="keywordflow">while</span>($row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00056"></a>00056                 <span class="keywordflow">foreach</span>(array('id_candidat<span class="charliteral">','</span>id_matiere<span class="charliteral">','</span>matiere<span class="charliteral">','</span>note<span class="charliteral">','</span>coeff<span class="charliteral">','</span>type<span class="charliteral">','</span>prefixe<span class="charliteral">','</span>nom<span class="charliteral">','</span>prenoms') as $col) $$col=$row[$col];
<a name="l00057"></a>00057                 <span class="keywordflow">while</span>(substr_count($matiere,'  ')&gt;0) $matiere=str_replace('  <span class="charliteral">','</span> ',$matiere);
<a name="l00058"></a>00058                 <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>!=1) {
<a name="l00059"></a>00059                         $id_candidat=<a class="code" href="inc-odb_8php.html#50e3b190a166aaf85cb237405cf56be2" title="affiche un numero de table de facon lisible pour un humain">getIdTableHumain</a>($id_candidat);
<a name="l00060"></a>00060                         $tNom[$id_candidat]=stripslashes(<span class="stringliteral">"$prefixe &lt;b&gt;"</span>.strtoupper(<a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>).<span class="stringliteral">"&lt;/b&gt; "</span>.ucwords(strtolower($prenoms)));
<a name="l00061"></a>00061                 }
<a name="l00062"></a>00062                 $matiere=ucwords(strtolower($matiere));
<a name="l00063"></a>00063                 <a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a>[$id_candidat][$type][$matiere]=$note;
<a name="l00064"></a>00064                 $tMatieres[$type][$matiere]['coeff']=$coeff;
<a name="l00065"></a>00065                 $tMatieres[$type][$matiere]['id_matiere']=$id_matiere;
<a name="l00066"></a>00066                 <span class="keywordflow">if</span>($note&lt;0) $note='&lt;b&gt;N/C&lt;/b&gt;';
<a name="l00067"></a>00067                 <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id_candidat][<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"$type $id_matiere"</span>)]=$note;
<a name="l00068"></a>00068         }
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         $lignes[0]=<span class="stringliteral">"\n\t&lt;th&gt;R&amp;eacute;sultats&lt;/th&gt;\n"</span>;
<a name="l00071"></a>00071         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>!=1) $lignes[0].=<span class="stringliteral">"\n\t&lt;th&gt;Candidat&lt;/th&gt;\n"</span>;
<a name="l00072"></a>00072         $lignes[1]=<span class="stringliteral">"&lt;td "</span>.($deliberation==1?'<span class="charliteral">':'</span>colspan=2').<span class="stringliteral">"&gt;Jury $jury s&amp;eacute;rie $serie&lt;/td&gt;\n"</span>;
<a name="l00073"></a>00073         $cptCol=(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>==1?2:3);
<a name="l00074"></a>00074         <span class="keywordflow">if</span>(!is_array($tMatieres))
<a name="l00075"></a>00075         <span class="keywordflow">return</span> <span class="stringliteral">"Aucune note n'a encore &amp;eacute;t&amp;eacute; saisie dans le jury $jury s&amp;eacute;rie $serie (qui contient $nbCanTotal candidats)&lt;br/&gt;\n"</span>;
<a name="l00076"></a>00076         $diviseurSerie=0;
<a name="l00077"></a>00077         $pdf_cols['<span class="keywordtype">id</span>']=html_entity_decode('Num&amp;<a class="code" href="inc-pdf-table_8php.html#1c3d7fb9d2f4e0216017175154061426">eacute</a>;ro');
<a name="l00078"></a>00078         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>!=1) $pdf_cols['candidat']='Candidat(e)';
<a name="l00079"></a>00079         <span class="keywordflow">foreach</span>(array('Pratique<span class="charliteral">','</span>Ecrit<span class="charliteral">','</span>Divers<span class="charliteral">','</span>Oral') as $type) {
<a name="l00080"></a>00080                 $t1=$tMatieres[$type];
<a name="l00081"></a>00081                 <span class="keywordflow">if</span>(count($t1)&gt;0) {
<a name="l00082"></a>00082                         ksort($t1);
<a name="l00083"></a>00083                         $lignes[0].=<span class="stringliteral">"\t&lt;th colspan='"</span>.count($t1).<span class="stringliteral">"'&gt;$type&lt;/th&gt;\n"</span>;
<a name="l00084"></a>00084                         $cptCol+=count($t1);
<a name="l00085"></a>00085                         $isTypeDejaEcrit=<span class="keyword">false</span>;
<a name="l00086"></a>00086                         <span class="comment">//echo "$type&lt;pre&gt;";print_r($t1);echo "&lt;/pre&gt;\n";</span>
<a name="l00087"></a>00087                         <span class="keywordflow">foreach</span>($t1 as $matiere=&gt;$t2) {
<a name="l00088"></a>00088                                 $coeff=$t2['coeff'];
<a name="l00089"></a>00089                                 $diviseurSerie+=$coeff;
<a name="l00090"></a>00090                                 $id_matiere=$t2['id_matiere'];
<a name="l00091"></a>00091                                 $style='';
<a name="l00092"></a>00092                                 <span class="keywordflow">if</span>(strlen($matiere)&gt;10) {
<a name="l00093"></a>00093                                         $matiere2='';
<a name="l00094"></a>00094                                         $style=<span class="stringliteral">" style='cursor:help;'"</span>;
<a name="l00095"></a>00095                                         <a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>=explode(<span class="charliteral">' '</span>,$matiere);
<a name="l00096"></a>00096                                         <span class="keywordflow">foreach</span>(<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a> as $mot) {
<a name="l00097"></a>00097                                                 <span class="keywordflow">if</span>(strlen($mot)&gt;6) {
<a name="l00098"></a>00098                                                         $mot=substr($mot,0,6).<span class="charliteral">'.'</span>;
<a name="l00099"></a>00099                                                 }
<a name="l00100"></a>00100                                                 $mot.=<span class="charliteral">' '</span>;
<a name="l00101"></a>00101                                                 $matiere2.=$mot;
<a name="l00102"></a>00102                                         }
<a name="l00103"></a>00103                                         $matiere_aff=<span class="stringliteral">"&lt;span title=\"header=[Mati&amp;egrave;re] body=[$matiere]\"&gt;$matiere2&lt;/span&gt;"</span>;
<a name="l00104"></a>00104                                         $pdf_cols[<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"$type $id_matiere"</span>)]=html_entity_decode(<span class="stringliteral">"\n$matiere2"</span>).<span class="stringliteral">" ($coeff)"</span>;
<a name="l00105"></a>00105                                 } <span class="keywordflow">else</span> {
<a name="l00106"></a>00106                                         $pdf_cols[<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"$type $id_matiere"</span>)]=html_entity_decode(<span class="stringliteral">"\n$matiere"</span>).<span class="stringliteral">" ($coeff)"</span>;
<a name="l00107"></a>00107                                         $matiere_aff=$matiere;
<a name="l00108"></a>00108                                 }
<a name="l00109"></a>00109                                 <span class="keywordflow">if</span>(!$isTypeDejaEcrit) {
<a name="l00110"></a>00110                                         $isTypeDejaEcrit=<span class="keyword">true</span>;
<a name="l00111"></a>00111                                         $pdf_cols[<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"$type $id_matiere"</span>)]=<span class="stringliteral">"&lt;b&gt;$type&lt;/b&gt;"</span>.$pdf_cols[<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"$type $id_matiere"</span>)];
<a name="l00112"></a>00112                                 }
<a name="l00113"></a>00113                                 $lignes[1].=<span class="stringliteral">"\t&lt;td $style&gt;$matiere_aff ($coeff)&lt;/td&gt;\n"</span>;
<a name="l00114"></a>00114                                 <span class="comment">// on mets N/S aux candidats sans note</span>
<a name="l00115"></a>00115                                 <span class="keywordflow">foreach</span>(<a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a> as $id=&gt;$tN1) {
<a name="l00116"></a>00116                                         <span class="keywordflow">if</span>($tN1[$type][$matiere]=='') {
<a name="l00117"></a>00117                                                 <span class="keywordflow">if</span>($type!='Divers') {
<a name="l00118"></a>00118                                                         <a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a>[$id][$type][$matiere]='N/S';
<a name="l00119"></a>00119                                                         $tNS[$type][$matiere][$id]=$id_matiere;
<a name="l00120"></a>00120                                                 } <span class="keywordflow">else</span> <a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a>[$id][$type][$matiere]='';
<a name="l00121"></a>00121                                         }
<a name="l00122"></a>00122                                 }
<a name="l00123"></a>00123                         }
<a name="l00124"></a>00124                 }
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126         $lignes[0].=<span class="stringliteral">"\t&lt;th rowspan=2&gt;Moyenne&lt;/th&gt;\n\n"</span>;
<a name="l00127"></a>00127         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>=1;
<a name="l00128"></a>00128         <span class="keywordflow">foreach</span>(<a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a> as $id=&gt;$t1) {
<a name="l00129"></a>00129                 $isDispense[$id]=<span class="keyword">false</span>;
<a name="l00130"></a>00130                 <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id]['<span class="keywordtype">id</span>']=$id;
<a name="l00131"></a>00131                 <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>!=1) <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id]['candidat']=utf8_decode($tNom[$id]);
<a name="l00132"></a>00132                 $total[$id]=0;
<a name="l00133"></a>00133                 $diviseur[$id]=$diviseurSerie;
<a name="l00134"></a>00134                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00135"></a>00135                 <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT 0 from odb_histo_notes notes where $identifiant='$id' and annee=$annee"</span>;
<a name="l00136"></a>00136                 <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00137"></a>00137                 $nbHisto=mysql_num_rows(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00138"></a>00138                 <span class="keywordflow">if</span>($nbHisto&gt;0) {
<a name="l00139"></a>00139                         <span class="keywordflow">if</span>($nbHisto&gt;1) <a class="code" href="inc-pdf-convocation_8php.html#96f46783d0d9ef01d8a88b9ee6387696">$s</a>=<span class="charliteral">'s'</span>; <span class="keywordflow">else</span> <a class="code" href="inc-pdf-convocation_8php.html#96f46783d0d9ef01d8a88b9ee6387696">$s</a>='';
<a name="l00140"></a>00140                         $urlRetour=urlencode(generer_url_ecrire('odb_notes').<span class="stringliteral">"&amp;jury=$jury&amp;id_serie=$id_serie&amp;resultats"</span>);
<a name="l00141"></a>00141                         $msgRetour=urlencode(<span class="stringliteral">"Retour aux r&amp;eacute;sultats des candidats du jury $jury s&amp;eacute;rie $serie"</span>);
<a name="l00142"></a>00142                         $id_aff=<span class="stringliteral">"&lt;A HREF='"</span>.generer_url_ecrire('odb_notes').<span class="stringliteral">"&amp;historique&amp;id=$id&amp;annee=$annee&amp;msgRetour=$msgRetour&amp;urlRetour=$urlRetour'"</span>.
<a name="l00143"></a>00143                         <span class="stringliteral">" title=\"header=[$id : $nbHisto modif$s] body=[Cliquez pour visualiser l'historique de ce candidat]\"&gt;$id&lt;/A&gt;"</span>;
<a name="l00144"></a>00144                 } <span class="keywordflow">else</span> $id_aff=$id;
<a name="l00145"></a>00145                 $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]=<span class="stringliteral">"\t&lt;th&gt;$id_aff&lt;/th&gt;\n"</span>;
<a name="l00146"></a>00146                 <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>!=1) $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>].=<span class="stringliteral">"\t&lt;th&gt;$tNom[$id]&lt;/th&gt;\n"</span>;
<a name="l00147"></a>00147                 <span class="keywordflow">foreach</span>(array('Pratique<span class="charliteral">','</span>Ecrit<span class="charliteral">','</span>Divers<span class="charliteral">','</span>Oral') as $type) {
<a name="l00148"></a>00148                         $t2=$t1[$type];
<a name="l00149"></a>00149                         <span class="keywordflow">if</span>(count($t2)&gt;0) {
<a name="l00150"></a>00150                                 ksort($t2);
<a name="l00151"></a>00151                                 $isCasReserve=<span class="keyword">false</span>;
<a name="l00152"></a>00152                                 <span class="keywordflow">foreach</span>($t2 as $matiere=&gt;$note) {
<a name="l00153"></a>00153                                         $id_matiere=$tMatieres[$type][$matiere]['id_matiere'];
<a name="l00154"></a>00154                                         $coeff=$tMatieres[$type][$matiere]['coeff'];
<a name="l00155"></a>00155                                         <span class="keywordflow">if</span>($note&lt;0) {
<a name="l00156"></a>00156                                                 $note_aff='&lt;span style=<span class="stringliteral">"color:#f00;font-weight:bold;"</span>&gt;N/C&lt;/span&gt;';
<a name="l00157"></a>00157                                                 $suite='&lt;br/&gt;N\'a pas compos&amp;<a class="code" href="inc-pdf-table_8php.html#1c3d7fb9d2f4e0216017175154061426">eacute</a>;';
<a name="l00158"></a>00158                                                 $diviseur[$id]-=$coeff;
<a name="l00159"></a>00159                                                 $tNbNC[$matiere][]=$id;
<a name="l00160"></a>00160                                         } elseif($note=='N/S') {
<a name="l00161"></a>00161                                                 $note_aff='&lt;span style=<span class="stringliteral">"color:#00f;font-weight:bold;"</span>&gt;N/S&lt;/span&gt;';
<a name="l00162"></a>00162                                                 $suite='&lt;br/&gt;Non saisi';
<a name="l00163"></a>00163                                                 $diviseur[$id]-=$coeff;
<a name="l00164"></a>00164                                                 $tNbNS[$matiere][]=$id;
<a name="l00165"></a>00165                                         } elseif($note=='') {
<a name="l00166"></a>00166                                                 $note_aff='&amp;nbsp;';
<a name="l00167"></a>00167                                                 <span class="keywordflow">if</span>($id_matiere==<a class="code" href="odb__notes_8php.html#f29ef43f72bda613ccc526c3881f2434">ID_MATIERE_EPS</a>) $isDispense[$id]=<span class="keyword">true</span>;
<a name="l00168"></a>00168                                                 $diviseur[$id]-=$coeff;
<a name="l00169"></a>00169                                         } elseif($note==0 &amp;&amp; $type!='Divers') {
<a name="l00170"></a>00170                                                 $note_aff='&lt;span style=<span class="stringliteral">"color:#f00;font-weight:bold;"</span>&gt;0&lt;/span&gt;';
<a name="l00171"></a>00171                                                 $suite=<span class="stringliteral">"&lt;br/&gt;&lt;b&gt;$note&lt;/b&gt;/20 &lt;small&gt;soit "</span>.($note*$coeff).<span class="stringliteral">"/"</span>.(20*$coeff).<span class="stringliteral">"&lt;/small&gt;"</span>;
<a name="l00172"></a>00172                                                 $tNb0[$id][]=$matiere;
<a name="l00173"></a>00173                                                 $isCasReserve=<span class="keyword">true</span>;
<a name="l00174"></a>00174                                         } <span class="keywordflow">else</span> {
<a name="l00175"></a>00175                                                 <span class="keywordflow">if</span>($note==0 &amp;&amp; $id_matiere==<a class="code" href="odb__notes_8php.html#f29ef43f72bda613ccc526c3881f2434">ID_MATIERE_EPS</a>) {
<a name="l00176"></a>00176                                                         $isCasReserve=<span class="keyword">true</span>;
<a name="l00177"></a>00177                                                         $isAbsEps=<span class="keyword">true</span>;
<a name="l00178"></a>00178                                                         $diviseur[$id]-=$coeff;
<a name="l00179"></a>00179                                                 }
<a name="l00180"></a>00180                                                 $note_aff=$note;
<a name="l00181"></a>00181                                                 $total[$id]+=(int)$coeff*(<span class="keywordtype">int</span>)$note;
<a name="l00182"></a>00182                                                 <span class="keywordflow">if</span>($coeff==0) $total[$id]+=(int)$note; <span class="comment">// bonus EF</span>
<a name="l00183"></a>00183                                                 $suite=<span class="stringliteral">"&lt;br/&gt;&lt;b&gt;$note&lt;/b&gt;/20 &lt;small&gt;soit "</span>.($note*$coeff).<span class="stringliteral">"/"</span>.(20*$coeff).<span class="stringliteral">"&lt;/small&gt;"</span>;
<a name="l00184"></a>00184                                         }
<a name="l00185"></a>00185                                         $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>].=<span class="stringliteral">"\t&lt;td style='cursor:help;' title=\"header=[Candidat $id] body=[&lt;b&gt;$matiere&lt;/b&gt; ($type)$suite]\"&gt;$note_aff&lt;/td&gt;\n"</span>;
<a name="l00186"></a>00186                                 }
<a name="l00187"></a>00187                         }
<a name="l00188"></a>00188                 }
<a name="l00189"></a>00189                 <span class="keywordflow">if</span>($diviseur[$id]==0) {
<a name="l00190"></a>00190                         $moy=-1;
<a name="l00191"></a>00191                         $moy_aff='Absent';
<a name="l00192"></a>00192                         $style=<span class="stringliteral">"color:#f00;"</span>;
<a name="l00193"></a>00193                         $isAbsent=<span class="keyword">true</span>;
<a name="l00194"></a>00194                 } <span class="keywordflow">else</span> {
<a name="l00195"></a>00195                         $moy=round($total[$id]/($diviseur[$id]),$iPrecision);
<a name="l00196"></a>00196                         <span class="keywordflow">if</span>($diviseur[$id]!=$diviseurSerie) {
<a name="l00197"></a>00197                                 <span class="keywordflow">if</span>($diviseur[$id]==($diviseurSerie-1) &amp;&amp; ($isDispense[$id] || $isAbsEps))
<a name="l00198"></a>00198                                         $isAbsent=<span class="keyword">false</span>;
<a name="l00199"></a>00199                                 <span class="keywordflow">else</span> $isAbsent=<span class="keyword">true</span>;
<a name="l00200"></a>00200                         } <span class="keywordflow">else</span> $isAbsent=<span class="keyword">false</span>;
<a name="l00201"></a>00201                         <span class="keywordflow">if</span>($moy&lt;5) {
<a name="l00202"></a>00202                                 $style=<span class="stringliteral">"color:#f00;font-weight:bold;"</span>;
<a name="l00203"></a>00203                                 $moy_aff=<span class="stringliteral">"Ajourn&amp;eacute; ($moy)"</span>;
<a name="l00204"></a>00204                         } elseif($moy&lt;9) {
<a name="l00205"></a>00205                                 $style=<span class="stringliteral">"color:#f00;"</span>;
<a name="l00206"></a>00206                                 $moy_aff=<span class="stringliteral">"Refus&amp;eacute; ($moy)"</span>;
<a name="l00207"></a>00207                         } <span class="keywordflow">else</span> {
<a name="l00208"></a>00208                                 $moy_aff=<span class="stringliteral">"$moy"</span>;
<a name="l00209"></a>00209                                 <span class="keywordflow">if</span>($isAbsent) $style='color:#c80;';
<a name="l00210"></a>00210                                 elseif($isCasReserve &amp;&amp; ($moy&lt;10 || $isAbsEps)) {
<a name="l00211"></a>00211                                         $style='color:#369;';
<a name="l00212"></a>00212                                         $moy_aff=<span class="stringliteral">"&lt;b&gt;Cas r&amp;eacute;serv&amp;eacute;&lt;/b&gt; ($moy)"</span>;
<a name="l00213"></a>00213                                 }
<a name="l00214"></a>00214                                 <span class="keywordflow">else</span> $style='';
<a name="l00215"></a>00215                         }
<a name="l00216"></a>00216                         <span class="keywordflow">if</span>($isAbsent) {
<a name="l00217"></a>00217                                 $moy_aff=<span class="stringliteral">"Absent ($moy)"</span>;
<a name="l00218"></a>00218                                 $style.='font-weight:bold;';
<a name="l00219"></a>00219                         }
<a name="l00220"></a>00220                 }
<a name="l00221"></a>00221                 $total_aff=<span class="stringliteral">"&lt;b&gt;$total[$id]&lt;/b&gt;/"</span>.(20*(int)$diviseur[$id]);
<a name="l00222"></a>00222                 <span class="keywordflow">if</span>($isVoiler) $moy_aff=$total_aff;
<a name="l00223"></a>00223                 <span class="keywordflow">else</span> <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id]['moy']=html_entity_decode($moy_aff);
<a name="l00224"></a>00224                 $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>].=<span class="stringliteral">"\t&lt;td style='$style' title=\"header=[Candidat $id] body=[Total : $total_aff]\"&gt;$moy_aff&lt;/td&gt;\n"</span>;
<a name="l00225"></a>00225                 <span class="keywordflow">if</span>($diviseur[$id]==0) <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id]['total']='';
<a name="l00226"></a>00226                 <span class="keywordflow">else</span> <a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>[$id]['total']=html_entity_decode($total_aff);
<a name="l00227"></a>00227                 
<a name="l00228"></a>00228                 <span class="comment">/*if(substr($moy_aff,0,4)!='Adm.') {</span>
<a name="l00229"></a>00229 <span class="comment">                        unset($lignes[$cpt]);</span>
<a name="l00230"></a>00230 <span class="comment">                        unset($pdf[$id]);</span>
<a name="l00231"></a>00231 <span class="comment">                }*/</span>
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         $nbCan=count(<a class="code" href="inc-pdf-resultats_8php.html#99b1243920c328c2e61380238734b712">$tNotes</a>);
<a name="l00234"></a>00234         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00235"></a>00235         $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++]=<span class="stringliteral">"&lt;th colspan='$cptCol'&gt;$nbCan candidats sur $nbCanTotal (encore "</span>.($nbCanTotal-$nbCan).<span class="stringliteral">")&lt;/th&gt;\n"</span>;
<a name="l00236"></a>00236         $str=<a class="code" href="inc-html_8php.html#5f91efa37c4c6e04e1e2792cc0c37600" title="Affiche une table html.">odb_html_table</a>(<span class="stringliteral">"R&amp;eacute;sultats des candidats du jury $jury dans la s&amp;eacute;rie $serie"</span>,$lignes,'<span class="charliteral">','</span>petition-24.gif');
<a name="l00237"></a>00237         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Resultats Jury $jury-Serie $serie"</span>);
<a name="l00238"></a>00238         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="inc-ezpdf_8php.html#964ee5ee597c515cbb4dad2f14054cb4">$pdf</a>;
<a name="l00239"></a>00239         <span class="keywordflow">if</span>(<a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>==1) <a class="code" href="inc-pdf-resultats_8php.html#cc319a0dd799343c5fd123b3417f8feb">$sTmp</a>='Brouillard'; <span class="keywordflow">else</span> <a class="code" href="inc-pdf-resultats_8php.html#cc319a0dd799343c5fd123b3417f8feb">$sTmp</a>=<span class="stringliteral">"Relev&amp;eacute; de notes - $deliberation&amp;deg; d&amp;eacute;lib&amp;eacute;ration"</span>;
<a name="l00240"></a>00240         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"$sTmp jury $jury - s&amp;eacute;rie $serie"</span>);
<a name="l00241"></a>00241         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"$sTmp - Jury $jury, s&amp;eacute;rie $serie"</span>);
<a name="l00242"></a>00242         $pdf_cols['total']='&lt;b&gt;Total&lt;/b&gt;';
<a name="l00243"></a>00243         $pdf_cols['moy']='&lt;b&gt;Moyenne&lt;/b&gt;';
<a name="l00244"></a>00244         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$pdf_cols;
<a name="l00245"></a>00245         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$PDF_A3_PAYSAGE;
<a name="l00246"></a>00246         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00247"></a>00247         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" G&amp;eacute;n&amp;eacute;rer le $sTmp du jury &lt;b&gt;$jury&lt;/b&gt; s&amp;eacute;rie &lt;b&gt;$serie&lt;/b&gt; en PDF&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00248"></a>00248         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.vignette('pdf',<span class="stringliteral">"G&amp;eacute;n&amp;eacute;rer le $sTmp du jury $jury s&amp;eacute;rie $serie"</span>).$tmp2;
<a name="l00249"></a>00249         <span class="keywordflow">if</span>(is_array($tNb0)) {
<a name="l00250"></a>00250                 $nbTmp=count($tNb0);
<a name="l00251"></a>00251                 <span class="keywordflow">if</span>($nbTmp&gt;1) $msgTmp=<span class="stringliteral">"candidats ont"</span>;
<a name="l00252"></a>00252                 <span class="keywordflow">else</span> $msgTmp=<span class="stringliteral">"candidat a"</span>;
<a name="l00253"></a>00253                 $msg0=<span class="stringliteral">"&lt;b&gt;$nbTmp&lt;/b&gt; $msgTmp eu au moins un 0 :&lt;br/&gt;\n"</span>.
<a name="l00254"></a>00254                 <span class="stringliteral">"&lt;table class='spip'&gt;\n&lt;tr&gt;&lt;th&gt;Candidat&lt;/th&gt;&lt;th&gt;Mati&amp;egrave;res&lt;/th&gt;&lt;/tr&gt;\n"</span>;
<a name="l00255"></a>00255                 <span class="keywordflow">foreach</span>($tNb0 as $id=&gt;<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>)
<a name="l00256"></a>00256                 $msg0.=<span class="stringliteral">"&lt;tr&gt;\n\t&lt;td&gt;$id&lt;/td&gt;\n\t&lt;td&gt;"</span>.implode(', ',<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>).<span class="stringliteral">"&lt;/td&gt;\n&lt;/tr&gt;\n"</span>;
<a name="l00257"></a>00257                 $msg0.=<span class="stringliteral">"&lt;/table&gt;\n"</span>;
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259         <span class="keywordflow">if</span>(is_array($tNbNS)) {
<a name="l00260"></a>00260                 $nbMat=count($tNbNS);
<a name="l00261"></a>00261                 <span class="keywordflow">if</span>($nbMat&gt;1) $msgTmp=<span class="stringliteral">"des &lt;b&gt;$nbMat&lt;/b&gt;  mati&amp;egrave;res suivantes :"</span>;
<a name="l00262"></a>00262                 <span class="keywordflow">else</span> $msgTmp=<span class="stringliteral">"de la mati&amp;egrave;re suivante :"</span>;
<a name="l00263"></a>00263                 $msgNS=<span class="stringliteral">"Les notes doivent &amp;ecirc;tre saisies pour le(s) candidat(s) $msgTmp&lt;br/&gt;\n"</span>.
<a name="l00264"></a>00264                 <span class="stringliteral">"&lt;table class='spip'&gt;\n&lt;tr&gt;&lt;th&gt;Mati&amp;egrave;re&lt;/th&gt;&lt;th&gt;Candidats&lt;/th&gt;&lt;/tr&gt;\n"</span>;
<a name="l00265"></a>00265                 <span class="keywordflow">foreach</span>($tNbNS as $matiere=&gt;<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>) {
<a name="l00266"></a>00266                         $id_matiere=$tMatieres['Ecrit'][$matiere]['id_matiere'];
<a name="l00267"></a>00267                         $nbTmp=count(<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00268"></a>00268                         $msgTmp=<span class="stringliteral">"&lt;b&gt;$nbTmp&lt;/b&gt; candidats"</span>;
<a name="l00269"></a>00269                         <span class="keywordflow">if</span>($nbTmp&lt;=10) $msgTmp.=<span class="stringliteral">" :&lt;br/&gt;"</span>.implode(', ',<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00270"></a>00270                         $msgNS.=<span class="stringliteral">"&lt;tr&gt;\n\t&lt;td&gt;"</span>.
<a name="l00271"></a>00271                         <span class="stringliteral">"&lt;b&gt;&lt;A HREF='"</span>.generer_url_ecrire('odb_notes').<span class="stringliteral">"&amp;jury=$jury&amp;serie=$serie&amp;matiere=$matiere&amp;id_matiere=$id_matiere&amp;id_serie=$id_serie&amp;step3=manuel'&gt;$matiere&lt;/A&gt;&lt;/b&gt;\n"</span>.
<a name="l00272"></a>00272                         <span class="stringliteral">"&lt;/td&gt;\n\t&lt;td&gt;$msgTmp&lt;/td&gt;\n&lt;/tr&gt;\n"</span>;
<a name="l00273"></a>00273                 }
<a name="l00274"></a>00274                 $msgNS.=<span class="stringliteral">"&lt;/table&gt;\n"</span>;
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276         <span class="keywordflow">if</span>(is_array($tNbNC)) {
<a name="l00277"></a>00277                 $nbMat=count($tNbNC);
<a name="l00278"></a>00278                 <span class="keywordflow">if</span>($nbMat&gt;1) $msgTmp=<span class="stringliteral">"les &lt;b&gt;$nbMat&lt;/b&gt;  mati&amp;egrave;res suivantes :"</span>;
<a name="l00279"></a>00279                 <span class="keywordflow">else</span> $msgTmp=<span class="stringliteral">"la mati&amp;egrave;re suivante :"</span>;
<a name="l00280"></a>00280                 $msgNC=<span class="stringliteral">"Un ou plusieurs candidat(s) n'ont pas compos&amp;eacute; dans $msgTmp&lt;br/&gt;\n"</span>.
<a name="l00281"></a>00281                 <span class="stringliteral">"&lt;table class='spip'&gt;\n&lt;tr&gt;&lt;th&gt;Mati&amp;egrave;re&lt;/th&gt;&lt;th&gt;Candidats&lt;/th&gt;&lt;/tr&gt;\n"</span>;
<a name="l00282"></a>00282                 <span class="keywordflow">foreach</span>($tNbNC as $matiere=&gt;<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>) {
<a name="l00283"></a>00283                         $nbTmp=count(<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00284"></a>00284                         $msgTmp=<span class="stringliteral">"&lt;b&gt;$nbTmp&lt;/b&gt; candidats"</span>;
<a name="l00285"></a>00285                         <span class="keywordflow">if</span>($nbTmp&lt;=10) $msgTmp.=<span class="stringliteral">" :&lt;br/&gt;"</span>.implode(', ',<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00286"></a>00286                         $msgNC.=<span class="stringliteral">"&lt;tr&gt;\n\t&lt;td&gt;$matiere&lt;/td&gt;\n\t&lt;td&gt;$msgTmp&lt;/td&gt;\n&lt;/tr&gt;\n"</span>;
<a name="l00287"></a>00287                 }
<a name="l00288"></a>00288                 $msgNC.=<span class="stringliteral">"&lt;/table&gt;\n"</span>;
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290         $msgInfo='';
<a name="l00291"></a>00291         <span class="keywordflow">if</span>(trim($msgNS)!='') $msgInfo=<a class="code" href="inc-html_8php.html#af111db152a79e88015b3a80345d0cdd" title="affiche une boite de message">boite_important</a>($msgNS);
<a name="l00292"></a>00292         $msgInfo.=$msg0.$msgNC;
<a name="l00293"></a>00293         <span class="keywordflow">return</span> $msgInfo.$lien.$str.$lien;
<a name="l00294"></a>00294 }
<a name="l00295"></a>00295 
<a name="l00307"></a><a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#99a781952cafb10b8cb8a0adda4baa6d">00307</a> function <a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#99a781952cafb10b8cb8a0adda4baa6d" title="Permet aux operateurs de saisie d&amp;#39;acceder aux listes de resultat en fonction...">afficherImpressions</a>(<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>,$serie,<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,$tSeries,$iPrecision=3) {
<a name="l00308"></a>00308         <a class="code" href="inc-referentiel_8php.html#38c3065b99469bad788c627a7b70360b" title="Met les decisions a jour.">odb_maj_decisions</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>,$iPrecision,1);
<a name="l00309"></a>00309         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>=<span class="stringliteral">"&lt;TABLE class='spip'/&gt;"</span>;
<a name="l00310"></a>00310         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td colspan=3&gt;&lt;hr size=1/&gt;&lt;b&gt;1&lt;sup&gt;&amp;egrave;re&lt;/sup&gt;&lt;/b&gt; d&amp;eacute;lib&amp;eacute;ration&lt;hr size=1/&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00311"></a>00311         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT decis.id_table, sex.sexe, pre.prefixe, nom, prenoms, eta.etablissement, can.serie idSerie, eps.eps, ef1.ef ef1, ef2.ef ef2\n"</span>.
<a name="l00312"></a>00312         <span class="stringliteral">"FROM odb_ref_eps eps, odb_ref_sexe sex, odb_ref_etablissement eta, odb_decisions decis, odb_repartition rep, odb_candidats can\n"</span>.
<a name="l00313"></a>00313         <span class="stringliteral">"left join odb_ref_prefixe pre on pre.id=can.prefixe\n"</span>.
<a name="l00314"></a>00314         <span class="stringliteral">"left join odb_ref_ef ef1 on can.ef1=ef1.id \n"</span>.
<a name="l00315"></a>00315         <span class="stringliteral">"left join odb_ref_ef ef2 on can.ef2=ef2.id \n"</span>.
<a name="l00316"></a>00316         <span class="stringliteral">"WHERE rep.id_table=decis.id_table and can.id_table=decis.id_table and can.sexe=sex.id and can.etablissement=eta.id\n"</span>.
<a name="l00317"></a>00317         <span class="stringliteral">" and decis.delib1='Admissible' and can.annee=$annee and decis.annee=$annee and rep.annee=$annee and rep.jury=$jury\n"</span>.
<a name="l00318"></a>00318         <span class="stringliteral">" and can.eps=eps.id\n"</span>.
<a name="l00319"></a>00319         <span class="stringliteral">"ORDER BY nom, prenoms"</span>;
<a name="l00320"></a>00320         <span class="comment">//echo "&lt;pre&gt;".str_replace($pass,'*****',$sql)."&lt;/pre&gt;";</span>
<a name="l00321"></a>00321         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00322"></a>00322         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>=0;
<a name="l00323"></a>00323         <span class="keywordflow">while</span>($row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00324"></a>00324                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00325"></a>00325                 <span class="keywordflow">foreach</span>(array('id_table<span class="charliteral">','</span>sexe<span class="charliteral">','</span>prefixe<span class="charliteral">','</span>nom<span class="charliteral">','</span>prenoms<span class="charliteral">','</span>etablissement<span class="charliteral">','</span>idSerie<span class="charliteral">','</span>ef1<span class="charliteral">','</span>ef2<span class="charliteral">','</span>eps') as $col) $$col=$row[$col];
<a name="l00326"></a>00326                 <a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>=<a class="code" href="inc-odb_8php.html#50e3b190a166aaf85cb237405cf56be2" title="affiche un numero de table de facon lisible pour un humain">getIdTableHumain</a>(<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>);
<a name="l00327"></a>00327                 $tDelib1[$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['id_table']=<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>;
<a name="l00328"></a>00328                 <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>=<a class="code" href="inc-pdf-convocation_8php.html#a1d1a8c13dd23a13326547e2fb40b700">$prefixe</a>.<span class="stringliteral">" &lt;b&gt;$nom&lt;/b&gt;"</span>;
<a name="l00329"></a>00329                 <span class="keywordflow">if</span>($sexe==<span class="charliteral">'F'</span>) $sexe='Mlle'; <span class="keywordflow">else</span> $sexe='M.';
<a name="l00330"></a>00330                 $tDelib1[$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['candidat']=utf8_decode(<span class="stringliteral">"$sexe $nom $prenoms"</span>);
<a name="l00331"></a>00331                 $tDelib1[$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['etablissement']=utf8_decode($etablissement);
<a name="l00332"></a>00332                 <span class="keywordflow">if</span>($eps=='Apte') {
<a name="l00333"></a>00333                         $tDelib1Eps[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['id_table']=<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>;
<a name="l00334"></a>00334                         $tDelib1Eps[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['candidat']=utf8_decode(<span class="stringliteral">"$sexe $nom $prenoms"</span>);
<a name="l00335"></a>00335                         $tDelib1Eps[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['eps']=utf8_decode($eps);
<a name="l00336"></a>00336                         $tDelib1Eps[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['etablissement']=utf8_decode($etablissement);
<a name="l00337"></a>00337                 }
<a name="l00338"></a>00338                 <span class="keywordflow">if</span>($ef1!='' || $ef2!='') {
<a name="l00339"></a>00339                         $tDelib1EF[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['id_table']=<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>;
<a name="l00340"></a>00340                         $tDelib1EF[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['candidat']=utf8_decode(<span class="stringliteral">"$sexe $nom $prenoms"</span>);
<a name="l00341"></a>00341                         $tDelib1EF[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['Ep_fac_1']=utf8_decode($ef1);
<a name="l00342"></a>00342                         $tDelib1EF[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['Ep_fac_2']=utf8_decode($ef2);
<a name="l00343"></a>00343                         $tDelib1EF[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['etablissement']=utf8_decode($etablissement);
<a name="l00344"></a>00344                 }
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;script type='text/javascript'&gt;function bon_format_date(chaine) {\n"</span>.
<a name="l00347"></a>00347         'var exp=<span class="keyword">new</span> RegExp(<span class="stringliteral">"^[0-9]{1,2}\/[01]?[0-9]\/[0-9]{4}$"</span>,<span class="stringliteral">"g"</span>);<span class="keywordflow">return</span> exp.test(chaine);}&lt;/script&gt;';
<a name="l00348"></a>00348         <span class="comment">//echo"&lt;pre&gt;";print_r($tDelib1);echo"&lt;/pre&gt;\n";</span>
<a name="l00349"></a>00349         include_once(<a class="code" href="odb__affiche__csv_8php.html#c24ff0f08fb134ed2d43c99826787bc2">DIR_ODB_COMMUN</a>.'inc-html.php'); <span class="comment">// pour getRewriteString et vignette</span>
<a name="l00350"></a>00350         <span class="keywordflow">foreach</span>($tSeries as $iIdSerie=&gt;$sSerie) {
<a name="l00351"></a>00351                 <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Resultats Jury $jury-Serie $sSerie - deliberation 1"</span>);
<a name="l00352"></a>00352                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;<a class="code" href="inc-pdf-table_8php.html#1c3d7fb9d2f4e0216017175154061426">eacute</a>;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00353"></a>00353                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00354"></a>00354                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00355"></a>00355                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$tDelib1[$iIdSerie];
<a name="l00356"></a>00356                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Liste des admissibles (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00357"></a>00357                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admissibles (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00358"></a>00358                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00359"></a>00359                 <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00360"></a>00360                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;1&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration&lt;/b&gt;&lt;br/&gt;Jury $jury s&amp;eacute;rie &lt;b&gt;$sSerie&lt;/b&gt;&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00361"></a>00361                 <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00362"></a>00362                 <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"1&amp;deg; d&amp;eacute;lib&amp;eacute;ration jury $jury s&amp;eacute;rie $sSerie"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00363"></a>00363         }
<a name="l00364"></a>00364         <span class="comment">// EPS</span>
<a name="l00365"></a>00365         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Admissibles eps jury $jury-Serie $sSerie deliberation 1"</span>);
<a name="l00366"></a>00366         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>eps'=&gt;'EPS<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00367"></a>00367         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00368"></a>00368         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00369"></a>00369         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$tDelib1Eps;
<a name="l00370"></a>00370         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Liste des admissibles aptes en EPS (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00371"></a>00371         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admissibles aptes en EPS (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00372"></a>00372         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00373"></a>00373         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00374"></a>00374         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;Admissibles aptes en EPS&lt;br/&gt;1&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration&lt;/b&gt; jury $jury&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00375"></a>00375         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00376"></a>00376         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Admissibles aptes en EPS - 1&amp;deg; d&amp;eacute;lib&amp;eacute;ration jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00377"></a>00377         <span class="comment">// EF</span>
<a name="l00378"></a>00378         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Admissibles ef jury $jury-Serie $sSerie deliberation 1"</span>);
<a name="l00379"></a>00379         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array(
<a name="l00380"></a>00380                 'id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),
<a name="l00381"></a>00381                 'candidat'=&gt;'Candidat',
<a name="l00382"></a>00382                 'Ep_fac_1'=&gt;html_entity_decode('&amp;Eacute;p. Fac. 1'),
<a name="l00383"></a>00383                 'Ep_fac_2'=&gt;html_entity_decode('&amp;Eacute;p. Fac. 2'),
<a name="l00384"></a>00384                 'etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement')
<a name="l00385"></a>00385         );
<a name="l00386"></a>00386         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00387"></a>00387         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00388"></a>00388         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$tDelib1EF;
<a name="l00389"></a>00389         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"&amp;Eacute;preuves facultatives des admissibles (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00390"></a>00390         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"&amp;Eacute;preuves facultatives des admissibles (1&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00391"></a>00391         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00392"></a>00392         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00393"></a>00393         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;&amp;Eacute;preuves facultatives des admissibles&lt;br/&gt;1&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration&lt;/b&gt; jury $jury&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00394"></a>00394         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00395"></a>00395         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"&amp;Eacute;preuves facultatives des admissibles - 1&amp;deg; d&amp;eacute;lib&amp;eacute;ration jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00396"></a>00396         <span class="comment">// Non admissibles</span>
<a name="l00397"></a>00397         $aujourdhui=date('xx/m/Y');
<a name="l00398"></a>00398         $verif=<span class="stringliteral">"onSubmit=\"if(document.forms['form_jury'].nom_jury.value=='' || document.forms['form_jury'].nom_jury.value=='Nom')\n"</span>.
<a name="l00399"></a>00399         <span class="stringliteral">" {alert('Veuillez saisir le nom du president du jury');return false;}\n"</span>.
<a name="l00400"></a>00400         <span class="stringliteral">"if(document.forms['form_jury'].lieu_jury.value=='' || document.forms['form_jury'].lieu_jury.value=='Lieu')\n"</span>.
<a name="l00401"></a>00401         <span class="stringliteral">" {alert('Veuillez saisir la ville du centre de deliberation');return false;}\n"</span>.
<a name="l00402"></a>00402         <span class="stringliteral">"if(!bon_format_date(document.forms['form_jury'].date_jury.value))\n"</span>.
<a name="l00403"></a>00403         <span class="stringliteral">" {alert('Veuillez saisir une date de deliberation correcte');return false;}\n"</span>.
<a name="l00404"></a>00404         <span class="stringliteral">"return true;\""</span>;
<a name="l00405"></a>00405         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Non admissibles jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;\n"</span>.
<a name="l00406"></a>00406         <span class="stringliteral">"&lt;form name='form_jury' action='../plugins/odb/odb_commun/inc-pdf-resultats.php' $verif method='POST'&gt;\n"</span>.
<a name="l00407"></a>00407         <span class="stringliteral">"&lt;input type='hidden' name='jury' value='$jury'/&gt;\n"</span>.
<a name="l00408"></a>00408         <span class="stringliteral">"&lt;input type='hidden' name='deliberation' value='1'/&gt;\n"</span>.
<a name="l00409"></a>00409         <span class="stringliteral">"&lt;input type='hidden' name='annee' value='$annee'/&gt;\n"</span>.
<a name="l00410"></a>00410         <span class="stringliteral">"&lt;input type='hidden' name='exec' value='odb_notes'/&gt;\n"</span>.
<a name="l00411"></a>00411         <span class="stringliteral">"&lt;td&gt;&lt;small&gt;&lt;label for='nom_jury'&gt;Pr&amp;eacute;sident du jury&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;\n&lt;input name='nom_jury' class='fondo' size=10 value='Nom' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00412"></a>00412         <span class="stringliteral">"&lt;small&gt;&lt;label for='lieu_jury'&gt;Ville de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='lieu_jury' class='fondo' size=10 value='Lieu' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00413"></a>00413         <span class="stringliteral">"&lt;small&gt;&lt;label for='date_jury'&gt;Date de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='date_jury' class='fondo' size=10 value='$aujourdhui' onFocus=\"this.select();\"/&gt;&lt;/td&gt;\n"</span>.
<a name="l00414"></a>00414         <span class="stringliteral">"&lt;td&gt;&lt;input type='submit' value='Non\nadmissibles\n1e deliberation' class='fondo' /&gt;&lt;/td&gt;&lt;/form&gt;&lt;/tr&gt;\n"</span>;
<a name="l00415"></a>00415 
<a name="l00417"></a>00417         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td colspan=3&gt;&lt;hr size=1/&gt;&lt;b&gt;2&lt;sup&gt;&amp;egrave;me&lt;/sup&gt;&lt;/b&gt; d&amp;eacute;lib&amp;eacute;ration&lt;hr size=1/&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00418"></a>00418         <span class="comment">// On verifie si les notes d'EPS et EF sont toutes bien saisies</span>
<a name="l00419"></a>00419         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_candidats can, odb_repartition rep, odb_ref_eps eps, odb_decisions decis\n"</span>.
<a name="l00420"></a>00420         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00421"></a>00421         <span class="stringliteral">" and can.eps=eps.id and eps.eps='Apte' and rep.jury=$jury and decis.delib1='Admissible'"</span>;
<a name="l00422"></a>00422         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00423"></a>00423         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00424"></a>00424         $nbEpsTheorie=$row['nb'];
<a name="l00425"></a>00425         <span class="comment">//echo "nbEpsTheorie : $nbEpsTheorie&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00426"></a>00426         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_notes notes, odb_candidats can, odb_repartition rep, odb_ref_eps eps, odb_decisions decis\n"</span>.
<a name="l00427"></a>00427         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and notes.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00428"></a>00428         <span class="stringliteral">" and can.eps=eps.id and eps.eps='Apte' and notes.id_table=can.id_table and rep.jury=$jury\n"</span>.
<a name="l00429"></a>00429         <span class="stringliteral">" and decis.delib1='Admissible' and notes.id_matiere="</span>.ID_MATIERE_EPS;
<a name="l00430"></a>00430         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00431"></a>00431         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00432"></a>00432         $nbEpsPratique=$row['nb'];
<a name="l00433"></a>00433         <span class="comment">//echo "nbEpsPratique : $nbEpsPratique&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_candidats can, odb_repartition rep, odb_ref_ef ef, odb_decisions decis\n"</span>.
<a name="l00436"></a>00436         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00437"></a>00437         <span class="stringliteral">" and can.ef1=ef.id and rep.jury=$jury and decis.delib1='Admissible'"</span>;
<a name="l00438"></a>00438         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00439"></a>00439         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00440"></a>00440         $nbEf1Theorie=$row['nb'];
<a name="l00441"></a>00441         <span class="comment">//echo "nbEf1Theorie : $nbEf1Theorie&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00442"></a>00442         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_notes notes, odb_candidats can, odb_repartition rep, odb_ref_ef ef, odb_decisions decis\n"</span>.
<a name="l00443"></a>00443         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and notes.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00444"></a>00444         <span class="stringliteral">" and can.ef1=ef.id and notes.id_table=can.id_table and rep.jury=$jury and decis.delib1='Admissible' and notes.id_matiere="</span>.ID_MATIERE_EF1;
<a name="l00445"></a>00445         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00446"></a>00446         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00447"></a>00447         $nbEf1Pratique=$row['nb'];
<a name="l00448"></a>00448         <span class="comment">//echo "nbEf1Pratique : $nbEf1Pratique&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_candidats can, odb_repartition rep, odb_ref_ef ef, odb_decisions decis\n"</span>.
<a name="l00451"></a>00451         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00452"></a>00452         <span class="stringliteral">" and can.ef2=ef.id and rep.jury=$jury and decis.delib1='Admissible'"</span>;
<a name="l00453"></a>00453         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00454"></a>00454         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00455"></a>00455         $nbEf2Theorie=$row['nb'];
<a name="l00456"></a>00456         <span class="comment">//echo "nbEf2Theorie : $nbEf2Theorie&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00457"></a>00457         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT count(*) nb from odb_notes notes, odb_candidats can, odb_repartition rep, odb_ref_ef ef, odb_decisions decis\n"</span>.
<a name="l00458"></a>00458         <span class="stringliteral">"WHERE can.id_saisie=rep.id_saisie and can.annee=$annee and rep.annee=$annee and notes.annee=$annee and decis.annee=$annee and rep.id_table=decis.id_table\n"</span>.
<a name="l00459"></a>00459         <span class="stringliteral">" and can.ef2=ef.id and notes.id_table=can.id_table and rep.jury=$jury and decis.delib1='Admissible' and notes.id_matiere="</span>.ID_MATIERE_EF2;
<a name="l00460"></a>00460         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00461"></a>00461         $row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00462"></a>00462         $nbEf2Pratique=$row['nb'];
<a name="l00463"></a>00463         <span class="comment">//echo "nbEf2Pratique : $nbEf2Pratique&lt;pre&gt;$sql&lt;/pre&gt;";</span>
<a name="l00464"></a>00464         <a class="code" href="inc-pdf-resultats_8php.html#cc319a0dd799343c5fd123b3417f8feb">$sTmp</a>='&lt;br/&gt;Pour les candidats absents, &lt;b&gt;saisissez 0&lt;/b&gt;.';
<a name="l00465"></a>00465         <span class="keywordflow">if</span>($nbEpsPratique&lt;$nbEpsTheorie) <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td colspan=3 style='color:#f00;'&gt;Veuillez saisir toutes les notes d'&lt;b&gt;EPS&lt;/b&gt; du jury $jury $sTmp&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00466"></a>00466         elseif($nbEf1Pratique&lt;$nbEf1Theorie) <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.="&lt;tr&gt;&lt;td colspan=3 style='color:<span class="preprocessor">#f00;'&gt;Veuillez saisir toutes les notes d'&lt;b&gt;EF1&lt;/b&gt; du jury $jury $sTmp&lt;/td&gt;&lt;/tr&gt;\n";</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span>        elseif($nbEf2Pratique&lt;$nbEf2Theorie) <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.="&lt;tr&gt;&lt;td colspan=3 style='color:<span class="preprocessor">#f00;'&gt;Veuillez saisir toutes les notes d'&lt;b&gt;EF2&lt;/b&gt; du jury $jury $sTmp&lt;/td&gt;&lt;/tr&gt;\n";</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>        <span class="keywordflow">else</span> {
<a name="l00469"></a>00469                 <a class="code" href="inc-referentiel_8php.html#38c3065b99469bad788c627a7b70360b" title="Met les decisions a jour.">odb_maj_decisions</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>,$iPrecision,2);
<a name="l00470"></a>00470                 <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT decis.id_table, sex.sexe, pre.prefixe, nom, prenoms, eta.etablissement, can.serie idSerie, decis.delib2 delib\n"</span>.
<a name="l00471"></a>00471                 <span class="stringliteral">"FROM odb_ref_sexe sex, odb_ref_etablissement eta, odb_decisions decis, odb_repartition rep, odb_candidats can\n"</span>.
<a name="l00472"></a>00472                 <span class="stringliteral">"left join odb_ref_prefixe pre on pre.id=can.prefixe\n"</span>.
<a name="l00473"></a>00473                 <span class="stringliteral">"WHERE rep.id_table=decis.id_table and can.id_table=decis.id_table and can.sexe=sex.id and can.etablissement=eta.id\n"</span>.
<a name="l00474"></a>00474                 <span class="stringliteral">" and decis.delib1='Admissible' and can.annee=$annee and decis.annee=$annee and rep.annee=$annee and rep.jury=$jury\n"</span>.
<a name="l00475"></a>00475                 <span class="stringliteral">"ORDER BY nom, prenoms"</span>;
<a name="l00476"></a>00476                 <span class="comment">//echo $sql;</span>
<a name="l00477"></a>00477                 <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00478"></a>00478                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>=0;
<a name="l00479"></a>00479                 <span class="keywordflow">while</span>($row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00480"></a>00480                         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00481"></a>00481                         <span class="keywordflow">foreach</span>(array('id_table<span class="charliteral">','</span>sexe<span class="charliteral">','</span>prefixe<span class="charliteral">','</span>nom<span class="charliteral">','</span>prenoms<span class="charliteral">','</span>etablissement<span class="charliteral">','</span>idSerie<span class="charliteral">','</span>delib') as $col) $$col=$row[$col];
<a name="l00482"></a>00482                         <a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>=<a class="code" href="inc-odb_8php.html#50e3b190a166aaf85cb237405cf56be2" title="affiche un numero de table de facon lisible pour un humain">getIdTableHumain</a>(<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>);
<a name="l00483"></a>00483                         <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>=<a class="code" href="inc-pdf-convocation_8php.html#a1d1a8c13dd23a13326547e2fb40b700">$prefixe</a>.<span class="stringliteral">" &lt;b&gt;$nom&lt;/b&gt;"</span>;
<a name="l00484"></a>00484                         <span class="keywordflow">if</span>($sexe==<span class="charliteral">'F'</span>) $sexe='Mlle'; <span class="keywordflow">else</span> $sexe='M.';
<a name="l00485"></a>00485                         <span class="keywordflow">if</span>(in_array(strtolower(<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>),array('passable<span class="charliteral">','</span>abien<span class="charliteral">','</span>bien<span class="charliteral">','</span>tbien'))) <a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>='Admis';
<a name="l00486"></a>00486                         <span class="keywordflow">else</span> <a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>=<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>;
<a name="l00487"></a>00487                         <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['id_table']=<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>;
<a name="l00488"></a>00488                         <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['candidat']=utf8_decode(<span class="stringliteral">"$sexe $nom $prenoms"</span>);
<a name="l00489"></a>00489                         <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['etablissement']=utf8_decode($etablissement);
<a name="l00490"></a>00490                         <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['delib']=utf8_decode(<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>);
<a name="l00491"></a>00491                 }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493                 <span class="keywordflow">foreach</span>($tSeries as $iIdSerie=&gt;$sSerie) {
<a name="l00494"></a>00494                         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Deliberation 2 - Resultats Jury $jury-Serie $sSerie"</span>);
<a name="l00495"></a>00495                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00496"></a>00496                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00497"></a>00497                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00498"></a>00498                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Oral'][$iIdSerie];
<a name="l00499"></a>00499                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Liste des admissibles (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00500"></a>00500                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Autoris&amp;eacute;s aux &amp;eacute;preuves orales (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00501"></a>00501                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00502"></a>00502                         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00503"></a>00503                         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;2&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration - Oral&lt;/b&gt;&lt;br/&gt;Jury $jury s&amp;eacute;rie &lt;b&gt;$sSerie&lt;/b&gt;&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00504"></a>00504                         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00505"></a>00505                         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"2&amp;deg; d&amp;eacute;lib&amp;eacute;ration jury $jury s&amp;eacute;rie $sSerie"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00506"></a>00506                 }
<a name="l00507"></a>00507                 unset(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Admissible']);
<a name="l00508"></a>00508                 <span class="keywordflow">if</span>(is_array(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve'])) {
<a name="l00509"></a>00509                         $tReserve=array();
<a name="l00510"></a>00510                         <span class="keywordflow">foreach</span>(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve'] as $iIdSerie=&gt;<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>) $tReserve=array_merge($tReserve,<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00511"></a>00511                         unset(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve']);
<a name="l00512"></a>00512                         ksort($tReserve);
<a name="l00513"></a>00513                         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Deliberation 2 - Cas reserves Jury $jury"</span>);
<a name="l00514"></a>00514                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00515"></a>00515                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00516"></a>00516                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00517"></a>00517                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$tReserve;
<a name="l00518"></a>00518                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Cas r&amp;eacute;serv&amp;eacute;s (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00519"></a>00519                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Cas r&amp;eacute;serv&amp;eacute;s (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury"</span>);
<a name="l00520"></a>00520                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00521"></a>00521                         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00522"></a>00522                         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;2&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration&lt;/b&gt; Cas r&amp;eacute;serv&amp;eacute;s&lt;br/&gt;Jury $jury&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00523"></a>00523                         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00524"></a>00524                         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"2&amp;deg; d&amp;eacute;lib&amp;eacute;ration - Cas reserv&amp;eacute;s - jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00525"></a>00525                 }
<a name="l00526"></a>00526                 <span class="keywordflow">foreach</span>($tSeries as $iIdSerie=&gt;$sSerie) {
<a name="l00527"></a>00527                         <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Deliberation 2 - Admis Jury $jury-Serie $sSerie"</span>);
<a name="l00528"></a>00528                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>delib'=&gt;'Mention<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00529"></a>00529                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00530"></a>00530                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00531"></a>00531                         <span class="comment">//echo"tDelib&lt;pre&gt;";print_r($tDelib);echo"&lt;/pre&gt;";</span>
<a name="l00532"></a>00532                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Admis'][$iIdSerie];
<a name="l00533"></a>00533                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admis 1&amp;deg; groupe (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00534"></a>00534                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admis 1&amp;deg; groupe (2&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00535"></a>00535                         <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00536"></a>00536                         <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00537"></a>00537                         <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">"&lt;b&gt;Admis 1&amp;deg; groupe&lt;/b&gt;&lt;br/&gt;Jury $jury s&amp;eacute;rie &lt;b&gt;$sSerie&lt;/b&gt;&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00538"></a>00538                         <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00539"></a>00539                         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Admis 1&amp;deg; groupe - Jury $jury s&amp;eacute;rie $sSerie"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00540"></a>00540                 }
<a name="l00541"></a>00541                 $verif=<span class="stringliteral">"onSubmit=\"if(document.forms['form_jury_admis1'].nom_jury.value=='' || document.forms['form_jury_admis1'].nom_jury.value=='Nom')\n"</span>.
<a name="l00542"></a>00542                 <span class="stringliteral">" {alert('Veuillez saisir le nom du president du jury');return false;}\n"</span>.
<a name="l00543"></a>00543                 <span class="stringliteral">"if(document.forms['form_jury_admis1'].lieu_jury.value=='' || document.forms['form_jury_admis1'].lieu_jury.value=='Lieu')\n"</span>.
<a name="l00544"></a>00544                 <span class="stringliteral">" {alert('Veuillez saisir la ville du centre de deliberation');return false;}\n"</span>.
<a name="l00545"></a>00545                 <span class="stringliteral">"if(!bon_format_date(document.forms['form_jury_admis1'].date_jury.value))\n"</span>.
<a name="l00546"></a>00546                 <span class="stringliteral">" {alert('Veuillez saisir une date de deliberation correcte');return false;}\n"</span>.
<a name="l00547"></a>00547                 <span class="stringliteral">"return true;\""</span>;
<a name="l00548"></a>00548                 <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Admis 1er groupe jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;\n"</span>.
<a name="l00549"></a>00549                 <span class="stringliteral">"&lt;form name='form_jury_admis1' action='../plugins/odb/odb_commun/inc-pdf-resultats.php' $verif method='POST'&gt;\n"</span>.
<a name="l00550"></a>00550                 <span class="stringliteral">"&lt;input type='hidden' name='jury' value='$jury'/&gt;\n"</span>.
<a name="l00551"></a>00551                 <span class="stringliteral">"&lt;input type='hidden' name='deliberation' value='2'/&gt;\n"</span>.
<a name="l00552"></a>00552                 <span class="stringliteral">"&lt;input type='hidden' name='annee' value='$annee'/&gt;\n"</span>.
<a name="l00553"></a>00553                 <span class="stringliteral">"&lt;input type='hidden' name='exec' value='odb_notes'/&gt;\n"</span>.
<a name="l00554"></a>00554                 <span class="stringliteral">"&lt;td&gt;&lt;small&gt;&lt;label for='nom_jury'&gt;Pr&amp;eacute;sident du jury&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;\n&lt;input name='nom_jury' class='fondo' size=10 value='Nom' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00555"></a>00555                 <span class="stringliteral">"&lt;small&gt;&lt;label for='lieu_jury'&gt;Ville de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='lieu_jury' class='fondo' size=10 value='Lieu' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00556"></a>00556                 <span class="stringliteral">"&lt;small&gt;&lt;label for='date_jury'&gt;Date de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='date_jury' class='fondo' size=10 value='$aujourdhui' onFocus=\"this.select();\"/&gt;&lt;/td&gt;\n"</span>.
<a name="l00557"></a>00557                 <span class="stringliteral">"&lt;td&gt;&lt;input type='submit' value='Admis\n1er groupe' class='fondo' /&gt;&lt;/td&gt;&lt;/form&gt;&lt;/tr&gt;\n"</span>;
<a name="l00558"></a>00558         }
<a name="l00560"></a>00560         <a class="code" href="inc-referentiel_8php.html#38c3065b99469bad788c627a7b70360b" title="Met les decisions a jour.">odb_maj_decisions</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>,$iPrecision,3);
<a name="l00561"></a>00561         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td colspan=3&gt;&lt;hr size=1/&gt;&lt;b&gt;3&lt;sup&gt;&amp;egrave;me&lt;/sup&gt;&lt;/b&gt; d&amp;eacute;lib&amp;eacute;ration&lt;hr size=1/&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>=<span class="stringliteral">"SELECT decis.id_table, sex.sexe, pre.prefixe, nom, prenoms, eta.etablissement, can.serie idSerie, decis.delib3 delib\n"</span>.
<a name="l00564"></a>00564         <span class="stringliteral">"FROM odb_ref_sexe sex, odb_ref_etablissement eta, odb_decisions decis, odb_repartition rep, odb_candidats can\n"</span>.
<a name="l00565"></a>00565         <span class="stringliteral">"left join odb_ref_prefixe pre on pre.id=can.prefixe\n"</span>.
<a name="l00566"></a>00566         <span class="stringliteral">"WHERE rep.id_table=decis.id_table and can.id_table=decis.id_table and can.sexe=sex.id and can.etablissement=eta.id\n"</span>.
<a name="l00567"></a>00567         <span class="stringliteral">" and decis.delib1='Admissible' and (decis.delib2='Oral' or decis.delib2='Reserve') and can.annee=$annee and decis.annee=$annee and rep.annee=$annee and rep.jury=$jury\n"</span>.
<a name="l00568"></a>00568         <span class="stringliteral">"ORDER BY nom, prenoms"</span>;
<a name="l00569"></a>00569         <span class="comment">//echo $sql;</span>
<a name="l00570"></a>00570         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00571"></a>00571         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>=0;
<a name="l00572"></a>00572         <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>=array();
<a name="l00573"></a>00573         <span class="keywordflow">while</span>($row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00574"></a>00574                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00575"></a>00575                 <span class="keywordflow">foreach</span>(array('id_table<span class="charliteral">','</span>sexe<span class="charliteral">','</span>prefixe<span class="charliteral">','</span>nom<span class="charliteral">','</span>prenoms<span class="charliteral">','</span>etablissement<span class="charliteral">','</span>idSerie<span class="charliteral">','</span>delib') as $col) $$col=$row[$col];
<a name="l00576"></a>00576                 <a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>=<a class="code" href="inc-odb_8php.html#50e3b190a166aaf85cb237405cf56be2" title="affiche un numero de table de facon lisible pour un humain">getIdTableHumain</a>(<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>);
<a name="l00577"></a>00577                 <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>=<a class="code" href="inc-pdf-convocation_8php.html#a1d1a8c13dd23a13326547e2fb40b700">$prefixe</a>.<span class="stringliteral">" &lt;b&gt;$nom&lt;/b&gt;"</span>;
<a name="l00578"></a>00578                 <span class="keywordflow">if</span>($sexe==<span class="charliteral">'F'</span>) $sexe='Mlle'; <span class="keywordflow">else</span> $sexe='M.';
<a name="l00579"></a>00579                 <span class="keywordflow">if</span>(in_array(strtolower(<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>),array('passable<span class="charliteral">','</span>abien<span class="charliteral">','</span>bien<span class="charliteral">','</span>tbien'))) <a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>='Admis';
<a name="l00580"></a>00580                 <span class="keywordflow">else</span> <a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>=<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>;
<a name="l00581"></a>00581                 <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['id_table']=<a class="code" href="inc-pdf-convocation_8php.html#295929cd9243ffe88a7c63fc065d7e9e">$id_table</a>;
<a name="l00582"></a>00582                 <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['candidat']=utf8_decode(<span class="stringliteral">"$sexe $nom $prenoms"</span>);
<a name="l00583"></a>00583                 <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['etablissement']=utf8_decode($etablissement);
<a name="l00584"></a>00584                 <a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>[<a class="code" href="resultats__ajournes__par__centre_8php.html#28034c8e7e61c01855a789a9215d8acd">$cle</a>][$idSerie][<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>]['delib']=utf8_decode(<a class="code" href="inc-pdf-attestations_8php.html#9a4db75cbb47f99cc82e12e08bb365ec">$delib</a>);
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586         <span class="comment">//echo"&lt;pre&gt;";print_r($tDelib);echo"&lt;/pre&gt;";</span>
<a name="l00587"></a>00587         <span class="keywordflow">if</span>(is_array(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve'])) {
<a name="l00588"></a>00588                 $tReserve=array();
<a name="l00589"></a>00589                 <span class="keywordflow">foreach</span>(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve'] as $iIdSerie=&gt;<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>) $tReserve=array_merge($tReserve,<a class="code" href="inc-pdf-attestations_8php.html#cb478ae0bc69ed718c3c6deea2da7bd6">$tTmp</a>);
<a name="l00590"></a>00590                 unset(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Reserve']);
<a name="l00591"></a>00591                 ksort($tReserve);
<a name="l00592"></a>00592                 <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Deliberation 2 - Cas reserves Jury $jury-Serie $sSerie"</span>);
<a name="l00593"></a>00593                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00594"></a>00594                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00595"></a>00595                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00596"></a>00596                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=$tReserve;
<a name="l00597"></a>00597                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Cas r&amp;eacute;serv&amp;eacute;s (3&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00598"></a>00598                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Cas r&amp;eacute;serv&amp;eacute;s (3&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00599"></a>00599                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00600"></a>00600                 <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00601"></a>00601                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">" &lt;b&gt;3&lt;sup&gt;&amp;egrave;re&lt;/sup&gt; d&amp;eacute;lib&amp;eacute;ration&lt;/b&gt; Cas r&amp;eacute;serv&amp;eacute;s&lt;br/&gt;Jury $jury s&amp;eacute;rie &lt;b&gt;$sSerie&lt;/b&gt;&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00602"></a>00602                 <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00603"></a>00603                 <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"3&amp;deg; d&amp;eacute;lib&amp;eacute;ration - Cas reserv&amp;eacute;s - jury $jury s&amp;eacute;rie $sSerie"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00604"></a>00604         }
<a name="l00605"></a>00605         reset($tSeries);
<a name="l00606"></a>00606         <span class="keywordflow">foreach</span>($tSeries as $iIdSerie=&gt;$sSerie) {
<a name="l00607"></a>00607                 <a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>=<a class="code" href="inc-html_8php.html#a99d47bed9e80456aaed4dc43d2fc0cc" title="rend une chaine compatible url-rewriting">getRewriteString</a>(<span class="stringliteral">"Deliberation 3 - Admis Jury $jury-Serie $sSerie"</span>);
<a name="l00608"></a>00608                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['cols'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('id_table'=&gt;html_entity_decode('Num&amp;eacute;ro table'),'candidat'=&gt;'Candidat<span class="charliteral">','</span>delib'=&gt;'Mention<span class="charliteral">','</span>etablissement'=&gt;html_entity_decode('&amp;Eacute;tablissement'));
<a name="l00609"></a>00609                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['format'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=array('taille'=&gt;'A3<span class="charliteral">','</span>orientation'=&gt;'portrait');
<a name="l00610"></a>00610                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['options'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="odb__notes_8php.html#76943fe274cc25e0034e2847e5c5c667">$PDF_A3_PORTRAIT</a>;
<a name="l00611"></a>00611                 <span class="comment">//echo"tDelib&lt;pre&gt;";print_r($tDelib);echo"&lt;/pre&gt;";</span>
<a name="l00612"></a>00612                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['data'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Admis'][$iIdSerie];
<a name="l00613"></a>00613                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['pied'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admis 2&amp;deg; groupe (3&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00614"></a>00614                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['titre'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Admis 2&amp;deg; groupe (3&amp;deg; d&amp;eacute;lib&amp;eacute;ration) - ann&amp;eacute;e $annee - jury $jury - s&amp;eacute;rie $sSerie"</span>);
<a name="l00615"></a>00615                 <a class="code" href="resultats__ajournes__par__centre_8php.html#082ba331d3cc45e8443c96d1131d5599">$_SESSION</a>['post'][<a class="code" href="resultats__par__centre_8php.html#d7ffa63e74542beba116bde88c6716b5">$nom_pdf</a>]=html_entity_decode(<span class="stringliteral">"Le pr&amp;eacute;sident du jury,"</span>);
<a name="l00616"></a>00616                 <a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>=<span class="stringliteral">"&lt;A HREF='../plugins/odb/odb_commun/inc-pdf-table.php?pdf=$nom_pdf' target='_BLANK'&gt;"</span>;
<a name="l00617"></a>00617                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ed9bcb6730d1510376ce80e32bd9504d">$tmp2</a>=<span class="stringliteral">"&lt;b&gt;Admis 2&amp;deg; groupe&lt;/b&gt;&lt;br/&gt;Jury $jury s&amp;eacute;rie &lt;b&gt;$sSerie&lt;/b&gt;&lt;/A&gt;&lt;br/&gt;&lt;br/&gt;"</span>;
<a name="l00618"></a>00618                 <a class="code" href="resultats__ajournes__par__centre_8php.html#110fc80fcb224fbae884b1a3742c4924">$lien</a>=<a class="code" href="resultats__ajournes__par__centre_8php.html#4e5bd75ba6d44a1723c3ec18c61cd09b">$tmp1</a>.$tmp2;
<a name="l00619"></a>00619                 <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Admis 2&amp;deg; groupe - Jury $jury s&amp;eacute;rie $sSerie"</span>).<span class="stringliteral">"&lt;/td&gt;&lt;td colspan=2&gt;$lien&lt;/td&gt;&lt;/tr&gt;\n"</span>;
<a name="l00620"></a>00620         }
<a name="l00621"></a>00621         <span class="keywordflow">if</span>(is_array(<a class="code" href="resultats__ajournes__par__centre_8php.html#46e38f8e36bb444e92ebeeaebd56cdba">$tDelib</a>['Admis'])) {
<a name="l00622"></a>00622                 $verif=<span class="stringliteral">"onSubmit=\"if(document.forms['form_jury_admis2'].nom_jury.value=='' || document.forms['form_jury_admis2'].nom_jury.value=='Nom')\n"</span>.
<a name="l00623"></a>00623                 <span class="stringliteral">" {alert('Veuillez saisir le nom du president du jury');return false;}\n"</span>.
<a name="l00624"></a>00624                 <span class="stringliteral">"if(document.forms['form_jury_admis2'].lieu_jury.value=='' || document.forms['form_jury_admis2'].lieu_jury.value=='Lieu')\n"</span>.
<a name="l00625"></a>00625                 <span class="stringliteral">" {alert('Veuillez saisir la ville du centre de deliberation');return false;}\n"</span>.
<a name="l00626"></a>00626                 <span class="stringliteral">"if(!bon_format_date(document.forms['form_jury_admis2'].date_jury.value))\n"</span>.
<a name="l00627"></a>00627                 <span class="stringliteral">" {alert('Veuillez saisir une date de deliberation correcte');return false;}\n"</span>.
<a name="l00628"></a>00628                 <span class="stringliteral">"return true;\""</span>;
<a name="l00629"></a>00629                 <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>.vignette('pdf',<span class="stringliteral">"Admis 2e groupe jury $jury"</span>).<span class="stringliteral">"&lt;/td&gt;\n"</span>.
<a name="l00630"></a>00630                 <span class="stringliteral">"&lt;form name='form_jury_admis2' action='../plugins/odb/odb_commun/inc-pdf-resultats.php' $verif method='POST'&gt;\n"</span>.
<a name="l00631"></a>00631                 <span class="stringliteral">"&lt;input type='hidden' name='jury' value='$jury'/&gt;\n"</span>.
<a name="l00632"></a>00632                 <span class="stringliteral">"&lt;input type='hidden' name='deliberation' value='3'/&gt;\n"</span>.
<a name="l00633"></a>00633                 <span class="stringliteral">"&lt;input type='hidden' name='annee' value='$annee'/&gt;\n"</span>.
<a name="l00634"></a>00634                 <span class="stringliteral">"&lt;input type='hidden' name='exec' value='odb_notes'/&gt;\n"</span>.
<a name="l00635"></a>00635                 <span class="stringliteral">"&lt;td&gt;&lt;small&gt;&lt;label for='nom_jury'&gt;Pr&amp;eacute;sident du jury&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;\n&lt;input name='nom_jury' class='fondo' size=10 value='Nom' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00636"></a>00636                 <span class="stringliteral">"&lt;small&gt;&lt;label for='lieu_jury'&gt;Ville de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='lieu_jury' class='fondo' size=10 value='Lieu' onFocus=\"this.value=''\"/&gt;&lt;br/&gt;\n"</span>.
<a name="l00637"></a>00637                 <span class="stringliteral">"&lt;small&gt;&lt;label for='date_jury'&gt;Date de d&amp;eacute;lib&amp;eacute;ration&lt;/label&gt;&lt;/small&gt;&lt;br/&gt;&lt;input name='date_jury' class='fondo' size=10 value='$aujourdhui' onFocus=\"this.select();\"/&gt;&lt;/td&gt;\n"</span>.
<a name="l00638"></a>00638                 <span class="stringliteral">"&lt;td&gt;&lt;input type='submit' value='Admis\n2e groupe' class='fondo' /&gt;&lt;/td&gt;&lt;/form&gt;&lt;/tr&gt;\n"</span>;
<a name="l00639"></a>00639         }
<a name="l00640"></a>00640         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>.=<span class="stringliteral">"&lt;/table&gt;\n"</span>;
<a name="l00641"></a>00641         <span class="keywordflow">return</span> <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>;
<a name="l00642"></a>00642 }
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 
<a name="l00652"></a><a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#25aee0267595ba3fbc7413ba12e14b2e">00652</a> function <a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#25aee0267595ba3fbc7413ba12e14b2e" title="Affiche l&amp;#39;historique du candidat passé en param.">afficherHistorique</a>($id,<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>) {
<a name="l00653"></a>00653         include_once(<a class="code" href="odb__affiche__csv_8php.html#c24ff0f08fb134ed2d43c99826787bc2">DIR_ODB_COMMUN</a>.'inc-html.php');
<a name="l00654"></a>00654         <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)substr($id,(strlen($id)-4))&gt;0) {
<a name="l00655"></a>00655                 $identifiant=<span class="stringliteral">"notes.id_anonyme"</span>;
<a name="l00656"></a>00656         } <span class="keywordflow">else</span> $identifiant='notes.id_table';
<a name="l00657"></a>00657         <a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a> = <span class="stringliteral">"SELECT '$id' id_candidat, id_matiere, matiere, note, coeff, type, operateur, nom, maj\n"</span>
<a name="l00658"></a>00658         . <span class="stringliteral">" FROM odb_ref_matiere mat, odb_histo_notes notes left join (select nom, login from spip_auteurs) spip_auteurs on(spip_auteurs.login=notes.operateur)\n"</span>
<a name="l00659"></a>00659         . <span class="stringliteral">" where mat.id=notes.id_matiere and notes.annee=$annee and $identifiant='$id'\n"</span>
<a name="l00660"></a>00660         . ' ORDER BY type, matiere';
<a name="l00661"></a>00661         <a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="inc-odb_8php.html#cc73cdf19f49ae7162c99fd07a614e88" title="Execute une requete sql.">odb_query</a>(<a class="code" href="inc-pdf-attestations_8php.html#047170d6020a882807665812a27e2525">$sql</a>,__FILE__,__LINE__);
<a name="l00662"></a>00662         <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>=0;
<a name="l00663"></a>00663         <span class="keywordflow">foreach</span>(array('Candidat<span class="charliteral">','</span>Mati&amp;egrave;re<span class="charliteral">','</span>Note<span class="charliteral">','</span>Coeff<span class="charliteral">','</span>Type<span class="charliteral">','</span>Operateur<span class="charliteral">','</span>Date de mise &amp;<a class="code" href="inc-pdf-table_8php.html#6d44afa8f0dc1b03e9806f207b06180c">agrave</a>; jour') as $col)
<a name="l00664"></a>00664         $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>].=<span class="stringliteral">"\t&lt;th&gt;$col&lt;/th&gt;\n"</span>;
<a name="l00665"></a>00665         <span class="keywordflow">while</span>($row=mysql_fetch_array(<a class="code" href="inc-ezpdf_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00666"></a>00666                 <a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>++;
<a name="l00667"></a>00667                 <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>=$row['nom'];
<a name="l00668"></a>00668                 <span class="keywordflow">foreach</span>(array('id_candidat<span class="charliteral">','</span>matiere<span class="charliteral">','</span>note<span class="charliteral">','</span>coeff<span class="charliteral">','</span>type<span class="charliteral">','</span>operateur<span class="charliteral">','</span>maj') as $col) {
<a name="l00669"></a>00669                         $$col=$row[$col];
<a name="l00670"></a>00670                         <span class="keywordflow">if</span>($col=='operateur' &amp;&amp; <a class="code" href="resultats__ajournes__par__centre_8php.html#c72f7055f1354a72cd1dcca5d9f1e121">$nom</a>!='') $operateur=<span class="stringliteral">"$nom ($operateur)"</span>;
<a name="l00671"></a>00671                         $lignes[<a class="code" href="resultats__ajournes__par__centre_8php.html#ea5d1e230cf3df250120025d801dc7c3">$cpt</a>].=<span class="stringliteral">"\t&lt;td&gt;"</span>.$$col.<span class="stringliteral">"&lt;/td&gt;\n"</span>;
<a name="l00672"></a>00672                 }
<a name="l00673"></a>00673         }
<a name="l00674"></a>00674         <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>=<a class="code" href="inc-html_8php.html#5f91efa37c4c6e04e1e2792cc0c37600" title="Affiche une table html.">odb_html_table</a>(<span class="stringliteral">"Historique du candidat $id"</span>,$lignes,'<span class="charliteral">','</span>historique-24.gif');
<a name="l00675"></a>00675         <span class="keywordflow">return</span> <a class="code" href="resultats__ajournes__par__centre_8php.html#9e168f4152c267835864153c54449583">$msg</a>;
<a name="l00676"></a>00676 }
<a name="l00677"></a>00677 
<a name="l00684"></a><a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#68e7f719e572fd0f0451223e5bfcd06e">00684</a> function <a class="code" href="odb__notes_2exec_2inc-traitements_8php.html#68e7f719e572fd0f0451223e5bfcd06e" title="Devine le numero de deliberation en cours.">guessDeliberation</a>(<a class="code" href="inc-pdf-attestations_8php.html#b372e2dd50f4a592a1226a01290a2f4f">$annee</a>,<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>,$tParam) {
<a name="l00685"></a>00685     <span class="keywordflow">if</span>(isset($tParam[<span class="stringliteral">"_delib1_$annee"</span>][<a class="code" href="inc-pdf-attestations_8php.html#1f711ee6f46195ba9dfce71eaf779d02">$jury</a>])) {
<a name="l00686"></a>00686         <a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>=2;
<a name="l00687"></a>00687     } <span class="keywordflow">else</span> {
<a name="l00688"></a>00688         <a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>=1;
<a name="l00689"></a>00689     }
<a name="l00690"></a>00690     <span class="comment">//echo "$annee|$jury|".$tParam["_delib1_$annee"][$jury];</span>
<a name="l00691"></a>00691     <span class="keywordflow">return</span> <a class="code" href="inc-pdf-attestations_8php.html#dd57477ad14361f5834629e405ff5478">$deliberation</a>;
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 ?&gt;
</pre></div><hr size="1"><address style="text-align: right;"><small>Généré le Mon Mar 17 22:53:00 2008 pour Siou par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
