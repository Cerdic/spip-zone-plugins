<BOUCLE_formulaire(FORMULAIRES) {id_formulaire=#ENV{id_formulaire}}>
[
 +++++++++++++++++++++++++++++++++++++++++++
	(#REM)		Etapes
 +++++++++++++++++++++++++++++++++++++++++++
]
<B_etapes>
<ol>
<BOUCLE_etapes(BLOCS) {id_formulaire}>
<li[(#ID_BLOC|=={#ENV{id_bloc}}|?{' class="en_cours"'})]><a href="#URL_BLOC">#TITRE</a></li>
</BOUCLE_etapes>
</ol>
</B_etapes>

<a class="spacer" name="formulaire">&nbsp;</a>

<form name="formulaire_automatique_plusieurs_pages" action="#SELF" method="post" enctype="multipart/form-data">

[
 +++++++++++++++++++++++++++++++++++++++++++
	(#REM)		Blocs = pages
 +++++++++++++++++++++++++++++++++++++++++++
]
<BOUCLE_blocs(BLOCS) {id_formulaire} {id_bloc=#ENV{id_bloc}}>
<fieldset>
<legend>#TITRE</legend>
[<p>(#DESCRIPTIF)</p>]

[
 +++++++++++++++++++++++++++++++++++++++++++
	(#REM)		Questions
 +++++++++++++++++++++++++++++++++++++++++++
]
<BOUCLE_questions(QUESTIONS) {id_bloc}>

[
 ---------------------------
	(#REM)	champ texte
 ---------------------------
]
<BOUCLE_q_champ_texte(QUESTIONS) {id_question} {type=champ_texte}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd><input class="champ_texte" id="q_#ID_QUESTION" type="text" name="q_#ID_QUESTION" value="#REPONSE" /></dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_champ_texte>

[
 ---------------------------
	(#REM)	email applicant
 ---------------------------
]
<BOUCLE_q_email_applicant(QUESTIONS) {id_question} {type=email_applicant}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd><input class="champ_texte" id="q_#ID_QUESTION" type="text" name="q_#ID_QUESTION" value="[(#REPONSE|sinon{#EMAIL_APPLICANT})]" /></dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_email_applicant>

[
 ---------------------------
	(#REM)	nom applicant
 ---------------------------
]
<BOUCLE_q_nom_applicant(QUESTIONS) {id_question} {type=nom_applicant}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd><input class="champ_texte" id="q_#ID_QUESTION" type="text" name="q_#ID_QUESTION" value="[(#REPONSE|sinon{#NOM_APPLICANT})]" /></dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_nom_applicant>

[
 ---------------------------
	(#REM)	zone texte
 ---------------------------
]
<BOUCLE_q_zone_texte(QUESTIONS) {id_question} {type=zone_texte}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd><textarea class="champ_texte" id="q_#ID_QUESTION" name="q_#ID_QUESTION">#REPONSE</textarea></dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_zone_texte>

[
 ---------------------------
	(#REM)	boutons radio
 ---------------------------
]
<BOUCLE_q_boutons_radio(QUESTIONS) {id_question} {type=boutons_radio}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt>#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</dt>
[<dd>(#DESCRIPTIF)</dd>]
<BOUCLE_c_boutons_radio(CHOIX_QUESTION) {id_question}>
<dd><input id="c_q_#ID_CHOIX_QUESTION" type="radio" class="bouton_radio" value="#ID_CHOIX_QUESTION" name="q_#ID_QUESTION" [(#ID_CHOIX_QUESTION|in_any{#REPONSES**, ''}|?{'checked="checked" ',''})]/> <label for="c_q_#ID_CHOIX_QUESTION">#TITRE</label></dd>
</BOUCLE_c_boutons_radio>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_boutons_radio>

[
 ---------------------------
	(#REM)	cases à cocher
 ---------------------------
]
<BOUCLE_q_cases_a_cocher(QUESTIONS) {id_question} {type=cases_a_cocher}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt>#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</dt>
[<dd>(#DESCRIPTIF)</dd>]
<BOUCLE_c_cases_a_cocher(CHOIX_QUESTION) {id_question}>
<dd><input id="c_q_#ID_CHOIX_QUESTION" type="checkbox" class="case_a_cocher" value="#ID_CHOIX_QUESTION" name="q_[(#ID_QUESTION)][]" [(#ID_CHOIX_QUESTION|in_any{#REPONSES**, ''}|?{'checked="checked" ',''})]/> <label for="c_q_#ID_CHOIX_QUESTION">#TITRE</label></dd>
</BOUCLE_c_cases_a_cocher>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_cases_a_cocher>

[
 ---------------------------
	(#REM)	liste à choix
 ---------------------------
]
<BOUCLE_q_liste(QUESTIONS) {id_question} {type=liste}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd>
<select class="liste" id="q_#ID_QUESTION" name="q_#ID_QUESTION">
<BOUCLE_c_liste(CHOIX_QUESTION) {id_question}>
<option value="#ID_CHOIX_QUESTION"[(#REPONSE|=={#ID_CHOIX_QUESTION}|?{' selected="selected"',''})]>#TITRE</option>
</BOUCLE_c_liste>
</select>
</dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_liste>

[
 ---------------------------
	(#REM)	liste à choix multiples
 ---------------------------
]
<BOUCLE_q_liste_multiple(QUESTIONS) {id_question} {type=liste_multiple}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd>
<select class="liste" id="q_#ID_QUESTION" name="q_#ID_QUESTION[]" size="4" multiple="multiple">
<BOUCLE_c_liste_multiple(CHOIX_QUESTION) {id_question}>
<option value="#ID_CHOIX_QUESTION"[(#ID_CHOIX_QUESTION|in_any{#REPONSES**, ''}|?{' selected="selected"',''})]>#TITRE</option>
</BOUCLE_c_liste_multiple>
</select>
</dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_liste_multiple>

[
 ---------------------------
	(#REM)	abonnements
 ---------------------------
]
<BOUCLE_q_abonnements(QUESTIONS) {id_question} {type=abonnements}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt>#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</dt>
[<dd>(#DESCRIPTIF)</dd>]
<BOUCLE_c_abonnements(CHOIX_QUESTION) {id_question}>
<dd><input id="c_q_#ID_CHOIX_QUESTION" type="checkbox" class="case_a_cocher" value="#ID_CHOIX_QUESTION" name="q_[(#ID_QUESTION)][]" [(#ID_CHOIX_QUESTION|in_any{#REPONSES**, ''}|?{'checked="checked" ',[(#ID_RUBRIQUE|in_any{#ABONNEMENTS**, ''}|?{'checked="checked" ',''})]})]/> <label for="c_q_#ID_CHOIX_QUESTION">#TITRE</label></dd>
</BOUCLE_c_abonnements>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_abonnements>

[
 ---------------------------
	(#REM)	fichier
 ---------------------------
]
<BOUCLE_q_fichier(QUESTIONS) {id_question} {type=fichier}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<BOUCLE_r_fichier(REPONSES) {id_question} {id_application=#ENV{id_application}}><BOUCLE_documents(DOCUMENTS) {id_document=#VALEUR}><dd><a href="#URL_DOCUMENT">#TITRE</a> (<:formulairespublic:supprimer:> <input type="checkbox" class="case_a_cocher" name="s_#ID_REPONSE" value="#ID_DOCUMENT" />)</dd></BOUCLE_documents></BOUCLE_r_fichier>
<dd><input id="q_#ID_QUESTION" type="file" name="q_#ID_QUESTION" /></dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{'fichier'})</dd>]
</dl>
</BOUCLE_q_fichier>

[
 ---------------------------
	(#REM)	auteurs
 ---------------------------
]
<BOUCLE_q_auteurs(QUESTIONS) {id_question} {type=auteurs}>
<dl class="[(#OBLIGATOIRE|?{'obligatoire'})][ (#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|?{'erreur'})]">
<dt><label for="q_#ID_QUESTION">#TITRE[(#OBLIGATOIRE|?{'&nbsp;*'})]</label></dt>
<dd>
<select class="liste" id="q_#ID_QUESTION" name="q_#ID_QUESTION">
<BOUCLE_c_auteurs(CHOIX_QUESTION) {id_question}>
<option value="#ID_CHOIX_QUESTION"[(#REPONSE|=={#ID_CHOIX_QUESTION}|?{' selected="selected"',''})]>#TITRE</option>
</BOUCLE_c_auteurs>
</select>
</dd>
[<dd class="message">(#ID_QUESTION|in_any{#ENV**{erreurs}, ''}|formulaires_afficher_erreur{#CONTROLE})</dd>]
</dl>
</BOUCLE_q_auteurs>

</BOUCLE_questions>

</fieldset>

<ul class="boutons">
<li><input type="submit" name="bouton_valider" value="<:formulairespublic:bouton_valider:>" /></li>
</ul>

<p class="champs_caches">
<input type="hidden" name="action" value="valider_formulaire" />
<input type="hidden" name="id_formulaire" value="#ID_FORMULAIRE" />
<input type="hidden" name="id_bloc" value="#ID_BLOC" />
<input type="hidden" name="lang" value="#LANG" />
</p>
</BOUCLE_blocs>

</form>

</BOUCLE_formulaire>