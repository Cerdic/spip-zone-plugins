[(#REM)

	Controleur pour le crayon 'logo'

]
#CACHE{0}

[(#REM)

	On doit hacker l'url du logo avec sa date pour eviter le cache du navigateur

]

[(#SET{image,
	[(#ID_ARTICLE|?{#LOGO_ARTICLE_NORMAL})]
	[(#ID_AUTEUR|?{#LOGO_AUTEUR_NORMAL})]
	[(#ID_BREVE|?{#LOGO_BREVE_NORMAL})]
	[(#ID_RUBRIQUE|?{#LOGO_RUBRIQUE_NORMAL})]
	[(#ID_SYNDIC|?{#LOGO_SITE_NORMAL})]
})]

<fieldset[ style="(#ENV{style});"]>
<legend>[(#GET{image}|?{

	[(#SET{logo,[(#GET{image}|reduire_image{0,40})]})]
	[(#SET{url,[(#GET{logo}|extraire_attribut{src}|replace{\?.*$})]})]
	[(#SET{urls,[(#GET{url}|parametre_url{s,#EVAL{time()}})]})]

	<small>[(#GET{logo}|inserer_attribut{src,#GET{urls}}
		|inserer_attribut{style,vertical-align:middle;})]
	&nbsp; remplacer ce logo
	[((#GET{image}
		|extraire_attribut{width})&times;[(#GET{image}
		|extraire_attribut{height})]px)]&nbsp;:</small>

}|sinon{
	Choisir un logo :
})]
</legend>

<input class="crayon-active" name="#ENV{name_logo}" type="file" onchange="if(!this.value.match(/\.(png|jpeg|jpg|gif)$/i)){alert('Il faut choisir une image :-)');this.value=''};" />

</fieldset>