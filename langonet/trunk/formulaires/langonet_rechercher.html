<div class="formulaire_spip formulaire_langonet_rechercher_#ENV{type}" id="formulaire_langonet_rechercher_#ENV{type}">
	<h3 class="titrem">[(#CHEMIN_IMAGE{#FORM.png}|balise_img{'',cadre-icone})][(#ENV**{_legende})]</h3>

	[<p class='reponse_formulaire reponse_formulaire_erreur'>(#ENV*{message_erreur})</p>]
	<!-- <br class='bugajaxie' /> -->
<BOUCLE_editable(CONDITION){si #ENV{editable}}>
	<form method='post' action='#ENV{action}'><div>
		[(#REM) <!-- declarer les hidden qui declencheront le service du formulaire
		parametre : url d'action --> ]
		#ACTION_FORMULAIRE{#ENV{action}}
		<p class="explication">#ENV**{_explication}</p>
		<ul>
			<li class="editer_pattern obligatoire[(#ENV{erreurs}|table_valeur{pattern}|oui) erreur]">
				<label for="pattern_#ENV{type}"><:langonet:label_pattern:></label>
				<p class="explication">#ENV**{_info_pattern}</p>
				[<span class="erreur_message">(#ENV{erreurs}|table_valeur{pattern})</span>]
				<input type="text" name="pattern" value="#ENV{pattern}" id="pattern_#ENV{type}" class="text" />
			</li>
			<li class="editer_correspondance[(#ENV{erreurs}|table_valeur{correspondance}|oui) erreur]">
				<label><:langonet:label_correspondance:></label>
				<div class="choix">
					<input type="radio" name="correspondance" value="egal" id="correspondance_egal_#ENV{type}" class="radio"[ (#ENV{correspondance, egal}|=={egal}|oui)checked="checked"] />
					<label for="correspondance_egal_#ENV{type}"><:langonet:label_correspondance_egal:></label>
				</div>
				<div class="choix">
					<input type="radio" name="correspondance" value="commence" id="correspondance_commence_#ENV{type}" class="radio"[ (#ENV{correspondance, egal}|=={commence}|oui)checked="checked"] />
					<label for="correspondance_commence_#ENV{type}"><:langonet:label_correspondance_commence:></label>
				</div>
				<div class="choix">
					<input type="radio" name="correspondance" value="contient" id="correspondance_contient_#ENV{type}" class="radio"[ (#ENV{correspondance, egal}|=={contient}|oui)checked="checked"] />
					<label for="correspondance_contient_#ENV{type}"><:langonet:label_correspondance_contient:></label>
				</div>
			</li>
			<B_modules>
			<li class="editer_modules obligatoire[(#ENV{erreurs}|table_valeur{modules}|oui) erreur]">
				<p class="explication">#ENV**{_info_modules}</p>
				<label><:langonet:label_modules:></label>
				[<span class="erreur_message">(#ENV{erreurs}|table_valeur{modules})</span>]
				<div class="choix">
					<input type="checkbox" name="defaut_modules" value="oui" id="defaut_modules_#ENV{type}" class="checkbox"[ (#ENV{defaut_modules}|oui)checked="checked"]
								 onchange="jQuery(this).prop('checked')?jQuery('#liste_modules_#ENV{type}').hide('fast'):jQuery('#liste_modules_#ENV{type}').show('fast');" />
					<label for="defaut_modules_#ENV{type}">#ENV**{_label_defaut}</label>
				</div>
				<div id="liste_modules_#ENV{type}"[(#ENV{defaut_modules}|oui)style="display:none;"]>
					<ol class="spip">
			<BOUCLE_modules(DATA){source table, #ENV{_modules}}>
						<li class="choix">
							<input type="checkbox" name="modules[]" value="#CLE:#VALEUR" id="[module_(#CLE)_#ENV{type}]" class="checkbox module_#ENV{type}"[ (#CLE|in_array{#ENV{_modules_choisis}}|oui)checked="checked"] />
							<label for="[module_(#CLE)_#ENV{type}]">#CLE</label>
						</li>
			</BOUCLE_modules>
					</ol>
					<a href="#" id="select_tous_#ENV{type}"><:langonet:bouton_cocher_tout:></a><span class="sep"> | </span>
					<a href="#" id="select_aucun_#ENV{type}"><:langonet:bouton_cocher_aucun:></a><span class="sep"> | </span>
					<a href="#" id="select_spip_#ENV{type}"><:langonet:bouton_cocher_spip:></a>
				</div>
			</li>
			</B_modules>
		</ul>

		<p class='boutons'>
			<input type='submit' class='submit' value='<:langonet:bouton_rechercher:>' />
		</p>
	</div></form>
</BOUCLE_editable>

	[(#REM) <!-- Affichage des resultats --> ]
	[(#SET{total_trouves, [(#ENV*{message_ok}|table_valeur{total})]})]
	[<fieldset>
		<legend><:langonet:legende_trouves{total=#GET{total_trouves}}:></legend>
		(#ENV*{message_ok}|table_valeur{trouves})
	</fieldset>]
</div>

<script type="text/javascript">
//<![CDATA[
	(function($){
		jQuery("#select_tous_#ENV{type}").click(function(){
			jQuery("input.module_#ENV{type}").attr("checked",true);
			return false;
		});
		jQuery("#select_aucun_#ENV{type}").click(function(){
			$("input.module_#ENV{type}").attr("checked",false);
			return false;
		});
		jQuery("#select_spip_#ENV{type}").click(function(){
			jQuery("input.module_#ENV{type}").attr("checked",false);
			jQuery("#module_ecrire_#ENV{type}").attr("checked",true);
			jQuery("#module_public_#ENV{type}").attr("checked",true);
			jQuery("#module_spip_#ENV{type}").attr("checked",true);
			return false;
		});
	})(jQuery);
//]]>
</script>
