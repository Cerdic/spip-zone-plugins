[(#REM)

	Modèle doc_img
	
	Options personnalisées :
	- align string (left|right|center) : le type d'alignement du bloc
	- class string : une class css du bloc parent
	- largeur int : largeur maximale des images (défaut 640)
	- hauteur int : hauteur maximale des images (défaut aucune)
	- liens_documents string : si == non, pas de liens sur les images
	- no_pagination string : si présent, n'affiche pas la pagination
	- no_desc string : si présent n'affiche pas le nombre de pages
	- type_pagination string : le type de pagination (défaut page)
	- download ou telecharger string : si == oui affiche un lien de téléchargement du document sous la prévisualisation
	- class_btn_download string : class à ajouter au bouton download
]
<BOUCLE_document(DOCUMENTS){id_document=#ENV{id_document,#ENV{id}}}>
<B_d2c>
	
	<div[ id="(#ANCRE_PAGINATION|extraire_attribut{id})"] class="spip_docimg spip_documents[ spip_documents_(#ENV{align})][ (#ENV{class})] spip_lien_ok"[ style='float:(#ENV{align}|match{left|right});']>
	[(#ENV{no_pagination}|non)[<div class="pagination">(#PAGINATION{#ENV{type_pagination,page}})</div>]]
	<BOUCLE_d2c(DOCUMENTS){mode=doc2img}{objet=document}{id_objet=#ENV{id_document,#ENV{id}}}{par id_document} {statut==.*}{pagination 1}>
		[(#ENV{liens_documents,oui}|!={non}|oui)<a href="[(#FICHIER|image_reduire{1500,0}|extraire_attribut{src}|timestamp)]" class="mediabox">]
		#SET{titre,#ENV{titre,#TITRE}|sinon{#FICHIER|basename}|couper{20}}
		[(#FICHIER|image_reduire{#ENV{largeur,640},#ENV{hauteur,0}}|inserer_attribut{alt,#VAL{doc2img:info_alt_image}|_T{#ARRAY{titre,#GET{titre},page,#PAGE}}|attribut_html})]
		[(#ENV{liens_documents,oui}|!={non}|oui)</a>]
	</BOUCLE_d2c>
    [(#ENV{no_desc}|non)[<p>(#GRAND_TOTAL|singulier_ou_pluriel{doc2img:info_desc_page,doc2img:info_desc_pages})</p>]]
    [(#ENV{download}|=={oui}|ou{#ENV{telecharger}|=={oui}}|oui)<p><a href="[(#URL_ACTION_AUTEUR{acceder_document,#_document:ID_DOCUMENT}|parametre_url{file,#_document:FICHIER**}|parametre_url{cle,[(#VAL{#_document:ID_DOCUMENT}|concat{','}|concat{#_document:FICHIER**}|calculer_cle_action)]})]" class="btn[ (#ENV{class_btn_download})]"><:bouton_download:></a></p>]
    [(#ENV{no_pagination}|non)[<div class="pagination">(#PAGINATION{#ENV{type_pagination,page}})</div>]]
	</div>
</B_d2c>
</BOUCLE_document>