#SET{details,#ENV{details}|=={non}|?{'',#ENV{details,'on'}}}
#SET{export,#ENV{export}|=={non}|?{'','on'}}
#SET{liens,#ENV{liens}|=={non}|?{'','on'}}
#SET{souligne,#ENV{auteur}|et{#ENV{souligne}|!={non}}|?{#ENV{auteur},''}}
#SET{alea,#EVAL{rand()}} [(#REM) besoin d'un alea pour unique car le modele peut etre appele plusieurs fois (typiquement pour l'intro, puis pour le texte). ]
<B_biblio>
<BOUCLE_biblio(ZITEMS){id_parent==0}{auteur?}{type?}{annee?}{publication?}{conference?}{editeur?}{collection?}{type_doc?}{tag?}{zcollection?}{zotsip_depuis}{0,#ENV{max,100000}}{par_type_zotero}{!par annee}{par auteurs}{json LIKE %#ENV{recherche}%}>
#SET{ouvert,' '}
[[(#COMPTEUR_BOUCLE|>{1}|oui)</ul>]<h4 class="h4">(#TYPE|zotspip_traduire_type|unique{type_#GET{alea}})</h4>#SET{ouvert,''}]
[[(#GET{ouvert})</ul>]<h5 class="h5">(#ANNEE|=={0}|?{<:zotspip:annee_non_precisee:>,#ANNEE}|unique{annee_#GET{alea}_#TYPE})</h5><ul class="spip">]
#INCLURE{fond=inclure/zitem,id_zitem,csl,liste=oui,icones=oui,details=#GET{details},export=#GET{export},liens=#GET{liens},souligne=#GET{souligne}}
</BOUCLE_biblio>
</ul>
</B_biblio>