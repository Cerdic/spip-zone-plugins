PLUGIN « VU ! » POUR SPIP 2


Ce plugin a pour objectif de faciliter la publication du résultat d'une activité de veille scientifique, technologique... Pour cela, il ajoute à Spip trois nouveaux types d'objets éditoriaux que l'on peut être amené à rencontrer : les annonces que l'on souhaite relayer, les événements à venir et les publications qui méritent le coup d'œil.


{{{Le principe}}}

Ce plugin est né pour tenter de résoudre un problème plutôt épineux, qui semblera curieux à qui ne s'y est pas trouvé confronté. On peut le résumer en une simple interrogation : comment publier dans Spip le résultat d'une activité de veille thématique[[[Définition personnelle] La veille est un terme générique pour désigner toute activité de collecte d'information concernant un champ thématique, afin d'en percevoir les évolutions en s'attachant tout particulièrement à en suivre l'actualité.]] ? Car - en effet - veiller n'est pas publier. Au mieux, on peut chercher à publier le résultat d'une veille - c'est l'objectif ici - mais ce n'est pas non plus de la publication à proprement parler. Contrairement à un processus de syndication - que Spip gère très bien nativement - la publication du résultat d'une activité de veille ne consiste pas à récupérer du contenu à publier, mais à en signaler simplement l'existence. Le contenu n'est pas ici notre affaire. Comment donc publier de l'information sans contenu ?

Les outils natifs de Spip ne sont pas adaptés à ce genre de situation particulière. Ni les articles, ni les brèves puisque ces objets éditoriaux sont centrés sur leur contenu : sans, ils n'ont en effet aucune raison d'être. Nous ici avonc besoin d'objets éditoriaux spécifiques, qui donneront le privilège aux informations habituellement considérées comme annexes : quel type de contenu a t-il été publié ? Par qui ? Où ? Quand ? À l'usage, les informations que l'on souhaite relayer n'ont pas toutes les mêmes caractéristiques pertinentes. Elles peuvent être classées trois catégories : les annonces qui ont une date de péremption, les évenements inévitablement une date et un lieu, et les publications toujours un auteur. 

C'est sur la base de cette réflexion que ces trois nouveaux objets éditoriaux ont été créés (les annonces, les évenements et les publications), auxquels correspondent respectivement une nouvelle boucle avec ses balises et critères. Notez qu'une place particulière dans ces trois objets est laissée à l'émetteur initial (possibilité d'en indiquer le nom et l'URL), indiquer ses sources paraît en effet un minimum quand on relaie des informations extérieures. Également, un champ est prévu pour indiquer la date à laquelle l'information a été vue (avant de la relayer), en effet parce que le web est mouvant, marquer temporellement la consultation d'une information peut avoir son importance.


{{{La mise en œuvre : un plugin école}}}

Ce plugin se veut simple (et efficace) dans sa mécanique interne, afin de coller à l'esprit et aux fonctionnalités SPIP, d'en faciliter la maintenance, surtout pour moi qui fait ici mes premières armes avec PHP et plus généralement le développement applicatif. On part donc de zéro sur ce plugin, tout est à faire. Soyez indulgents, votre aide et vos remarques (constructives) sont les bienvenues.

D'un point de vue technique, aux trois nouveaux objets éditoriaux correspondent trois tables supplémentaires, et donc trois nouvelles boucles avec leurs balises et critères. Chacune de ces tables possède en outre une table auxilliaire dite de jointure, afin d'intégrer un peu mieux tout ceci au reste. Ces dernières ne sont pour l'instant utilisées que pour la gestion des mots-clés associés aux annonces, publications ou évenements. Enfin, concernant l'interface de saisie des données dans les nouvelles tables, notez qu'il n'y en a pas encore (voir les {[spécificités de la version 0.1->#version01]).

Concernant l'installation, rien d'original le plugin {Vu !} s'installe comme n'importe quel autre plugin.

Ce plugin peut être vu en fonctionnement à cette adresse : http://www.laspic.eu, rubrique Blog, AtelierSHS ou À propos. Voir la colonne de droite, boites de couleur verte dédiées à la publication du resultat d'une veille scientifique. Les objets 'annonces' et 'evenements' ont été ici regroupés dans un bloc agenda.


{{{Les boucles}}}

{{La boucle VU_ANNONCES}}
|{{balise}}|{{description}}|
|#ID_ANNONCE|Identifiant unique de l'annonce|
|#TYPE|Type d'annonce (communication ? appel à projet ? information ? ...)|
|#TITRE|Titre de l'annonce|
|#LIEN_ANNONCE|Lien à consulter associé à l'annonce|
|#DATE_PEREMPTION|Date de fin de publication de l'annonce (parce qu'une annonce a toujours une durée de vie limitée)|
|#NOM_SOURCE|Source de l'information, si provenance externe|
|#LIEN_SOURCE|Lien vers la source de l'information (tout à fait différent du lien associé à l'annonce)|
|#DATE_VUE|Date à laquelle l'information a été repérée|
|#DATE_REDAC|Date de publication de l'information sur votre site|
|#STATUT|Statut de publication de l'information sur votre site|

{{La boucle VU_EVENEMENTS}}
|{{balise}}|{{description}}|
|#ID_EVENEMENT|Identifiant unique de l'évenement|
|#TYPE|Type d'évenement (journée d'étude ? manifestation ? conférence ? ...)|
|#TITRE|Titre de l'évenement|
|#LIEN_EVENEMENT|Lien à consulter associé à l'évenement|
|#DATE_EVENEMENT|Date de l'évenement|
|#LIEU|Lieu de l'évenement|
|#NOM_SOURCE|Source de l'information, si provenance externe|
|#LIEN_SOURCE|Lien vers la source de l'information (tout à fait différent du lien associé à l'annonce)|
|#DATE_VUE|Date à laquelle l'information a été repérée|
|#DATE_REDAC|Date de publication de l'information sur votre site|
|#STATUT|Statut de publication de l'information sur votre site|

{{La boucle VU_PUBLICATIONS}}
|{{balise}}|{{description}}|
|#ID_PUBLICATION|Identifiant unique de l'évenement|
|#TITRE|Titre de la publication|
|#AUTEUR|Auteur de la publication (et émetteur de l'information)|
|#LIEN_PUBLICATION|Lien direct vers la publication si accessible en ligne|
|#NOM_SOURCE|Source de l'information, si provenance externe|
|#LIEN_SOURCE|Lien vers la source de l'information (tout à fait différent du lien associé à l'annonce)|
|#DATE_VUE|Date à laquelle l'information a été repérée|
|#DATE_REDAC|Date de publication de l'information sur votre site|
|#STATUT|Statut de publication de l'information sur votre site|

{{Les critères}}
Notons que les critères et balises de chaque boucle ne sont autres que les noms des champs figurant dans la table. Ainsi chaque champ est potentiellement utilisable comme critère ou comme balise, même si ce n'est pas toujours pertinent. En effet, à quoi bon un critère {titre} ? Par contre un critère comme <code>{date_peremption > #ENV{date}}</code> semble beaucoup utilisable.

Le critère {id_mot} a sinon été ajouté pour les trois nouvelles boucles, il permet de sélectionner les objets selon leurs mot-clés.


{{{Le développement}}}

{---- v0.2 - à venir
	Objectif : mise en place d'une interface de saisie pour ces trois nouveaux objets.}

---- v0.1 - 26 mai 2009
	Version ultra-basique, automatisation (youpi !) de l'installation des tables supplémentaires. La désinstallation fonctionne également. Pour le reste, SPIP fait le travail tout seul : reconnaissance des tables, mise en place des nouvelles boucles, détection des champs pour les balises et critères, les jointures. Par contre, encore aucune interface pour insérer du contenu à l'heure actuelle. 


{{{[#version01<-]Spécificités de la version 0.1}}}

Pour pouvoir utiliser les nouveaux objets de ce plugin, en dépit de l'absence d'une interface de saisie dans l'espace privée de votre site, deux solutions sont possibles : 
-* Soit, vous utilisez l'interface de gestion de votre base de donnée - par exemple phpMyAdmin. Vraiment peu ergonomique, mais ne nécessite aucune installation supplémentaire.
-* Utilisez ce superbe plugin [TableData->http://www.spip-contrib.net/TableData-pour-Spip-2] qui permet d'éditer toutes les tables de la base de donnée SPIP, directement depuis l'espace privé. Facile à installer, rien à configurer, et beaucoup plus ergonomique. 

Considérant l'utilisation conjointe de ce plugin avec le plugin TableData, voici quelques éléments qu'il sera bon de prendre en compte :
-* Les tables {vu_*} sont les tables principales. 
-** Les champs {id_} ne sont pas éditables. Identifiant unique de chaque objet publié, ils sont incrémentés automatiquement.
-** Les champs {date_} attendent un format PHP, à savoir « AAAA.MM.JJ » ou « AAAA.MM.JJ HH:MM:SS ».
-** Les champs {statut} correspond au statut de publication. Deux valeurs possible : « oui » ou « non ».
-* Les tables {vu_*_mots} sont des tables de jointures, nécessaire pour associer des mots-clés à chaque type de nouvel objet. 
-** La première colonne est destinée à recevoir l'{id_mot} du mot-clé choisi ; et la seconde colonne, l'{id_*} de l'objet que vous voulez y associer.

